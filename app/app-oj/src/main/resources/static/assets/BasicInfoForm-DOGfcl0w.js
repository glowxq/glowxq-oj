import{M as I}from"./index-E5zgXN01.js";import{E as V}from"./EnumSelect-C2fXZs6G.js";import{M as w}from"./TagSelect-BSg1hRn-.js";import{P}from"./ProblemType-TBlMUhPx.js";import{P as S}from"./ProgramType-C5wHKcT4.js";import{D as C}from"./DifficultyLevel-DrWtmZg7.js";import{P as F}from"./ProblemSourceType-ColSuHcx.js";import{d as M,e as q,o as g,c as U,a as n,j as e,k as o,u as i,ds as D,y as f,m as N,W as O,f as r,_ as G}from"./index-DTkCE7MD.js";import"./style-DrPmFrlE.js";import"./upload-BtJOZC1L.js";import"./FileSaver.min-BnsyPtRb.js";import"./metaTag-XZEJwT5o.js";import"./metaTagCategory-DYsFMRBy.js";const K={PUBLIC:{code:0,name:"公开",tooltip:"所有用户可访问",text:"任何用户均可访问此资源"},PRIVATE:{code:1,name:"私有",tooltip:"仅创建者可访问",text:"仅资源创建者可以访问"},PROTECTED:{code:2,name:"受保护",tooltip:"需要密码访问",text:"需要输入正确的密码才能访问"},GROUP:{code:3,name:"群组",tooltip:"所属群组成员可访问",text:"仅所属群组的成员可以访问"}},R={class:"basic-info-form"},j={class:"problem-type-section"},A={class:"problem-type-wrapper"},J={class:"problem-type-wrapper"},W={key:0,class:"edit-disabled-text"},$={class:"markdown-editor-wrapper"},z={class:"next-step-actions"},H=M({name:"BasicInfoForm",__name:"BasicInfoForm",props:{modelValue:{},isEdit:{type:Boolean}},emits:["uploadSuccess","uploadError","next-step"],setup(c,{emit:_}){const p=c,y=_,E=a=>{y("uploadSuccess",a)},v=a=>{y("uploadError",a)},L=()=>{const l=[{field:p.modelValue.problemBo.title,name:"题目标题"},{field:p.modelValue.problemBo.programType!==void 0,name:"程序类型"},{field:p.modelValue.problemBo.problemType,name:"题目类型"},{field:p.modelValue.problemBo.timeLimit,name:"时间限制"},{field:p.modelValue.problemBo.memoryLimit,name:"内存限制"},{field:p.modelValue.problemBo.stackLimit,name:"栈限制"},{field:p.modelValue.problemBo.auth,name:"权限类型"},{field:p.modelValue.problemBo.description,name:"题目描述"}].filter(s=>!s.field);if(l.length>0){O.warning({message:`请先填写必填项：${l.map(s=>s.name).join("、")}`,duration:3e3});return}y("next-step",p.modelValue.problemBo.problemType)};return q(()=>{(p.modelValue.problemBo.sourceType===""||p.modelValue.problemBo.sourceType===void 0)&&(p.modelValue.problemBo.sourceType="GlowOJ"),p.modelValue.problemBo.programType===void 0&&(p.modelValue.problemBo.programType=0)}),(a,l)=>{const s=r("el-icon"),d=r("el-form-item"),T=r("el-divider"),B=r("el-input"),t=r("el-col"),u=r("el-row"),b=r("el-input-number"),k=r("el-button");return g(),U("div",R,[n("div",j,[l[17]||(l[17]=n("h3",null,"选择题目类型",-1)),n("div",A,[e(d,{label:"题目类型",prop:"problemBo.problemType"},{default:o(()=>[n("div",J,[e(V,{modelValue:a.modelValue.problemBo.problemType,"onUpdate:modelValue":l[0]||(l[0]=m=>a.modelValue.problemBo.problemType=m),"enum-data":i(P),disabled:a.isEdit,placeholder:"请选择题目类型"},null,8,["modelValue","enum-data","disabled"]),a.isEdit?(g(),U("span",W,[e(s,{class:"edit-disabled-icon"},{default:o(()=>[e(i(D))]),_:1}),l[16]||(l[16]=f(" 编辑模式下不允许修改题目类型 "))])):N("",!0)])]),_:1})])]),e(T,{"content-position":"left"},{default:o(()=>l[18]||(l[18]=[f("基本信息")])),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:12},{default:o(()=>[e(d,{label:"题目ID",prop:"problemBo.problemKey"},{default:o(()=>[e(B,{modelValue:a.modelValue.problemBo.problemKey,"onUpdate:modelValue":l[1]||(l[1]=m=>a.modelValue.problemBo.problemKey=m),placeholder:"请填写题目的自定义ID，例如(GOJ-1000),留空自动生成",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:12},{default:o(()=>[e(d,{label:"题目标题",prop:"problemBo.title",required:""},{default:o(()=>[e(B,{modelValue:a.modelValue.problemBo.title,"onUpdate:modelValue":l[2]||(l[2]=m=>a.modelValue.problemBo.title=m),placeholder:"请填写题目标题",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:8},{default:o(()=>[e(d,{label:"作者",prop:"problemBo.author"},{default:o(()=>[e(B,{modelValue:a.modelValue.problemBo.author,"onUpdate:modelValue":l[3]||(l[3]=m=>a.modelValue.problemBo.author=m),placeholder:"请填写作者，留空自动生成",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"程序类型",prop:"problemBo.programType",required:""},{default:o(()=>[e(V,{modelValue:a.modelValue.problemBo.programType,"onUpdate:modelValue":l[4]||(l[4]=m=>a.modelValue.problemBo.programType=m),"enum-data":i(S),type:"select",placeholder:"请选择程序类型"},null,8,["modelValue","enum-data"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"难度等级",prop:"problemBo.difficulty"},{default:o(()=>[e(V,{modelValue:a.modelValue.problemBo.difficulty,"onUpdate:modelValue":l[5]||(l[5]=m=>a.modelValue.problemBo.difficulty=m),"enum-data":i(C),type:"select",placeholder:"请选择难度等级"},null,8,["modelValue","enum-data"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:8},{default:o(()=>[e(d,{label:"来源类型",prop:"problemBo.sourceType"},{default:o(()=>[e(V,{modelValue:a.modelValue.problemBo.sourceType,"onUpdate:modelValue":l[6]||(l[6]=m=>a.modelValue.problemBo.sourceType=m),"enum-data":i(F),type:"select",placeholder:"请选择来源类型"},null,8,["modelValue","enum-data"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"题目来源",prop:"problemBo.source"},{default:o(()=>[e(B,{modelValue:a.modelValue.problemBo.source,"onUpdate:modelValue":l[7]||(l[7]=m=>a.modelValue.problemBo.source=m),placeholder:"请填写题目来源",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"权限类型",prop:"problemBo.auth"},{default:o(()=>[e(V,{modelValue:a.modelValue.problemBo.auth,"onUpdate:modelValue":l[8]||(l[8]=m=>a.modelValue.problemBo.auth=m),"enum-data":i(K),type:"select",placeholder:"请选择权限类型"},null,8,["modelValue","enum-data"])]),_:1})]),_:1})]),_:1}),e(T,{"content-position":"left"},{default:o(()=>l[19]||(l[19]=[f("资源限制")])),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:8},{default:o(()=>[e(d,{label:"时间限制(ms)",prop:"problemBo.timeLimit"},{default:o(()=>[e(b,{modelValue:a.modelValue.problemBo.timeLimit,"onUpdate:modelValue":l[9]||(l[9]=m=>a.modelValue.problemBo.timeLimit=m),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"内存限制(kb)",prop:"problemBo.memoryLimit"},{default:o(()=>[e(b,{modelValue:a.modelValue.problemBo.memoryLimit,"onUpdate:modelValue":l[10]||(l[10]=m=>a.modelValue.problemBo.memoryLimit=m),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"栈限制(mb)",prop:"problemBo.stackLimit"},{default:o(()=>[e(b,{modelValue:a.modelValue.problemBo.stackLimit,"onUpdate:modelValue":l[11]||(l[11]=m=>a.modelValue.problemBo.stackLimit=m),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:8},{default:o(()=>[e(d,{label:"OI题目分数",prop:"problemBo.ioScore"},{default:o(()=>[e(b,{modelValue:a.modelValue.problemBo.ioScore,"onUpdate:modelValue":l[12]||(l[12]=m=>a.modelValue.problemBo.ioScore=m),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:o(()=>[e(d,{label:"非编程题分数",prop:"problemBo.score"},{default:o(()=>[e(b,{modelValue:a.modelValue.problemBo.score,"onUpdate:modelValue":l[13]||(l[13]=m=>a.modelValue.problemBo.score=m),min:0,precision:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(T,{"content-position":"left"},{default:o(()=>l[20]||(l[20]=[f("标签与描述")])),_:1}),e(u,{gutter:24},{default:o(()=>[e(t,{span:24},{default:o(()=>[e(d,{label:"标签",prop:"problemBo.tagIds"},{default:o(()=>[e(w,{modelValue:a.modelValue.problemBo.tagIds,"onUpdate:modelValue":l[14]||(l[14]=m=>a.modelValue.problemBo.tagIds=m),multiple:!0,placeholder:"请选择题目标签"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{label:"题目描述",prop:"problemBo.description",required:""},{default:o(()=>[n("div",$,[e(I,{modelValue:a.modelValue.problemBo.description,"onUpdate:modelValue":l[15]||(l[15]=m=>a.modelValue.problemBo.description=m),placeholder:"请填写题目描述",height:300,"use-oss":!0,"img-dir":"problem-description",key:"problem-description-editor","default-expand-toolbar":!1,onUploadSuccess:E,onUploadError:v},null,8,["modelValue"])])]),_:1}),n("div",z,[e(k,{type:"primary",onClick:L},{default:o(()=>l[21]||(l[21]=[f("下一步")])),_:1})])])}}}),te=G(H,[["__scopeId","data-v-e533348c"]]);export{te as default};
