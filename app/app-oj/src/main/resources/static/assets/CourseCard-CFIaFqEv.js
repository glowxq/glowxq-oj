import{d as q,p as K,s as X,b as l,bk as h,bl as B,r as L,e as Y,bt as Z,f as M,g as ee,o as a,c as n,a as t,m as r,t as u,n as w,z as S,y as m,T as p,j as v,k as g,u as T,bu as V,P as te,Q as se,x as oe,i as x,b1 as ae,a$ as ne,W as b,bv as ie,_ as re}from"./index-DTkCE7MD.js";import le from"./teacher-BaXmGp8W.js";import ce from"./phone-AAKQdgK6.js";import ue from"./time-3HTQ8mLx.js";import de from"./note-09UWJrPN.js";import ve from"./class-BWbqkwWR.js";const me={key:0,class:"select-checkbox"},pe={class:"card-header"},_e={key:0,class:"card-code"},ge={class:"card-content"},fe={class:"info-row"},he={class:"info-value"},we={key:0,class:"info-row"},Te={class:"info-value"},be={class:"phone-number"},ye={class:"time-info-container"},ke={class:"time-range"},Ce={key:0,class:"time-item"},$e={class:"time-value"},De={key:1,class:"time-item"},Se={class:"time-value"},xe={key:2,class:"no-time-set"},Ne={key:1,class:"description-container"},Pe={class:"description-wrapper"},ze=["title"],Be={key:2,class:"groups-container"},Le={class:"card-actions"},Me={class:"actions-container"},Ve={class:"other-actions"},Ee=q({__name:"CourseCard",props:{course:{},isSelected:{type:Boolean}},emits:["edit","copy","delete","select","view-details"],setup(E,{emit:G}){K(o=>({"1407b97a":O.value,"32e8dda8":d.value}));const f=E,N=G,H=X(),d=l(()=>H.primary);l(()=>h(d.value,.1)),l(()=>B(d.value,.1));const O=l(()=>`linear-gradient(135deg, ${h(d.value,.15)}, ${B(d.value,.05)})`),A=l(()=>`linear-gradient(135deg, ${h(d.value,.98)}, ${h(d.value,.95)})`),I=l(()=>"rgba(0, 0, 0, 0.08)"),e=l(()=>{if(typeof f.course=="string")try{return JSON.parse(f.course)}catch(o){return console.error("无法解析课程数据",o),{name:"数据解析错误",content:f.course}}return f.course}),R=l(()=>{if(!e.value.startTime||!e.value.endTime)return"status-unknown";const o=new Date().getTime(),s=new Date(e.value.startTime).getTime(),i=new Date(e.value.endTime).getTime();return o<s?"status-upcoming":o>i?"status-ended":"status-ongoing"}),U=l(()=>{if(!e.value.startTime||!e.value.endTime)return"未设置时间";const o=new Date().getTime(),s=new Date(e.value.startTime).getTime(),i=new Date(e.value.endTime).getTime();return o<s?"即将开始":o>i?"已结束":"进行中"}),j=l(()=>{if(!e.value.startTime||!e.value.endTime)return!1;const o=new Date().getTime(),s=new Date(e.value.startTime).getTime(),i=new Date(e.value.endTime).getTime();return o>=s-30*60*1e3&&o<=i}),P=o=>{if(!o)return"";const s=new Date(o),i=s.getMonth()+1,D=s.getDate(),_=s.getHours().toString().padStart(2,"0"),c=s.getMinutes().toString().padStart(2,"0");return`${i}月${D}日 ${_}:${c}`},F=()=>{if(!e.value.url){b.warning("该课程没有设置课程链接，无法开始上课");return}window.open(e.value.url,"_blank"),b.success(`已开始【${e.value.name}】课程`)},J=()=>{e.value.teacherPhone&&navigator.clipboard.writeText(e.value.teacherPhone).then(()=>{b.success("电话号码已复制到剪贴板")}).catch(()=>{b.error("复制失败，请手动复制")})},Q=()=>{N("select",e.value)},y=L(null),z=L(!1);Y(()=>{k(),window.addEventListener("resize",k)}),Z(()=>{window.removeEventListener("resize",k)});const k=()=>{if(!y.value)return;const o=y.value;z.value=o.scrollHeight>o.clientHeight},C=ie(),$=o=>{var s;return!!((s=C==null?void 0:C.vnode.props)!=null&&s[`on${o.charAt(0).toUpperCase()+o.slice(1)}`])},W=()=>{N("view-details",e.value)};return(o,s)=>{const i=M("el-icon"),D=M("el-tag"),_=ee("auth");return a(),n("div",{class:w(["course-card",{"is-selected":o.isSelected}]),style:S({background:A.value,boxShadow:`0 6px 16px ${I.value}`}),onClick:Q},[o.isSelected?(a(),n("div",me,s[3]||(s[3]=[t("span",{class:"checkbox-icon"},"✓",-1)]))):r("",!0),t("div",{class:w(["card-status-badge",R.value])},u(U.value),3),t("div",pe,[t("h3",{class:"card-title",style:S({color:d.value})},u(e.value.name||"未命名课程"),5),e.value.code?(a(),n("div",_e,u(e.value.code),1)):r("",!0)]),t("div",ge,[t("div",fe,[s[4]||(s[4]=t("div",{class:"info-label"},[t("div",{class:"icon-wrapper"},[t("img",{src:le,class:"icon"})]),m(" 授课老师: ")],-1)),t("div",he,u(e.value.teacherName||"暂无"),1)]),e.value.teacherPhone?(a(),n("div",we,[s[5]||(s[5]=t("div",{class:"info-label"},[t("div",{class:"icon-wrapper"},[t("img",{src:ce,class:"icon"})]),m(" 联系电话: ")],-1)),t("div",Te,[t("span",be,u(e.value.teacherPhone),1),t("button",{class:"copy-phone-btn",onClick:p(J,["stop"]),title:"复制电话"},[v(i,null,{default:g(()=>[v(T(V))]),_:1})])])])):r("",!0),t("div",ye,[s[8]||(s[8]=t("div",{class:"time-info-header"},[t("div",{class:"icon-wrapper"},[t("img",{src:ue,class:"icon"})]),m(" 课程时间 ")],-1)),t("div",ke,[e.value.startTime?(a(),n("div",Ce,[s[6]||(s[6]=t("span",{class:"time-label"},"开始:",-1)),t("span",$e,u(P(e.value.startTime)),1)])):r("",!0),e.value.endTime?(a(),n("div",De,[s[7]||(s[7]=t("span",{class:"time-label"},"结束:",-1)),t("span",Se,u(P(e.value.endTime)),1)])):r("",!0),!e.value.startTime&&!e.value.endTime?(a(),n("div",xe,"未设置课程时间")):r("",!0)])]),e.value.content?(a(),n("div",Ne,[s[9]||(s[9]=t("div",{class:"description-header"},[t("div",{class:"icon-wrapper"},[t("img",{src:de,class:"icon"})]),m(" 课程内容 ")],-1)),t("div",Pe,[t("p",{class:"description-text",title:e.value.content},u(e.value.content),9,ze)])])):r("",!0),e.value.groups&&e.value.groups.length>0?(a(),n("div",Be,[s[10]||(s[10]=t("div",{class:"groups-header"},[t("div",{class:"icon-wrapper"},[t("img",{src:ve,class:"icon"})]),m(" 班级 ")],-1)),t("div",{class:w(["groups-tags",{overflow:z.value}]),ref_key:"groupsTagsRef",ref:y},[(a(!0),n(te,null,se(e.value.groups,c=>(a(),oe(D,{key:c.id,class:"group-tag",size:"small",type:"info",effect:"plain",style:S({borderColor:c.color||"#e9e9eb",color:c.color||"#606266"})},{default:g(()=>[m(u(c.name),1)]),_:2},1032,["style"]))),128))],2)])):r("",!0)]),t("div",Le,[t("div",Me,[t("button",{class:"action-button view-details-button",onClick:p(W,["stop"])}," 查看详情 "),t("button",{class:w(["action-button start-course-button",{disabled:!j.value||!e.value.url}]),onClick:p(F,["stop"])}," 立即上课 ",2)]),t("div",Ve,[$("edit")?x((a(),n("button",{key:0,class:"action-icon edit-icon",onClick:s[0]||(s[0]=p(c=>o.$emit("edit",e.value),["stop"])),title:"编辑"},[v(i,null,{default:g(()=>[v(T(ae))]),_:1})])),[[_,"course.update"]]):r("",!0),$("copy")?x((a(),n("button",{key:1,class:"action-icon copy-icon",onClick:s[1]||(s[1]=p(c=>o.$emit("copy",e.value),["stop"])),title:"复制"},[v(i,null,{default:g(()=>[v(T(V))]),_:1})])),[[_,"course.update"]]):r("",!0),$("delete")?x((a(),n("button",{key:2,class:"action-icon delete-icon",onClick:s[2]||(s[2]=p(c=>o.$emit("delete",e.value),["stop"])),title:"删除"},[v(i,null,{default:g(()=>[v(T(ne))]),_:1})])),[[_,"course.remove"]]):r("",!0)])])],6)}}}),Ue=re(Ee,[["__scopeId","data-v-1e5fcba6"]]);export{Ue as default};
