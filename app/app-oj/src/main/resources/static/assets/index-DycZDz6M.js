import{h as s,O as c,d as N,r as _,f as R,g as S,o as p,c as O,j as T,k as n,i as d,x as b,u,a_ as J,y as f,a$ as P,D as V,b0 as H,b1 as h}from"./index-DTkCE7MD.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as I}from"./useHandleData-BdxQ-8Ab.js";import{_ as q}from"./ProblemBlackForm.vue_vue_type_script_setup_true_lang-DKeB8o1P.js";import{I as F,d as M,u as U}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const z=l=>s.get(c+"/problem-black",l),G=l=>s.post(c+"/problem-black",l),K=l=>s.put(c+"/problem-black",l),B=l=>s.delete(c+"/problem-black",l),Q=l=>{const{id:o}=l;return s.get(c+`/problem-black/${o}`)},W=(l,o)=>s.upload(c+"/problem-black/import",l,o),X=l=>s.download(c+"/problem-black/export",l),Y={class:"table-box"},re=N({name:"ProblemBlackView",__name:"index",setup(l){const o=_(),C=[{type:"selection",width:80},{prop:"problemId",label:"题目ID"},{prop:"businessId",label:"拉黑对象ID"},{prop:"businessName",label:"拉黑对象名"},{prop:"type",label:"拉黑对象类型"},{prop:"operation",label:"操作",width:250,fixed:"right"}],D=[{prop:"problemId",label:"题目ID",el:"input"},{prop:"businessId",label:"拉黑对象ID",el:"input"},{prop:"businessName",label:"拉黑对象名",el:"input"},{prop:"type",label:"拉黑对象类型",el:"select"}],w=t=>{let e=y(t);return z(e)},y=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},v=_(),x=async(t,e={},a=!0)=>{var i,m;if(!a){const k=await Q({id:e==null?void 0:e.id});e=k==null?void 0:k.data}const r={title:t,row:{...e},api:a?G:K,getTableList:(i=o.value)==null?void 0:i.getTableList};(m=v.value)==null||m.acceptParams(r)},E=async t=>{var e;await I(B,{ids:[t.id]},`删除【${t.id}】题目黑名单`),(e=o.value)==null||e.getTableList()},L=async t=>{var e,a;await I(B,{ids:t},"删除所选题目黑名单"),(e=o.value)==null||e.clearSelection(),(a=o.value)==null||a.getTableList()},g=_(),A=()=>{var e,a;const t={title:"题目黑名单",templateName:"题目黑名单",tempApi:M,importApi:W,getTableList:(e=o.value)==null?void 0:e.getTableList};(a=g.value)==null||a.acceptParams(t)},$=async()=>{var e;let t=y((e=o.value)==null?void 0:e.searchParam);U(X,"题目黑名单",t)};return(t,e)=>{const a=R("el-button"),r=S("auth");return p(),O("div",Y,[T(j,{ref_key:"proTableRef",ref:o,title:"题目黑名单",indent:20,columns:C,"search-columns":D,"request-api":w,"row-key":"id"},{tableHeader:n(i=>[d((p(),b(a,{type:"primary",icon:u(J),onClick:e[0]||(e[0]=m=>x("新增题目黑名单"))},{default:n(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[r,"problem.black.create"]]),d((p(),b(a,{type:"danger",icon:u(P),plain:"",disabled:!i.isSelected,onClick:m=>L(i.selectedListIds)},{default:n(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[r,"problem.black.remove"]]),d((p(),b(a,{type:"primary",icon:u(V),plain:"",onClick:A},{default:n(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[r,"problem.black.import"]]),d((p(),b(a,{type:"primary",icon:u(H),plain:"",onClick:$},{default:n(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[r,"problem.black.export"]])]),operation:n(({row:i})=>[d((p(),b(a,{type:"primary",link:"",icon:u(h),onClick:m=>x("编辑题目黑名单",i,!1)},{default:n(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[r,"problem.black.update"]]),d((p(),b(a,{type:"primary",link:"",icon:u(P),onClick:m=>E(i)},{default:n(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[r,"problem.black.remove"]])]),_:1},512),T(q,{ref_key:"problemBlackRef",ref:v},null,512),T(F,{ref_key:"ImportExcelRef",ref:g},null,512)])}}});export{re as default};
