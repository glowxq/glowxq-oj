import{h as d,bF as p,d as $,r as T,f as P,g as R,o as s,c as N,j as _,k as r,i as c,x as u,u as b,a_ as O,y as f,a$ as I,D as V,b0 as F,b1 as H}from"./index-DTkCE7MD.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as B}from"./useHandleData-BdxQ-8Ab.js";import{_ as h}from"./MetaTagBindForm.vue_vue_type_script_setup_true_lang-R-SjgPSO.js";import{I as j,d as q,u as U}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const Y=i=>d.get(p+"/meta-tag-bind/list",i),z=i=>d.post(p+"/meta-tag-bind/create",i),G=i=>d.put(p+"/meta-tag-bind/update",i),C=i=>d.delete(p+"/meta-tag-bind/remove",i),K=i=>d.get(p+"/meta-tag-bind/detail",i),Q=(i,n)=>d.upload(p+"/meta-tag-bind/import",i,n),W=i=>d.download(p+"/meta-tag-bind/export",i),X={class:"table-box"},oe=$({name:"MetaTagBindView",__name:"index",setup(i){const n=T(),D=[{type:"selection",width:80},{prop:"tagId",label:"标签ID"},{prop:"businessId",label:"标签绑定的业务ID"},{prop:"type",label:"绑定类型"},{prop:"operation",label:"操作",width:250,fixed:"right"}],w=[{prop:"tagId",label:"标签ID",el:"input"},{prop:"businessId",label:"标签绑定的业务ID",el:"input"},{prop:"type",label:"绑定类型",el:"select"}],E=t=>{let e=y(t);return Y(e)},y=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},v=T(),k=async(t,e={},a=!0)=>{var l,m;if(!a){const g=await K({id:e==null?void 0:e.id});e=g==null?void 0:g.data}const o={title:t,row:{...e},api:a?z:G,getTableList:(l=n.value)==null?void 0:l.getTableList};(m=v.value)==null||m.acceptParams(o)},L=async t=>{var e;await B(C,{ids:[t.id]},`删除【${t.id}】绑定标签权限`),(e=n.value)==null||e.getTableList()},M=async t=>{var e,a;await B(C,{ids:t},"删除所选绑定标签权限"),(e=n.value)==null||e.clearSelection(),(a=n.value)==null||a.getTableList()},x=T(),A=()=>{var e,a;const t={title:"绑定标签权限",templateName:"绑定标签权限",tempApi:q,importApi:Q,getTableList:(e=n.value)==null?void 0:e.getTableList};(a=x.value)==null||a.acceptParams(t)},S=async()=>{var e;let t=y((e=n.value)==null?void 0:e.searchParam);U(W,"绑定标签权限",t)};return(t,e)=>{const a=P("el-button"),o=R("auth");return s(),N("div",X,[_(J,{ref_key:"proTableRef",ref:n,title:"绑定标签权限",indent:20,columns:D,"search-columns":w,"request-api":E,"row-key":"id"},{tableHeader:r(l=>[c((s(),u(a,{type:"primary",icon:b(O),onClick:e[0]||(e[0]=m=>k("新增绑定标签权限"))},{default:r(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[o,"meta.tag.bind.create"]]),c((s(),u(a,{type:"danger",icon:b(I),plain:"",disabled:!l.isSelected,onClick:m=>M(l.selectedListIds)},{default:r(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[o,"meta.tag.bind.remove"]]),c((s(),u(a,{type:"primary",icon:b(V),plain:"",onClick:A},{default:r(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[o,"meta.tag.bind.import"]]),c((s(),u(a,{type:"primary",icon:b(F),plain:"",onClick:S},{default:r(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[o,"meta.tag.bind.export"]])]),operation:r(({row:l})=>[c((s(),u(a,{type:"primary",link:"",icon:b(H),onClick:m=>k("编辑绑定标签权限",l,!1)},{default:r(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[o,"meta.tag.bind.update"]]),c((s(),u(a,{type:"primary",link:"",icon:b(I),onClick:m=>L(l)},{default:r(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[o,"meta.tag.bind.remove"]])]),_:1},512),_(h,{ref_key:"metaTagBindRef",ref:v},null,512),_(j,{ref_key:"ImportExcelRef",ref:x},null,512)])}}});export{oe as default};
