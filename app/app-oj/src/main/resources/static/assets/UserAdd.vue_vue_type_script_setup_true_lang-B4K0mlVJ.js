import{d as z,aB as D,r as _,f as n,o as F,x as L,k as o,j as e,y as v,T as P,a as i,n as R,W as S}from"./index-DTkCE7MD.js";import{U as j}from"./Img-CbqiKKTP.js";const W=z({name:"UserAdd",__name:"UserAdd",emits:["submit"],setup(q,{expose:V,emit:c}){const x=D({username:[{required:!0,message:"用户名是必填项",trigger:"blur"},{min:3,max:32,message:"用户名长度应在3到32个字符之间",trigger:"blur"},{pattern:/^\w+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}]}),s=_(!1),a=_({title:"",row:{},api:void 0,getTableList:void 0}),y=d=>{a.value=d,s.value=!0},U=c,b=_(),g=()=>{b.value.validate(async d=>{if(d)try{await a.value.api(a.value.row),S.success({message:`${a.value.title}成功！`}),a.value.getTableList(),U("submit"),s.value=!1}catch(l){console.log(l)}})},k=d=>{console.log(d)};return V({acceptParams:y}),(d,l)=>{const C=n("el-tooltip"),M=n("el-space"),p=n("el-input"),u=n("el-form-item"),r=n("el-col"),m=n("el-row"),f=n("el-option"),A=n("el-select"),B=n("el-date-picker"),T=n("Avatar"),Y=n("el-icon"),$=n("el-form"),w=n("el-button"),N=n("el-dialog");return F(),L(N,{modelValue:s.value,"onUpdate:modelValue":l[9]||(l[9]=t=>s.value=t),title:`${a.value.title}`,"destroy-on-close":!0,width:"580px",draggable:"","append-to-body":""},{footer:o(()=>[e(w,{onClick:l[8]||(l[8]=t=>s.value=!1)},{default:o(()=>l[15]||(l[15]=[v(" 取消 ")])),_:1}),e(w,{type:"primary",onClick:g},{default:o(()=>l[16]||(l[16]=[v(" 确定 ")])),_:1})]),default:o(()=>[e($,{ref_key:"ruleFormRef",ref:b,"label-width":"80px","label-suffix":" :",rules:x,model:a.value.row,onSubmit:P(g,["prevent"]),class:"form__label"},{default:o(()=>[e(m,null,{default:o(()=>[e(r,{span:12},{default:o(()=>[e(u,{label:"账户",prop:"username"},{label:o(()=>[e(M,{size:2},{default:o(()=>[l[11]||(l[11]=i("span",null,"账户",-1)),e(C,{effect:"dark",content:"字母、数字和下划线，用于登录。",placement:"top"},{default:o(()=>l[10]||(l[10]=[i("i",{class:R("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),l[12]||(l[12]=i("span",null," :",-1))]),default:o(()=>[e(p,{modelValue:a.value.row.username,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.row.username=t),placeholder:"请填写账户",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:o(()=>[e(u,{label:"昵称",prop:"nickname"},{default:o(()=>[e(p,{modelValue:a.value.row.nickname,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.row.nickname=t),placeholder:"请填写昵称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(r,{span:12},{default:o(()=>[e(u,{label:"手机号",prop:"phone"},{default:o(()=>[e(p,{modelValue:a.value.row.phone,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.row.phone=t),placeholder:"请填写手机号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:o(()=>[e(u,{label:"邮箱",prop:"email"},{default:o(()=>[e(p,{modelValue:a.value.row.email,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.row.email=t),placeholder:"请填写邮箱地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(r,{span:12},{default:o(()=>[e(u,{label:"性别",prop:"sex"},{default:o(()=>[e(A,{modelValue:a.value.row.sex,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.row.sex=t),clearable:"",placeholder:"请选择性别"},{default:o(()=>[e(f,{label:"未知",value:0}),e(f,{label:"男",value:1}),e(f,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:o(()=>[e(u,{label:"生日",prop:"birthday"},{default:o(()=>[e(B,{modelValue:a.value.row.birthday,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.row.birthday=t),type:"date",placeholder:"选择生日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(r,{span:12},{default:o(()=>[e(u,{label:"身份证",prop:"idCard"},{default:o(()=>[e(p,{modelValue:a.value.row.idCard,"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.row.idCard=t),placeholder:"请填写身份证",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(u,{label:"头像",prop:"logo"},{default:o(()=>[e(j,{"image-url":a.value.row.logo,"onUpdate:imageUrl":l[7]||(l[7]=t=>a.value.row.logo=t),onChange:k,dir:"user",width:"135px",height:"135px","border-radius":"50%"},{empty:o(()=>[e(Y,null,{default:o(()=>[e(T)]),_:1}),l[13]||(l[13]=i("span",null,"请上传头像",-1))]),tip:o(()=>l[14]||(l[14]=[v(" 头像大小不能超过 3M ")])),_:1},8,["image-url"])]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{W as _};
