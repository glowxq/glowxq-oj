import{h as y,bF as v,d as U,r as h,f as E,g as H,o as r,c as d,j as b,k as o,i as w,x as c,u as m,a_ as J,y as f,a$ as S,D as j,b0 as q,R as _,t as D,b1 as Y,b4 as l}from"./index-DTkCE7MD.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as L}from"./useHandleData-BdxQ-8Ab.js";import{M as I,a as k,b as G}from"./MetaMenuForm-Cwjl-0bT.js";import{I as K,d as Q,u as W}from"./common-DxSkM119.js";import{E as P}from"./EnumSelect-C2fXZs6G.js";import"./sortable.esm-Cw1ESr5Y.js";import"./Img-CbqiKKTP.js";import"./upload-BtJOZC1L.js";const X=i=>y.get(v+"/meta-menu/list",i),Z=i=>y.post(v+"/meta-menu/create",i),ee=i=>y.put(v+"/meta-menu/update",i),A=i=>y.delete(v+"/meta-menu/remove",i),te=i=>y.get(v+"/meta-menu/detail",i),ae=(i,p)=>y.upload(v+"/meta-menu/import",i,p),ne=i=>y.download(v+"/meta-menu/export",i),re={class:"table-box"},ie={key:0},oe={key:1},le={key:1},pe={key:0},se={key:1},ce={key:1},_e=U({name:"MetaMenuView",__name:"index",setup(i){const p=h(),R=[{type:"selection",width:80},{prop:"name",label:"底部菜单名称"},{prop:"activeIcon",label:"选中图标",render:t=>t.row.iconType==="Image"?t.row.activeIcon?l("el-image",{src:t.row.activeIcon,style:{width:"40px",height:"40px"},previewSrcList:[t.row.activeIcon]}):l("span","-"):l("span",t.row.activeIcon)},{prop:"inactiveIcon",label:"未选中图标",render:t=>t.row.iconType==="Image"?t.row.inactiveIcon?l("el-image",{src:t.row.inactiveIcon,style:{width:"40px",height:"40px"},previewSrcList:[t.row.inactiveIcon]}):l("span","-"):l("span",t.row.inactiveIcon)},{prop:"iconType",label:"图标类型",render:t=>l(_,{enum:I,code:t.row.iconType||""})},{prop:"type",label:"菜单类型",render:t=>l(_,{enum:k,code:t.row.type||""})},{prop:"path",label:"菜单路径"},{prop:"enable",label:"状态"},{prop:"remark",label:"备注"},{prop:"operation",label:"操作",width:250,fixed:"right"}],V=[{prop:"name",label:"底部菜单名称",el:"input"},{prop:"iconType",label:"图标类型",render:t=>l(P,{type:"select",enumData:I,modelValue:t.searchParam.iconType,"onUpdate:modelValue":e=>{t.searchParam.iconType=e}})},{prop:"type",label:"菜单类型",render:t=>l(P,{type:"select",enumData:k,modelValue:t.searchParam.type,"onUpdate:modelValue":e=>{t.searchParam.type=e}})},{prop:"path",label:"菜单路径",el:"input"},{prop:"enable",label:"状态",el:"switch"},{prop:"sort",label:"排序",el:"switch"},{prop:"hasChildren",label:"是否有子级",el:"switch"},{prop:"lock",label:"是否锁定",el:"switch"}],$=t=>{let e=g(t);return X(e)},g=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},M=h(),x=async(t,e={},n=!0)=>{var s,a;if(!n){const u=await te({id:e==null?void 0:e.id});e=u==null?void 0:u.data}const T={title:t,row:{...e},api:n?Z:ee,getTableList:(s=p.value)==null?void 0:s.getTableList};(a=M.value)==null||a.acceptParams(T)},N=async t=>{var e;await L(A,{ids:[t.id]},`删除【${t.id}】菜单`),(e=p.value)==null||e.getTableList()},B=async t=>{var e,n;await L(A,{ids:t},"删除所选菜单"),(e=p.value)==null||e.clearSelection(),(n=p.value)==null||n.getTableList()},C=h(),F=()=>{var e,n;const t={title:"菜单",templateName:"菜单",tempApi:Q,importApi:ae,getTableList:(e=p.value)==null?void 0:e.getTableList};(n=C.value)==null||n.acceptParams(t)},O=async()=>{var e;let t=g((e=p.value)==null?void 0:e.searchParam);W(ne,"菜单",t)};return(t,e)=>{const n=E("el-button"),T=E("el-image"),s=H("auth");return r(),d("div",re,[b(z,{ref_key:"proTableRef",ref:p,title:"菜单",indent:20,columns:R,"search-columns":V,"request-api":$,"row-key":"id"},{tableHeader:o(a=>[w((r(),c(n,{type:"primary",icon:m(J),onClick:e[0]||(e[0]=u=>x("新增菜单"))},{default:o(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[s,"meta.menu.create"]]),w((r(),c(n,{type:"danger",icon:m(S),plain:"",disabled:!a.isSelected,onClick:u=>B(a.selectedListIds)},{default:o(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[s,"meta.menu.remove"]]),w((r(),c(n,{type:"primary",icon:m(j),plain:"",onClick:F},{default:o(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[s,"meta.menu.import"]]),w((r(),c(n,{type:"primary",icon:m(q),plain:"",onClick:O},{default:o(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[s,"meta.menu.export"]])]),iconType:o(a=>[b(_,{enum:m(I),code:a.row.iconType},null,8,["enum","code"])]),type:o(a=>[b(_,{enum:m(k),code:a.row.type},null,8,["enum","code"])]),activeIcon:o(a=>[a.row.iconType==="Image"?(r(),d("div",ie,[a.row.activeIcon?(r(),c(T,{key:0,src:a.row.activeIcon,style:{width:"40px",height:"40px"},"preview-src-list":[a.row.activeIcon]},null,8,["src","preview-src-list"])):(r(),d("span",oe,"-"))])):(r(),d("span",le,D(a.row.activeIcon),1))]),inactiveIcon:o(a=>[a.row.iconType==="Image"?(r(),d("div",pe,[a.row.inactiveIcon?(r(),c(T,{key:0,src:a.row.inactiveIcon,style:{width:"40px",height:"40px"},"preview-src-list":[a.row.inactiveIcon]},null,8,["src","preview-src-list"])):(r(),d("span",se,"-"))])):(r(),d("span",ce,D(a.row.inactiveIcon),1))]),operation:o(({row:a})=>[w((r(),c(n,{type:"primary",link:"",icon:m(Y),onClick:u=>x("编辑菜单",a,!1)},{default:o(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[s,"meta.menu.update"]]),w((r(),c(n,{type:"primary",link:"",icon:m(S),onClick:u=>N(a)},{default:o(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[s,"meta.menu.remove"]])]),_:1},512),b(G,{ref_key:"metaMenuRef",ref:M},null,512),b(K,{ref_key:"ImportExcelRef",ref:C},null,512)])}}});export{_e as default};
