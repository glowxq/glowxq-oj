import{d as I,b as v,f as g,o as u,x as P,k as l,a as t,j as n,y as _,n as L,t as m,u as c,F as U,c as f,bw as W,bx as Y,m as $,S as q,P as A,aL as G,by as J,bz as K,W as T,_ as O}from"./index-DTkCE7MD.js";import{M as Q}from"./style-DrPmFrlE.js";const R={class:"course-detail-container"},X={class:"course-header"},Z={class:"course-status"},x={class:"course-info-section"},ee={class:"info-row"},te={class:"info-icon-wrapper teacher-icon"},se={class:"info-content"},oe={class:"info-value"},ne={key:0,class:"info-row"},ae={class:"info-icon-wrapper phone-icon"},ie={class:"info-content"},re={class:"info-value"},le={class:"info-row"},ce={class:"info-icon-wrapper time-icon"},de={class:"info-content"},ue={class:"info-value time-value"},me={class:"time-item"},_e={class:"time-text"},fe={class:"time-item"},pe={class:"time-text"},ve={key:1,class:"no-time"},ge={key:1,class:"info-row"},Te={class:"info-icon-wrapper link-icon"},he={class:"info-content"},we={class:"info-value"},be=["href"],ke={class:"course-content-section"},ye={class:"section-title"},De={class:"markdown-content"},Ce={key:1,class:"no-content"},Ve={class:"dialog-footer"},Se=I({__name:"CourseDetailModal",props:{modelValue:{type:Boolean},course:{}},emits:["update:modelValue","start-course"],setup(N,{emit:B}){const o=N,k=B,h=v({get:()=>o.modelValue,set:s=>k("update:modelValue",s)}),z=v(()=>{var i,r;if(!((i=o.course)!=null&&i.startTime)||!((r=o.course)!=null&&r.endTime))return"status-unknown";const s=new Date().getTime(),e=new Date(o.course.startTime).getTime(),a=new Date(o.course.endTime).getTime();return s<e?"status-upcoming":s>a?"status-ended":"status-ongoing"}),F=v(()=>{var i,r;if(!((i=o.course)!=null&&i.startTime)||!((r=o.course)!=null&&r.endTime))return"未设置时间";const s=new Date().getTime(),e=new Date(o.course.startTime).getTime(),a=new Date(o.course.endTime).getTime();return s<e?"即将开始":s>a?"已结束":"进行中"}),E=v(()=>{var i,r;if(!((i=o.course)!=null&&i.startTime)||!((r=o.course)!=null&&r.endTime))return!1;const s=new Date().getTime(),e=new Date(o.course.startTime).getTime(),a=new Date(o.course.endTime).getTime();return s>=e-30*60*1e3&&s<=a}),y=s=>{if(!s)return"";const e=new Date(s),a=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),w=e.getHours().toString().padStart(2,"0"),p=e.getMinutes().toString().padStart(2,"0");return`${a}年${i}月${r}日 ${w}:${p}`},j=()=>{var s;(s=o.course)!=null&&s.teacherPhone&&navigator.clipboard.writeText(o.course.teacherPhone).then(()=>{T.success("电话号码已复制到剪贴板")}).catch(()=>{T.error("复制失败，请手动复制")})},H=()=>{var s;if(!((s=o.course)!=null&&s.url)){T.warning("该课程没有设置课程链接，无法开始上课");return}window.open(o.course.url,"_blank"),T.success(`已开始【${o.course.name}】课程`),k("start-course")};return(s,e)=>{var p;const a=g("el-icon"),i=g("el-button"),r=g("el-empty"),w=g("el-dialog");return u(),P(w,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=d=>h.value=d),title:((p=s.course)==null?void 0:p.name)||"课程详情","destroy-on-close":!0,width:"780px",class:"course-detail-dialog",draggable:""},{footer:l(()=>{var d;return[t("div",Ve,[n(i,{onClick:e[0]||(e[0]=b=>h.value=!1)},{default:l(()=>e[10]||(e[10]=[_("关闭")])),_:1}),n(i,{type:"primary",onClick:H,disabled:!E.value||!((d=s.course)!=null&&d.url)},{default:l(()=>e[11]||(e[11]=[_(" 立即上课 ")])),_:1},8,["disabled"])])]}),default:l(()=>{var d,b,D,C,V,S,M;return[t("div",R,[t("div",X,[t("div",Z,[t("div",{class:L(["status-badge",z.value])},m(F.value),3)])]),t("div",x,[t("div",ee,[t("div",te,[n(a,null,{default:l(()=>[n(c(U))]),_:1})]),t("div",se,[e[2]||(e[2]=t("div",{class:"info-label"},"授课老师",-1)),t("div",oe,m(((d=s.course)==null?void 0:d.teacherName)||"暂无"),1)])]),(b=s.course)!=null&&b.teacherPhone?(u(),f("div",ne,[t("div",ae,[n(a,null,{default:l(()=>[n(c(W))]),_:1})]),t("div",ie,[e[4]||(e[4]=t("div",{class:"info-label"},"联系方式",-1)),t("div",re,[_(m((D=s.course)==null?void 0:D.teacherPhone)+" ",1),n(i,{link:"",type:"primary",size:"small",onClick:j,class:"copy-btn"},{default:l(()=>[n(a,null,{default:l(()=>[n(c(Y))]),_:1}),e[3]||(e[3]=_(" 复制 "))]),_:1})])])])):$("",!0),t("div",le,[t("div",ce,[n(a,null,{default:l(()=>[n(c(q))]),_:1})]),t("div",de,[e[7]||(e[7]=t("div",{class:"info-label"},"课程时间",-1)),t("div",ue,[(C=s.course)!=null&&C.startTime&&((V=s.course)!=null&&V.endTime)?(u(),f(A,{key:0},[t("div",me,[e[5]||(e[5]=t("span",{class:"time-label"},"开始：",-1)),t("span",_e,m(y(s.course.startTime)),1)]),t("div",fe,[e[6]||(e[6]=t("span",{class:"time-label"},"结束：",-1)),t("span",pe,m(y(s.course.endTime)),1)])],64)):(u(),f("div",ve,"未设置课程时间"))])])]),(S=s.course)!=null&&S.url?(u(),f("div",ge,[t("div",Te,[n(a,null,{default:l(()=>[n(c(G))]),_:1})]),t("div",he,[e[8]||(e[8]=t("div",{class:"info-label"},"课程链接",-1)),t("div",we,[t("a",{href:s.course.url,target:"_blank",rel:"noopener noreferrer",class:"course-link"},[_(m(s.course.url)+" ",1),n(a,{class:"external-icon"},{default:l(()=>[n(c(J))]),_:1})],8,be)])])])):$("",!0)]),t("div",ke,[t("div",ye,[n(a,null,{default:l(()=>[n(c(K))]),_:1}),e[9]||(e[9]=t("span",null,"课程内容",-1))]),t("div",De,[(M=s.course)!=null&&M.content?(u(),P(c(Q),{key:0,modelValue:s.course.content},null,8,["modelValue"])):(u(),f("div",Ce,[n(r,{description:"暂无课程内容","image-size":100})]))])])])]}),_:1},8,["modelValue","title"])}}}),$e=O(Se,[["__scopeId","data-v-a72d946a"]]);export{$e as default};
