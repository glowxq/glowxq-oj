import{d as B,b as U,f as h,o as s,c as p,m as I,P as H,Q,n as q,a as i,t as c,x as k,k as a,y as v,u as T,bA as L,j as o,B as W,_ as K,q as le,aL as ie,r as E,R as z,bB as ue,bC as de,aB as ce,V as pe,W as X,g as me,i as R,a_ as _e,a$ as Y,D as fe,b0 as ve,b2 as Z,b4 as r,bD as ge,bE as ye}from"./index-DTkCE7MD.js";import{_ as be}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as ee}from"./useHandleData-BdxQ-8Ab.js";import{I as he,d as we,u as ke}from"./common-DxSkM119.js";import{E as F}from"./EnumSelect-C2fXZs6G.js";import{B as te}from"./BlockButtonSwitch-BHBfrEBU.js";import{J as se}from"./JudgeStatus-By11LX14.js";import{J as ae}from"./JudgeSceneType-G292ww_A.js";import{P as G}from"./ProblemType-TBlMUhPx.js";import{J as A}from"./JudgeStatusShow-BtDm6N5o.js";import{P as Te}from"./ProgramType-C5wHKcT4.js";import{_ as De}from"./JudgeForm.vue_vue_type_script_setup_true_lang-CQiour-E.js";import{m as $e,g as Se,c as xe,r as oe,a as Ce,i as je,e as Ie}from"./judge-CnKkIsdI.js";import"./sortable.esm-Cw1ESr5Y.js";const Pe={key:0,class:"no-answer"},Ve={key:1,class:"options-direct-wrapper"},Ee={key:0,class:"empty-data"},Je={class:"option-header"},Ne={class:"option-key"},Oe={class:"option-key-text"},Re={key:0,class:"selected-icon"},Ae={class:"option-content"},Le=B({__name:"JudgeReplyOptionsShowDirect",props:{replyOptions:{}},setup(J){const D=J,j=m=>{if(!m)return[];try{const g=typeof m=="string"?JSON.parse(m):m;return Array.isArray(g)?g:g&&typeof g=="object"?[g]:[]}catch(g){return console.error("解析作答内容失败",g),[]}},l=U(()=>j(D.replyOptions));return(m,g)=>{const b=h("el-icon");return s(),p("div",null,[m.replyOptions?(s(),p("div",Ve,[l.value.length===0?(s(),p("div",Ee,"无作答数据")):I("",!0),(s(!0),p(H,null,Q(l.value,(f,$)=>(s(),p("div",{key:$,class:q(["option-item",{"selected-option":f.answer}])},[i("div",Je,[i("div",Ne,[i("span",Oe,"选项: "+c(f.optionKey||"-"),1),f.answer?(s(),k(T(L),{key:0,type:"success",size:"small",class:"answer-tag"},{default:a(()=>g[0]||(g[0]=[v("已选")])),_:1})):I("",!0)]),f.answer?(s(),p("div",Re,[o(b,{size:14},{default:a(()=>[o(T(W))]),_:1})])):I("",!0)]),i("div",Ae,c(f.optionContent||"-"),1)],2))),128))])):(s(),p("span",Pe,"无作答"))])}}}),Be=K(Le,[["__scopeId","data-v-e54751f0"]]),Ke=["title"],Me={class:"goto-link"},Ue={class:"problem-id-number"},qe={class:"goto-text"},ze={key:1},Fe=B({__name:"ProblemIdGoTo",props:{problemId:{},buttonText:{},title:{}},setup(J){const D=J,j=le(),l=()=>{D.problemId&&j.push(`/oj/problem/submit/${D.problemId}`)};return(m,g)=>{const b=h("el-icon");return m.problemId?(s(),p("div",{key:0,class:"problem-id-goto",onClick:l,title:m.title||"点击跳转到做题页面"},[i("div",Me,[o(b,{class:"link-icon"},{default:a(()=>[o(T(ie))]),_:1}),i("span",Ue,c(m.problemId),1),i("span",qe,c(m.buttonText||"前往做题"),1)])],8,Ke)):(s(),p("span",ze,"-"))}}}),re=K(Fe,[["__scopeId","data-v-9cb3fecb"]]),Ge={key:0,class:"judge-detail-container"},He={class:"base-info-section"},Qe={class:"key-info non-functional-key"},We={class:"key-info non-functional-key"},Xe={class:"key-info non-functional-key"},Ye={key:0,class:"program-type-tag"},Ze={key:0,class:"error-message-section"},et={class:"error-content"},tt={key:1,class:"code-section"},at={key:2,class:"reply-section"},ot={class:"reply-content"},lt={key:3,class:"cases-section"},st={class:"section-title"},rt={class:"case-data-content"},nt={key:1},it={class:"case-data-content"},ut={key:1},dt={class:"case-data-content"},ct={key:1},pt={class:"case-data-content"},mt={key:1},_t={class:"case-data-content"},ft={key:1},vt={key:4,class:"flow-image-section"},gt={class:"image-preview"},yt=B({__name:"JudgeDetailDialog",setup(J,{expose:D}){le();const j=E(!1),l=E(),m=U(()=>!l.value||!l.value.problemType?!1:l.value.problemType==="Programmer"),g=u=>{l.value=u,j.value=!0,console.log("测评详情数据:",u)},b=()=>{j.value=!1},f=u=>{if(!u)return"-";try{return new Date(u).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return u}},$=u=>{if(u==null)return"";let n=Number(u);return isNaN(n)&&(n=0),n>=80?"high-score":n>=60?"medium-score":"low-score"};return D({openDialog:g}),(u,n)=>{const w=h("el-descriptions-item"),N=h("el-descriptions"),M=h("el-alert"),S=h("el-table-column"),x=h("el-button"),_=h("el-popover"),P=h("el-table"),t=h("el-dialog");return s(),k(t,{modelValue:j.value,"onUpdate:modelValue":n[0]||(n[0]=e=>j.value=e),title:"测评详情",width:"800px","destroy-on-close":"",draggable:"","append-to-body":""},{footer:a(()=>[o(x,{onClick:b},{default:a(()=>n[9]||(n[9]=[v("关闭")])),_:1})]),default:a(()=>[l.value?(s(),p("div",Ge,[i("div",He,[o(N,{column:2,border:""},{default:a(()=>[o(w,{label:"测评ID"},{default:a(()=>[i("div",Qe,c(l.value.id),1)]),_:1}),o(w,{label:"测评Key"},{default:a(()=>[i("div",We,c(l.value.judgeKey),1)]),_:1}),o(w,{label:"题目ID"},{default:a(()=>[o(re,{"problem-id":l.value.problemId,"button-text":"前往做题"},null,8,["problem-id"])]),_:1}),o(w,{label:"题目Key"},{default:a(()=>[i("div",Xe,c(l.value.problemKey),1)]),_:1}),o(w,{label:"状态"},{default:a(()=>[o(A,{code:Number(l.value.status)},null,8,["code"])]),_:1}),o(w,{label:"题目类型"},{default:a(()=>[o(z,{enum:T(G),code:l.value.problemType||""},null,8,["enum","code"]),m.value&&l.value.programType!==void 0?(s(),p("span",Ye,[o(z,{enum:T(Te),code:l.value.programType},null,8,["enum","code"])])):I("",!0)]),_:1}),o(w,{label:"提交时间"},{default:a(()=>[v(c(f(l.value.submitTime)),1)]),_:1}),o(w,{label:"分数"},{default:a(()=>[i("span",{class:q($(l.value.score))},c(l.value.score||0),3)]),_:1}),o(w,{label:"运行时间"},{default:a(()=>[v(c(l.value.time||0)+" ms",1)]),_:1}),o(w,{label:"内存"},{default:a(()=>[v(c(l.value.memory||0)+" KB",1)]),_:1}),o(w,{label:"人工评测"},{default:a(()=>[o(T(L),{type:l.value.manualEvaluation?"success":"info"},{default:a(()=>[v(c(l.value.manualEvaluation?"是":"否"),1)]),_:1},8,["type"])]),_:1}),o(w,{label:"语言"},{default:a(()=>[v(c(l.value.language||"-"),1)]),_:1})]),_:1})]),l.value.errorMessage?(s(),p("div",Ze,[o(M,{title:"错误信息",type:"error",closable:!1,"show-icon":""},{default:a(()=>[i("div",et,c(l.value.errorMessage),1)]),_:1})])):I("",!0),m.value&&l.value.code?(s(),p("div",tt,[n[1]||(n[1]=i("h3",{class:"section-title"},"代码",-1)),o(ue,{"model-value":l.value.code,"read-only-prop":!0,language:l.value.language||"javascript",style:{height:"300px","margin-top":"10px"}},null,8,["model-value","language"])])):I("",!0),!m.value&&l.value.replyOptions?(s(),p("div",at,[n[2]||(n[2]=i("h3",{class:"section-title"},"作答内容",-1)),i("div",ot,[o(Be,{"reply-options":l.value.replyOptions},null,8,["reply-options"])])])):I("",!0),l.value.judgeCaseList&&l.value.judgeCaseList.length>0?(s(),p("div",lt,[i("h3",st,"测评用例 ("+c(l.value.judgeCaseList.length)+")",1),m.value?(s(),k(P,{key:0,data:l.value.judgeCaseList,border:"",stripe:"",style:{width:"100%"},size:"small"},{default:a(()=>[o(S,{prop:"seq",label:"序号",width:"60"}),o(S,{prop:"status",label:"状态",width:"200"},{default:a(e=>[o(A,{code:Number(e.row.status)},null,8,["code"])]),_:1}),o(S,{prop:"time",label:"时间",width:"80"},{default:a(e=>[v(c(e.row.time||0)+" ms ",1)]),_:1}),o(S,{prop:"memory",label:"内存",width:"80"},{default:a(e=>[v(c(e.row.memory||0)+" KB ",1)]),_:1}),o(S,{prop:"score",label:"分数",width:"70"},{default:a(e=>[i("span",{class:q($(e.row.score))},c(e.row.score||0),3)]),_:1}),o(S,{label:"输入数据"},{default:a(e=>[e.row.inputData?(s(),k(_,{key:0,placement:"top",width:"300",trigger:"click"},{reference:a(()=>[o(x,{type:"primary",link:""},{default:a(()=>n[3]||(n[3]=[v("查看输入")])),_:1})]),default:a(()=>[i("div",rt,c(e.row.inputData),1)]),_:2},1024)):(s(),p("span",nt,"-"))]),_:1}),o(S,{label:"期望输出"},{default:a(e=>[e.row.outputData?(s(),k(_,{key:0,placement:"top",width:"300",trigger:"click"},{reference:a(()=>[o(x,{type:"primary",link:""},{default:a(()=>n[4]||(n[4]=[v("查看输出")])),_:1})]),default:a(()=>[i("div",it,c(e.row.outputData),1)]),_:2},1024)):(s(),p("span",ut,"-"))]),_:1}),o(S,{label:"实际输出"},{default:a(e=>[e.row.userOutput?(s(),k(_,{key:0,placement:"top",width:"300",trigger:"click"},{reference:a(()=>[o(x,{type:"primary",link:""},{default:a(()=>n[5]||(n[5]=[v("查看输出")])),_:1})]),default:a(()=>[i("div",dt,c(e.row.userOutput),1)]),_:2},1024)):(s(),p("span",ct,"-"))]),_:1})]),_:1},8,["data"])):(s(),k(P,{key:1,data:l.value.judgeCaseList,border:"",stripe:"",style:{width:"100%"},size:"small"},{default:a(()=>[o(S,{prop:"seq",label:"序号",width:"60"}),o(S,{prop:"status",label:"状态",width:"100"},{default:a(e=>[o(A,{code:Number(e.row.status)},null,8,["code"])]),_:1}),o(S,{prop:"score",label:"分数",width:"70"},{default:a(e=>[i("span",{class:q($(e.row.score))},c(e.row.score||0),3)]),_:1}),o(S,{label:"说明"},{default:a(e=>[e.row.outputData?(s(),k(_,{key:0,placement:"top",width:"300",trigger:"click"},{reference:a(()=>[o(x,{type:"primary",link:""},{default:a(()=>n[6]||(n[6]=[v("查看详情")])),_:1})]),default:a(()=>[i("div",pt,c(e.row.outputData),1)]),_:2},1024)):(s(),p("span",mt,"-"))]),_:1}),o(S,{label:"用户作答"},{default:a(e=>[e.row.userOutput?(s(),k(_,{key:0,placement:"top",width:"300",trigger:"click"},{reference:a(()=>[o(x,{type:"primary",link:""},{default:a(()=>n[7]||(n[7]=[v("查看作答")])),_:1})]),default:a(()=>[i("div",_t,c(e.row.userOutput),1)]),_:2},1024)):(s(),p("span",ft,"-"))]),_:1})]),_:1},8,["data"]))])):I("",!0),l.value.flowImage?(s(),p("div",vt,[n[8]||(n[8]=i("h3",{class:"section-title"},"流程图",-1)),i("div",gt,[o(T(de),{src:l.value.flowImage,"preview-src-list":[l.value.flowImage],fit:"contain",style:{"max-height":"300px",width:"100%"}},null,8,["src","preview-src-list"])])])):I("",!0)])):I("",!0)]),_:1},8,["modelValue"])}}}),bt=K(yt,[["__scopeId","data-v-3c0a76f8"]]),ht={key:0,class:"no-answer"},wt={key:1,class:"json-preview-wrapper"},kt={class:"json-preview"},Tt={class:"option-content-wrapper"},Dt={key:0,class:"empty-data"},$t={class:"option-header"},St={class:"option-key"},xt={class:"option-key-text"},Ct={key:0,class:"selected-icon"},jt={class:"option-content"},It=B({__name:"JudgeReplyOptionsShow",props:{replyOptions:{}},setup(J){const D=J,j=b=>{if(!b)return[];try{const f=typeof b=="string"?JSON.parse(b):b;return Array.isArray(f)?f:f&&typeof f=="object"?[f]:[]}catch(f){return console.error("解析作答内容失败",f),[]}},l=U(()=>j(D.replyOptions)),m=U(()=>l.value.filter(b=>b.answer).length),g=U(()=>l.value.length);return(b,f)=>{const $=h("el-icon"),u=h("el-popover");return s(),p("div",null,[b.replyOptions?(s(),p("div",wt,[o(u,{width:350,trigger:"hover","popper-class":"json-content-popover"},{reference:a(()=>[i("div",kt,[o(T(L),{type:m.value>0?"success":"info",class:"json-tag",effect:"light"},{default:a(()=>[v(c(m.value>0?`已选 ${m.value}/${g.value}`:"查看作答内容"),1)]),_:1},8,["type"])])]),default:a(()=>[i("div",Tt,[l.value.length===0?(s(),p("div",Dt,"无作答数据")):I("",!0),(s(!0),p(H,null,Q(l.value,(n,w)=>(s(),p("div",{key:w,class:q(["option-item",{"selected-option":n.answer}])},[i("div",$t,[i("div",St,[i("span",xt,"选项: "+c(n.optionKey||"-"),1),n.answer?(s(),k(T(L),{key:0,type:"success",size:"small",class:"answer-tag"},{default:a(()=>f[0]||(f[0]=[v("已选")])),_:1})):I("",!0)]),n.answer?(s(),p("div",Ct,[o($,{size:14},{default:a(()=>[o(T(W))]),_:1})])):I("",!0)]),i("div",jt,c(n.optionContent||"-"),1)],2))),128))])]),_:1})])):(s(),p("span",ht,"无作答"))])}}}),Pt=K(It,[["__scopeId","data-v-72c0fc16"]]),Vt=B({name:"ManualEvaluationDialog",__name:"ManualEvaluationDialog",props:{onSuccess:{}},emits:["success","close"],setup(J,{expose:D,emit:j}){const l=J,m=j,g=E(!1),b=E(!1),f=E(),$=E(null),u=ce({id:"",judgeStatus:0,score:100}),n={judgeStatus:[{required:!0,message:"请选择评测状态",trigger:"change"}],score:[{required:!0,message:"请输入分数",trigger:"blur"},{type:"number",min:0,max:100,message:"分数必须在0-100之间",trigger:"blur"}]},w=x=>{$.value=x,u.id=x.id,u.judgeStatus=Number(x.status)||0,u.score=x.score||100,g.value=!0,pe(()=>{var _;(_=f.value)==null||_.clearValidate()})},N=()=>{g.value=!1,$.value=null,m("close")},M=()=>{N()},S=async()=>{var x;if(f.value)try{await f.value.validate(),b.value=!0,await $e({id:u.id,judgeStatus:u.judgeStatus,score:u.score}),X.success("人工测评提交成功");const _={...$.value,status:u.judgeStatus,score:u.score,manualEvaluation:!0};m("success",_),(x=l.onSuccess)==null||x.call(l,_),N()}catch(_){console.error("人工测评提交失败",_),X.error("人工测评提交失败")}finally{b.value=!1}};return D({openDialog:w}),(x,_)=>{const P=h("el-form-item"),t=h("el-option"),e=h("el-select"),d=h("el-input-number"),C=h("el-form"),V=h("el-button"),O=h("el-dialog");return s(),k(O,{modelValue:g.value,"onUpdate:modelValue":_[2]||(_[2]=y=>g.value=y),"destroy-on-close":"",title:"人工测评",width:"500px",onClose:N},{footer:a(()=>[o(V,{onClick:M},{default:a(()=>_[3]||(_[3]=[v("取消")])),_:1}),o(V,{type:"primary",loading:b.value,onClick:S},{default:a(()=>_[4]||(_[4]=[v("确认提交")])),_:1},8,["loading"])]),default:a(()=>[o(C,{ref_key:"formRef",ref:f,model:u,rules:n,"label-position":"right","label-width":"120px"},{default:a(()=>[o(P,{label:"测评ID"},{default:a(()=>{var y;return[i("span",null,c((y=$.value)==null?void 0:y.id),1)]}),_:1}),o(P,{label:"题目ID"},{default:a(()=>{var y;return[i("span",null,c((y=$.value)==null?void 0:y.problemId),1)]}),_:1}),o(P,{label:"题目标题"},{default:a(()=>{var y;return[i("span",null,c(((y=$.value)==null?void 0:y.problemTitle)||"未知题目"),1)]}),_:1}),o(P,{label:"当前状态"},{default:a(()=>{var y;return[o(A,{code:Number((y=$.value)==null?void 0:y.status)},null,8,["code"])]}),_:1}),o(P,{label:"评测状态",prop:"judgeStatus",required:""},{default:a(()=>[o(e,{modelValue:u.judgeStatus,"onUpdate:modelValue":_[0]||(_[0]=y=>u.judgeStatus=y),placeholder:"请选择评测状态",style:{width:"100%"}},{default:a(()=>[(s(!0),p(H,null,Q(T(se),(y,ne)=>(s(),k(t,{key:ne,label:y.text,value:y.code},{default:a(()=>[o(A,{code:y.code},null,8,["code"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(P,{label:"分数",prop:"score",required:""},{default:a(()=>[o(d,{modelValue:u.score,"onUpdate:modelValue":_[1]||(_[1]=y=>u.score=y),max:100,min:0,style:{width:"100%"},placeholder:"请输入分数"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Et=K(Vt,[["__scopeId","data-v-6f59b70a"]]),Jt={class:"judge-container"},Nt={class:"table-header-buttons"},Ot=B({name:"JudgeView",__name:"index",setup(J){const D=E(),j=E(),l=E(),m=E(),g=E(),b=[{type:"selection",width:50},{prop:"id",label:"ID",width:70,render:t=>r("div",{class:"key-value non-functional-key"},t.row.id)},{prop:"problemId",label:"题目ID",width:140,render:t=>r(re,{problemId:t.row.problemId})},{prop:"problemKey",label:"题目Key",width:120,render:t=>r("div",{class:"key-value non-functional-key"},t.row.problemKey)},{prop:"problemTitle",label:"题目标题",width:250,render:t=>r("div",{class:"key-value non-functional-key"},t.row.problemTitle)},{prop:"status",label:"状态",width:200,render:t=>r("div",{class:"enum-container"},[r(A,{code:Number(t.row.status),class:"status-tag"})])},{prop:"code",label:"代码",width:100,render:t=>t.row.code?r(ge,{code:t.row.code,language:t.row.language||"javascript"}):r("span",{class:"no-code"},"无代码")},{prop:"errorMessage",label:"错误提醒",width:180,showOverflowTooltip:!0,render:t=>t.row.errorMessage?r("div",{class:"error-message-container"},[r(ye,{width:400,trigger:"hover",popperClass:"error-message-popover"},{reference:()=>r("div",{class:"error-summary"},[r("i",{class:"error-icon el-icon-error"}),r("span",{class:"error-text"},t.row.errorMessage.slice(0,20)+(t.row.errorMessage.length>20?"...":""))]),default:()=>r("div",{class:"error-message-content"},t.row.errorMessage)})]):r("span",{class:"no-error"},"无错误")},{prop:"problemType",label:"题目类型",width:100,render:t=>r("div",{class:"enum-container"},[r(z,{enum:G,code:t.row.problemType||"",class:"problem-type-enum enhanced-type-tag"})])},{prop:"submitTime",label:"提交时间",width:120,isShow:!1,render:t=>{if(!t.row.submitTime)return"-";try{const e=new Date(t.row.submitTime),d=(e.getMonth()+1).toString().padStart(2,"0"),C=e.getDate().toString().padStart(2,"0"),V=e.getHours().toString().padStart(2,"0"),O=e.getMinutes().toString().padStart(2,"0");return r("div",{class:"time-display-wrapper"},[r("span",{class:"time-display"},`${d}-${C} ${V}:${O}`)])}catch{return t.row.submitTime}}},{prop:"time",label:"运行时间",width:80,isShow:!1,render:t=>{if(!t.row.time&&t.row.time!==0)return"-";let e=t.row.time;return r("div",{class:"metric-display"},[r("span",{class:"metric-value"},e),r("span",{class:"metric-unit"},"ms")])}},{prop:"memory",label:"内存",width:80,isShow:!1,render:t=>{if(!t.row.memory&&t.row.memory!==0)return"-";let e=t.row.memory;return r("div",{class:"metric-display"},[r("span",{class:"metric-value"},e),r("span",{class:"metric-unit"},"KB")])}},{prop:"sceneType",label:"测评场景",width:100,render:t=>r("div",{class:"enum-container"},[r(z,{enum:ae,code:t.row.sceneType,class:"judge-scene-enum"})])},{prop:"score",label:"分数",width:80,isShow:!0,render:t=>{if(t.row.score===void 0||t.row.score===null)return"-";let e=Number(t.row.score);isNaN(e)&&(e=0);let d="";return e>=80?d="high-score":e>=60?d="medium-score":d="low-score",r("div",{class:"score-display"},[r("span",{class:`score-value ${d}`},t.row.score)])}},{prop:"flowImage",label:"流程图",width:80,render:t=>t.row.flowImage?r("div",{class:"image-container"},[r("a",{href:t.row.flowImage,target:"_blank",class:"flow-image-link"},[r(L,{type:"info",class:"flow-image-tag",effect:"plain"},["查看图片",r(Z,{class:"view-icon",style:"margin-left: 5px;"})])])]):"无图片"},{prop:"replyOptions",label:"客观题",width:120,render:t=>t.row.replyOptions?r(Pt,{replyOptions:t.row.replyOptions}):r("span",{class:"no-answer"},"无作答")},{prop:"language",label:"语言",width:80},{prop:"manualEvaluation",label:"人工评测",width:100,render:t=>{const e=t.row.manualEvaluation;return r(L,{type:e?"success":"info",effect:"light",class:"manual-tag"},()=>e?"人工评测":"自动评测")}},{prop:"operation",label:"操作",fixed:"right",width:300}],f=[{prop:"status",label:"状态",render:t=>r(F,{enumData:se,type:"select",modelValue:typeof t.searchParam.status=="number"?t.searchParam.status:void 0,placeholder:"评测状态",clearable:!0,"onUpdate:modelValue":e=>{t.searchParam.status=e}})},{prop:"problemType",label:"题型",render:t=>r(F,{enumData:G,type:"select",modelValue:t.searchParam.problemType||"",placeholder:"题目类型",clearable:!0,"onUpdate:modelValue":e=>{t.searchParam.problemType=e}})},{prop:"switchGroup",label:"筛选",render:t=>r("div",{class:"filter-button-group"},[r(te,{modelValue:!!t.searchParam.manualEvaluation,text:"人工测评",inactiveText:"筛选人工测评","onUpdate:modelValue":e=>{t.searchParam.manualEvaluation=e}}),r(te,{modelValue:!!t.searchParam.myJudge,text:"我的测评",inactiveText:"筛选我的测评","onUpdate:modelValue":e=>{t.searchParam.myJudge=e}})])},{prop:"problemId",label:"题目ID",el:"input",props:{placeholder:"题目ID"}},{prop:"problemKey",label:"题目Key",el:"input",props:{placeholder:"题目Key"}},{prop:"problemTitle",label:"题目标题",el:"input",props:{placeholder:"题目标题"}},{prop:"sceneType",label:"类型",render:t=>r(F,{enumData:ae,type:"select",modelValue:t.searchParam.sceneType||"",placeholder:"测评类型",clearable:!0,"onUpdate:modelValue":e=>{t.searchParam.sceneType=e,t.searchParam.businessId=void 0}})}],$=t=>{const e=u(t);return Se(e)},u=t=>{let e=JSON.parse(JSON.stringify(t));return["submitTime","startTime","endTime","createTime","updateTime"].forEach(C=>{e[C]&&(e[`${C}Start`]=e[C][0],e[`${C}End`]=e[C][1],delete e[C])}),e},n=()=>{var t;(t=D.value)==null||t.getTableList()},w=()=>{var t,e;if((t=j.value)!=null&&t.acceptParams){const d={title:"新增测评记录",row:{},api:xe,getTableList:(e=D.value)==null?void 0:e.getTableList};j.value.acceptParams(d)}},N=t=>{var e;(e=g.value)!=null&&e.openDialog&&g.value.openDialog(t)},M=async t=>{await ee(oe,{ids:[t.id]},`删除【${t.id}】测评记录`),n()},S=async t=>{var e;await ee(oe,{ids:t},"删除所选测评记录"),(e=D.value)==null||e.clearSelection(),n()},x=t=>{var e;(e=m.value)!=null&&e.openDialog&&Ce({id:t==null?void 0:t.id}).then(d=>{d!=null&&d.data&&m.value.openDialog(d.data)}).catch(d=>{console.error("获取测评详情失败",d)})},_=()=>{var t,e;if((t=l.value)!=null&&t.acceptParams){const d={title:"测评记录",templateName:"测评记录",tempApi:we,importApi:je,getTableList:(e=D.value)==null?void 0:e.getTableList};l.value.acceptParams(d)}},P=async()=>{var e;let t=u(((e=D.value)==null?void 0:e.searchParam)||{});ke(Ie,"测评记录",t)};return(t,e)=>{const d=h("el-button"),C=me("auth");return s(),p("div",Jt,[o(be,{ref_key:"proTableRef",ref:D,title:"测评记录",columns:b,"search-columns":f,"request-api":$,"row-key":"id",class:"judge-table"},{tableHeader:a(V=>[i("div",Nt,[R((s(),k(d,{icon:T(_e),type:"primary",onClick:w},{default:a(()=>e[0]||(e[0]=[v(" 新增 ")])),_:1},8,["icon"])),[[C,"judge.create"]]),R((s(),k(d,{disabled:!V.isSelected,icon:T(Y),plain:"",type:"danger",onClick:O=>S(V.selectedListIds)},{default:a(()=>e[1]||(e[1]=[v(" 批量删除 ")])),_:2},1032,["disabled","icon","onClick"])),[[C,"judge.remove"]]),R((s(),k(d,{icon:T(fe),plain:"",type:"primary",onClick:_},{default:a(()=>e[2]||(e[2]=[v(" 导入 ")])),_:1},8,["icon"])),[[C,"judge.import"]]),R((s(),k(d,{icon:T(ve),plain:"",type:"primary",onClick:P},{default:a(()=>e[3]||(e[3]=[v(" 导出 ")])),_:1},8,["icon"])),[[C,"judge.export"]])])]),operation:a(({row:V})=>[R((s(),k(d,{icon:T(W),link:"",type:"primary",onClick:O=>N(V)},{default:a(()=>e[4]||(e[4]=[v(" 人工测评 ")])),_:2},1032,["icon","onClick"])),[[C,"judge.update"]]),R((s(),k(d,{icon:T(Y),link:"",type:"primary",onClick:O=>M(V)},{default:a(()=>e[5]||(e[5]=[v(" 删除 ")])),_:2},1032,["icon","onClick"])),[[C,"judge.remove"]]),o(d,{icon:T(Z),link:"",type:"primary",onClick:O=>x(V)},{default:a(()=>e[6]||(e[6]=[v(" 测评详情 ")])),_:2},1032,["icon","onClick"])]),_:1},512),o(De,{ref_key:"formRef",ref:j},null,512),o(he,{ref_key:"importExcelRef",ref:l},null,512),o(bt,{ref_key:"judgeDetailRef",ref:m},null,512),o(Et,{ref_key:"manualEvaluationRef",ref:g,onSuccess:n},null,512)])}}}),Xt=K(Ot,[["__scopeId","data-v-7f5bb4bd"]]);export{Xt as default};
