import{h as d,bF as c,d as $,r as _,f as C,g as R,o as p,c as y,j as w,k as o,i as m,x as n,u as b,a_ as B,y as f,a$ as A,D as F,b0 as O,b1 as V}from"./index-DTkCE7MD.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as U}from"./useHandleData-BdxQ-8Ab.js";import J from"./AppletUserForm-C9Nu9WW0.js";import{I as M,d as j,u as q}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";import"./Img-CbqiKKTP.js";import"./upload-BtJOZC1L.js";const Y=l=>d.get(c+"/applet-user/list",l),z=l=>d.post(c+"/applet-user/create",l),G=l=>d.put(c+"/applet-user/update",l),h=l=>d.delete(c+"/applet-user/remove",l),K=l=>d.get(c+"/applet-user/detail",l),Q=(l,i)=>d.upload(c+"/applet-user/import",l,i),W=l=>d.download(c+"/applet-user/export",l),X={class:"table-box"},Z={key:1},ee={key:1},ne=$({name:"AppletUserView",__name:"index",setup(l){const i=_(),E=[{type:"selection",width:80},{prop:"sysUserId",label:"系统用户ID"},{prop:"openid",label:"openid"},{prop:"code",label:"业务Code"},{prop:"bindCode",label:"绑定Code"},{prop:"nickname",label:"昵称"},{prop:"name",label:"姓名"},{prop:"phone",label:"手机号"},{prop:"address",label:"地址"},{prop:"avatar",label:"头像"},{prop:"url",label:"链接图片"},{prop:"subscribe",label:"是否订阅",render:t=>Number(t.row.subscribe)===1?"是":"否"},{prop:"enable",label:"状态"},{prop:"sex",label:"性别",render:t=>{const e=Number(t.row.sex);return e===0?"未知":e===1?"男":e===2?"女":"未知"}},{prop:"operation",label:"操作",width:250,fixed:"right"}],D=[{prop:"openid",label:"小程序用户的唯一标识",el:"input"},{prop:"code",label:"业务Code",el:"input"},{prop:"bindCode",label:"绑定Code",el:"input"},{prop:"nickname",label:"昵称",el:"input"},{prop:"name",label:"真实姓名",el:"input"},{prop:"phone",label:"手机号",el:"input"},{prop:"address",label:"地址",el:"input"},{prop:"enable",label:"状态",el:"input"}],L=t=>{let e=T(t);return Y(e)},T=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},k=_(),x=async(t,e={},a=!0)=>{var s,r;if(!a){const u=await K({id:e==null?void 0:e.id});e=u==null?void 0:u.data}const v={title:t,row:{...e},api:a?z:G,getTableList:(s=i.value)==null?void 0:s.getTableList};(r=k.value)==null||r.acceptParams(v)},I=async t=>{var e;await U(h,{ids:[t.id]},`删除【${t.id}】小程序用户`),(e=i.value)==null||e.getTableList()},S=async t=>{var e,a;await U(h,{ids:t},"删除所选小程序用户"),(e=i.value)==null||e.clearSelection(),(a=i.value)==null||a.getTableList()},g=_(),N=()=>{var e,a;const t={title:"小程序用户",templateName:"小程序用户",tempApi:j,importApi:Q,getTableList:(e=i.value)==null?void 0:e.getTableList};(a=g.value)==null||a.acceptParams(t)},P=async()=>{var e;let t=T((e=i.value)==null?void 0:e.searchParam);q(W,"小程序用户",t)};return(t,e)=>{const a=C("el-button"),v=C("el-image"),s=R("auth");return p(),y("div",X,[w(H,{ref_key:"proTableRef",ref:i,title:"小程序用户",indent:20,columns:E,"search-columns":D,"request-api":L,"row-key":"id"},{tableHeader:o(r=>[m((p(),n(a,{type:"primary",icon:b(B),onClick:e[0]||(e[0]=u=>x("新增小程序用户"))},{default:o(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[s,"applet.user.create"]]),m((p(),n(a,{type:"danger",icon:b(A),plain:"",disabled:!r.isSelected,onClick:u=>S(r.selectedListIds)},{default:o(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[s,"applet.user.remove"]]),m((p(),n(a,{type:"primary",icon:b(F),plain:"",onClick:N},{default:o(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[s,"applet.user.import"]]),m((p(),n(a,{type:"primary",icon:b(O),plain:"",onClick:P},{default:o(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[s,"applet.user.export"]])]),avatar:o(r=>[r.row.avatar?(p(),n(v,{key:0,style:{width:"50px",height:"50px","border-radius":"4px"},src:r.row.avatar,fit:"cover","preview-src-list":[r.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):(p(),y("span",Z,"-"))]),url:o(r=>[r.row.url?(p(),n(v,{key:0,style:{width:"50px",height:"50px","border-radius":"4px"},src:r.row.url,fit:"cover","preview-src-list":[r.row.url],"preview-teleported":""},null,8,["src","preview-src-list"])):(p(),y("span",ee,"-"))]),operation:o(({row:r})=>[m((p(),n(a,{type:"primary",link:"",icon:b(V),onClick:u=>x("编辑小程序用户",r,!1)},{default:o(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[s,"applet.user.update"]]),m((p(),n(a,{type:"primary",link:"",icon:b(A),onClick:u=>I(r)},{default:o(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[s,"applet.user.remove"]])]),_:1},512),w(J,{ref_key:"appletUserRef",ref:k},null,512),w(M,{ref_key:"ImportExcelRef",ref:g},null,512)])}}});export{ne as default};
