import{d as Y,aB as L,r as c,f as u,o as P,x as j,k as a,a as n,j as l,y as g,T as q,n as z,W as M,_ as R}from"./index-DTkCE7MD.js";import{U as E}from"./Img-CbqiKKTP.js";import{M as G}from"./TagSelect-BSg1hRn-.js";import{C as O}from"./ColorSelect-DZmuTeqD.js";import"./upload-BtJOZC1L.js";import"./metaTag-XZEJwT5o.js";import"./metaTagCategory-DYsFMRBy.js";const W={class:"form-section"},H={class:"form-section"},J={class:"form-section"},K={class:"form-section"},Q={class:"form-section"},X={class:"dialog-footer"},Z=Y({name:"UserAdd",__name:"UserAdd",emits:["submit"],setup(ee,{expose:U,emit:y}){const C=L({username:[{required:!0,message:"用户名是必填项",trigger:"blur"},{min:3,max:32,message:"用户名长度应在3到32个字符之间",trigger:"blur"},{pattern:/^\w+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],name:[{required:!0,message:"真实姓名是必填项",trigger:"blur"},{min:2,max:20,message:"真实姓名长度应在2到20个字符之间",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]}),p=c(!1),t=c({title:"",row:{},api:void 0,getTableList:void 0}),k=d=>{t.value={title:"",row:{tagIds:[]},api:void 0,getTableList:void 0},t.value={...d},t.value.row.tagIds||(t.value.row.tagIds=[]),p.value=!0},N=y,V=c(),x=()=>{V.value.validate(async d=>{if(d)try{const e={...t.value.row};await t.value.api(e),M.success({message:`${t.value.title}成功！`}),t.value.getTableList(),N("submit"),p.value=!1}catch(e){console.log(e)}})},$=d=>{console.log(d)},h=()=>{const d=Math.floor(Math.random()*1e4),e=[0,1,2],b=e[Math.floor(Math.random()*e.length)],f=["https://api.dicebear.com/7.x/avataaars/svg?seed=test1","https://api.dicebear.com/7.x/avataaars/svg?seed=test2","https://api.dicebear.com/7.x/avataaars/svg?seed=test3","https://api.dicebear.com/7.x/personas/svg?seed=test4","https://api.dicebear.com/7.x/personas/svg?seed=test5"];return{username:`testuser${d}`,nickname:`测试用户${d}`,name:`张测试${d}`,phone:`138${String(Math.floor(Math.random()*1e8)).padStart(8,"0")}`,email:`test${d}@example.com`,sex:b,birthday:"1995-06-15",idCard:`${Math.floor(Math.random()*9e5)+1e5}199506151234`,acNum:Math.floor(Math.random()*100),integral:Math.floor(Math.random()*5e3),continuousSignDay:Math.floor(Math.random()*30),submitNum:Math.floor(Math.random()*200),title:"测试称号",color:"#FF6B6B",tagIds:[1,2],logo:f[Math.floor(Math.random()*f.length)]}},D=()=>{const d=h();Object.assign(t.value.row,d),M.success("测试数据已填充！")};return U({acceptParams:k}),(d,e)=>{const b=u("el-tooltip"),f=u("el-space"),i=u("el-input"),r=u("el-form-item"),s=u("el-col"),m=u("el-row"),_=u("el-option"),I=u("el-select"),T=u("el-date-picker"),v=u("el-input-number"),S=u("Avatar"),A=u("el-icon"),B=u("el-form"),w=u("el-button"),F=u("el-dialog");return P(),j(F,{modelValue:p.value,"onUpdate:modelValue":e[17]||(e[17]=o=>p.value=o),title:`${t.value.title}`,"destroy-on-close":!0,width:"700px",draggable:"","append-to-body":"",class:"apple-style-dialog"},{footer:a(()=>[n("div",X,[l(w,{onClick:e[16]||(e[16]=o=>p.value=!1),class:"cancel-btn"},{default:a(()=>e[28]||(e[28]=[g(" 取消 ")])),_:1}),l(w,{type:"warning",onClick:D,class:"test-btn",plain:""},{default:a(()=>e[29]||(e[29]=[g(" 🧪 一键测试 ")])),_:1}),l(w,{type:"primary",onClick:x,class:"submit-btn"},{default:a(()=>e[30]||(e[30]=[g(" 确定 ")])),_:1})])]),default:a(()=>[l(B,{ref_key:"ruleFormRef",ref:V,"label-width":"90px","label-suffix":" :",rules:C,model:t.value.row,onSubmit:q(x,["prevent"]),class:"form__label apple-form"},{default:a(()=>[n("div",W,[e[21]||(e[21]=n("h3",{class:"section-title"},"基本信息",-1)),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"账户",prop:"username"},{label:a(()=>[l(f,{size:2},{default:a(()=>[e[19]||(e[19]=n("span",null,"账户",-1)),l(b,{effect:"dark",content:"字母、数字和下划线，用于登录。",placement:"top"},{default:a(()=>e[18]||(e[18]=[n("i",{class:z("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[20]||(e[20]=n("span",null," :",-1))]),default:a(()=>[l(i,{modelValue:t.value.row.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.row.username=o),placeholder:"请填写账户",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"昵称",prop:"nickname"},{default:a(()=>[l(i,{modelValue:t.value.row.nickname,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.row.nickname=o),placeholder:"请填写昵称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"真实姓名",prop:"name"},{default:a(()=>[l(i,{modelValue:t.value.row.name,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.row.name=o),placeholder:"请填写真实姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"手机号",prop:"phone"},{default:a(()=>[l(i,{modelValue:t.value.row.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.row.phone=o),placeholder:"请填写手机号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"邮箱",prop:"email"},{default:a(()=>[l(i,{modelValue:t.value.row.email,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.row.email=o),placeholder:"请填写邮箱地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"性别",prop:"sex"},{default:a(()=>[l(I,{modelValue:t.value.row.sex,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.row.sex=o),clearable:"",placeholder:"请选择性别",class:"w-full"},{default:a(()=>[l(_,{label:"未知",value:0}),l(_,{label:"男",value:1}),l(_,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"生日",prop:"birthday"},{default:a(()=>[l(T,{modelValue:t.value.row.birthday,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.row.birthday=o),type:"date",placeholder:"选择生日","value-format":"YYYY-MM-DD",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"身份证",prop:"idCard"},{default:a(()=>[l(i,{modelValue:t.value.row.idCard,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.row.idCard=o),placeholder:"请填写身份证",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),n("div",H,[e[22]||(e[22]=n("h3",{class:"section-title"},"数据统计",-1)),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"AC数量",prop:"acNum"},{default:a(()=>[l(v,{modelValue:t.value.row.acNum,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.row.acNum=o),min:0,placeholder:"AC数量",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"用户积分",prop:"integral"},{default:a(()=>[l(v,{modelValue:t.value.row.integral,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.row.integral=o),min:0,placeholder:"用户积分",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"连续签到",prop:"continuousSignDay"},{default:a(()=>[l(v,{modelValue:t.value.row.continuousSignDay,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.row.continuousSignDay=o),min:0,placeholder:"连续签到天数",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"提交数量",prop:"submitNum"},{default:a(()=>[l(v,{modelValue:t.value.row.submitNum,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.row.submitNum=o),min:0,placeholder:"提交题目数量",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),n("div",J,[e[23]||(e[23]=n("h3",{class:"section-title"},"个性化设置",-1)),l(m,{gutter:20},{default:a(()=>[l(s,{span:12},{default:a(()=>[l(r,{label:"称号",prop:"title"},{default:a(()=>[l(i,{modelValue:t.value.row.title,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.row.title=o),placeholder:"请填写称号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:a(()=>[l(r,{label:"颜色",prop:"color"},{default:a(()=>[l(O,{modelValue:t.value.row.color,"onUpdate:modelValue":e[13]||(e[13]=o=>t.value.row.color=o),showPreview:!0,previewText:t.value.row.title||"称号预览"},null,8,["modelValue","previewText"])]),_:1})]),_:1})]),_:1})]),n("div",K,[e[24]||(e[24]=n("h3",{class:"section-title"},"分组与标签",-1)),l(m,{gutter:20},{default:a(()=>[l(s,{span:24},{default:a(()=>[l(r,{label:"标签",prop:"tagIds"},{default:a(()=>[l(G,{modelValue:t.value.row.tagIds,"onUpdate:modelValue":e[14]||(e[14]=o=>t.value.row.tagIds=o),multiple:!0,placeholder:"请选择用户标签"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:a(()=>[l(s,{span:24})]),_:1})]),n("div",Q,[e[27]||(e[27]=n("h3",{class:"section-title"},"头像上传",-1)),l(m,null,{default:a(()=>[l(r,{label:"头像",prop:"logo"},{default:a(()=>[l(E,{"image-url":t.value.row.logo,"onUpdate:imageUrl":e[15]||(e[15]=o=>t.value.row.logo=o),onChange:$,dir:"user","use-oss":!0,width:"135px",height:"135px","border-radius":"50%"},{empty:a(()=>[l(A,null,{default:a(()=>[l(S)]),_:1}),e[25]||(e[25]=n("span",null,"请上传头像",-1))]),tip:a(()=>e[26]||(e[26]=[g(" 头像大小不能超过 3M ")])),_:1},8,["image-url"])]),_:1})]),_:1})])]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}}),ne=R(Z,[["__scopeId","data-v-836ea511"]]);export{ne as default};
