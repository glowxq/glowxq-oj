import{d as ie,r as L,b as re,e as ue,W as z,w as P,o as c,c as _,a as d,j as m,k as u,i as se,t as E,m as I,y as A,x as w,a0 as ce,P as Z,Q as ee,N as me,f as y,g as pe,n as ge,bB as fe,dq as be,dr as ve,_ as de,aV as te,aB as le,u as S,T as Te}from"./index-DTkCE7MD.js";import Ce from"./BasicInfoForm-DOGfcl0w.js";import _e from"./ProgrammingContent-UMXw1Utx.js";import ye from"./ObjectiveForm-DK-mSId0.js";import he from"./TestCaseForm-DWQ56pRq.js";import{J as ae,a as ne,b as Ie}from"./JudgeSettingsForm-BwsWiRCD.js";import{g as Le}from"./metaLanguage-BU5JVUJz.js";import{P as v}from"./ProblemType-TBlMUhPx.js";import"./index-E5zgXN01.js";import"./style-DrPmFrlE.js";import"./upload-BtJOZC1L.js";import"./FileSaver.min-BnsyPtRb.js";import"./EnumSelect-C2fXZs6G.js";import"./TagSelect-BSg1hRn-.js";import"./metaTag-XZEJwT5o.js";import"./metaTagCategory-DYsFMRBy.js";import"./ProgramType-C5wHKcT4.js";import"./DifficultyLevel-DrWtmZg7.js";import"./ProblemSourceType-ColSuHcx.js";import"./file-Cxx7VqTf.js";import"./TestCaseSample-BlHOxPzN.js";const Ee={class:"language-template-select-container"},Se={class:"header-info"},Be={class:"tab-select-area"},ke={class:"tab-header"},Ne={class:"title-area"},we={key:0,class:"selected-count"},De={class:"action-area"},Ae={class:"language-tabs"},Ve=["onClick"],Me={class:"language-name"},Fe={key:0,class:"custom-badge"},Ue={key:1,class:"language-desc"},$e={key:0,class:"code-editor-area"},xe={class:"editor-tabs"},je={class:"editor-header"},Oe={class:"language-info"},ze={class:"info-value"},Pe={key:0,class:"language-info"},qe={class:"info-value"},Je={class:"code-editor-container"},Re={key:1,class:"empty-state"},Ge={class:"footer-actions"},Ke=ie({__name:"LanguageTamplateSelect",props:{queryParams:{default:()=>({})},defaultSelected:{default:()=>[]},modelValue:{default:()=>[]},customTemplates:{default:()=>[]},prioritizeCustomCode:{type:Boolean,default:!1}},emits:["cancel","confirm","update:modelValue"],setup(B,{emit:k}){const n=B,N=k,h=L(!1),T=L([]),g=L([]),o=L({}),C=L(""),D=L(!1),f=re(()=>T.value.filter(s=>s.id&&g.value.includes(s.id)));ue(async()=>{await J(),n.defaultSelected.length>0&&(g.value=[...n.defaultSelected]),n.customTemplates&&n.customTemplates.length>0&&(console.log("发现自定义模板数据:",n.customTemplates),n.prioritizeCustomCode&&n.customTemplates.forEach(s=>{const e=s.languageId||s.id;e&&e.toString()&&!g.value.includes(e.toString())&&(console.log(`添加自定义模板语言ID: ${e} 到选中列表`),g.value.push(e.toString()))})),F()});const J=async()=>{h.value=!0;try{const s={oj:"GlowOJ",page:1,limit:20,...n.queryParams},e=await Le(s);T.value=e.data.rows||[],F()}catch(s){console.error("加载语言列表失败:",s),z.error("加载语言列表失败")}finally{h.value=!1}},R=s=>s&&o.value[s]||"",G=(s,e)=>{!s||e===void 0||(o.value[s]=e)},F=()=>{n.customTemplates&&n.customTemplates.length>0&&n.prioritizeCustomCode&&(console.log("使用自定义模板初始化编辑器:",n.customTemplates),n.customTemplates.forEach(s=>{const e=s.languageId||s.id;if(e&&(s.code||s.codeTemplate)){const a=s.code||s.codeTemplate||"";a&&a.length>0&&(console.log(`应用自定义模板代码, 语言ID: ${e}, 代码长度: ${a.length}`),o.value[e]=a,g.value.includes(e.toString())||g.value.push(e.toString()))}})),f.value.forEach(s=>{s.id&&(o.value[s.id]||(o.value[s.id]=s.codeTemplate||""))}),f.value.length>0&&f.value[0].id&&(C.value=f.value[0].id)},K=s=>{if(!s.id)return;const e=s.id,a=g.value.indexOf(e);if(a>-1)g.value.splice(a,1);else{if(g.value.push(e),n.customTemplates&&n.prioritizeCustomCode){const i=n.customTemplates.find(l=>(l.languageId===e||l.id===e)&&(l.code||l.codeTemplate));if(i){const l=i.code||i.codeTemplate||"";if(l&&l.length>0){console.log(`使用自定义代码初始化语言 ${e}, 代码长度: ${l.length}`),o.value[e]=l;return}}}o.value[e]=s.codeTemplate||""}a>-1&&C.value===e&&f.value.length>0&&f.value[0].id?C.value=f.value[0].id:f.value.length===0?C.value="":!C.value&&f.value.length>0&&f.value[0].id&&(C.value=f.value[0].id)},U=s=>s?g.value.includes(s):!1,$=()=>{g.value=[],C.value=""},H=()=>{g.value=T.value.filter(s=>s.id).map(s=>s.id),F()},x=()=>{},W=()=>{N("confirm",f.value.map(s=>s.id?{...s,codeTemplate:o.value[s.id]||s.codeTemplate}:s))},Q=()=>{N("cancel")},X=s=>{const e=s.name||"",a=be(e);return ve(a)},t=s=>!s||!n.customTemplates?!1:!!n.customTemplates.find(a=>(a.languageId===s||a.id===s)&&a.isCustomized===!0);return P(()=>n.modelValue,s=>{s&&s.length>0&&(console.log("外部模型值变化:",s),n.prioritizeCustomCode&&s.forEach(e=>{const a=e.languageId||e.id;if(a&&(e.code||e.codeTemplate)){const i=e.code||e.codeTemplate||"";i&&i.length>0&&(console.log(`外部模型值更新: 语言ID ${a}, 代码长度: ${i.length}`),o.value[a]=i,g.value.includes(a.toString())||g.value.push(a.toString()))}}))},{deep:!0}),P([g,o],()=>{const s=f.value.map(e=>{var a;if(e.id){let i={...e,codeTemplate:o.value[e.id]||e.codeTemplate};if(n.customTemplates&&n.prioritizeCustomCode){const l=n.customTemplates.find(b=>b.languageId===e.id||b.id===e.id);if(l){const b=o.value[e.id];i={...e,...l,codeTemplate:b||l.codeTemplate||e.codeTemplate||"",languageId:e.id,isCustomized:!0},console.log(`更新自定义模板: 语言ID ${e.id}, 代码长度: ${((a=i.codeTemplate)==null?void 0:a.length)||0}`)}}return i}return e});N("update:modelValue",s)},{deep:!0}),(s,e)=>{const a=y("el-alert"),i=y("el-button"),l=y("el-icon"),b=y("el-collapse-transition"),V=y("el-tab-pane"),j=y("el-tabs"),Y=y("el-empty"),p=pe("loading");return c(),_("div",Ee,[d("div",Se,[m(a,{title:"语言模板选择",type:"info",closable:!1,"show-icon":""},{default:u(()=>e[2]||(e[2]=[d("p",null,"从下方选择需要的语言模板，选中后可以编辑代码模板内容，点击确定返回选中的模板",-1)])),_:1})]),se((c(),_("div",Be,[d("div",ke,[d("div",Ne,[e[3]||(e[3]=d("h3",null,"语言选择",-1)),f.value.length>0?(c(),_("span",we," 已选择 "+E(f.value.length)+" 个语言 ",1)):I("",!0)]),d("div",De,[m(i,{size:"small",onClick:$},{default:u(()=>e[4]||(e[4]=[A("清空选择")])),_:1}),m(i,{size:"small",type:"primary",onClick:H},{default:u(()=>e[5]||(e[5]=[A("全选")])),_:1}),m(i,{size:"small",type:"text",onClick:e[0]||(e[0]=r=>D.value=!D.value)},{default:u(()=>[A(E(D.value?"展开":"折叠")+" ",1),m(l,{class:"el-icon--right"},{default:u(()=>[(c(),w(ce(D.value?"ArrowDown":"ArrowUp")))]),_:1})]),_:1})])]),m(b,null,{default:u(()=>[se(d("div",Ae,[(c(!0),_(Z,null,ee(T.value,r=>(c(),_("div",{key:r.id,class:ge(["language-tab",{selected:U(r.id),customized:t(r.id)}]),onClick:O=>K(r)},[d("span",Me,E(r.name),1),t(r.id)?(c(),_("span",Fe,"自定义")):I("",!0),r.description?(c(),_("span",Ue,E(r.description),1)):I("",!0)],10,Ve))),128))],512),[[me,!D.value]])]),_:1})])),[[p,h.value]]),f.value.length>0?(c(),_("div",$e,[d("div",xe,[m(j,{modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=r=>C.value=r),type:"card",onTabClick:x},{default:u(()=>[(c(!0),_(Z,null,ee(f.value,r=>(c(),w(V,{key:r.id,label:r.name,name:r.id},{default:u(()=>[d("div",je,[d("div",Oe,[e[6]||(e[6]=d("span",{class:"info-label"},"语言描述:",-1)),d("span",ze,E(r.description||"无"),1)]),r.compileCommand?(c(),_("div",Pe,[e[7]||(e[7]=d("span",{class:"info-label"},"编译指令:",-1)),d("span",qe,E(r.compileCommand),1)])):I("",!0)]),d("div",Je,[m(fe,{modelValue:R(r.id),"onUpdate:modelValue":O=>G(r.id,O),language:X(r),height:"300px"},null,8,["modelValue","onUpdate:modelValue","language"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])])):!h.value&&T.value.length>0?(c(),_("div",Re,[m(Y,{description:"请选择至少一种语言模板"})])):I("",!0),d("div",Ge,[m(i,{onClick:Q},{default:u(()=>e[8]||(e[8]=[A("取消")])),_:1}),m(i,{type:"primary",onClick:W},{default:u(()=>e[9]||(e[9]=[A("完成")])),_:1})])])}}}),He=de(Ke,[["__scopeId","data-v-0a3e576d"]]);function We(B={}){const k=L({description:!1,input:!1,output:!1,hint:!1,...B}),n=L({});return{markdownLoaded:k,handleUploadSuccess:o=>(te({title:"上传成功",message:`成功上传 ${o.length} 个文件`,type:"success"}),o),handleUploadError:o=>(te({title:"上传失败",message:o.message||"上传文件失败，请重试",type:"error"}),o),handleMarkdownMounted:o=>{const C=`mounted-${o}`;return n.value[C]?(console.log(`编辑器 ${o} 已经处理过挂载事件，跳过`),o):(n.value[C]=!0,o in k.value&&(k.value[o]=!0),o)},resetProcessedEvents:()=>{n.value={}}}}const q={[v.PROGRAMMING.code]:{availableTabs:["basic","content","testcase","advanced","codetpl"],defaultNextTab:"content"},[v.SINGLE_CHOICE.code]:{availableTabs:["basic","options"],defaultNextTab:"options"},[v.MULTIPLE_CHOICE.code]:{availableTabs:["basic","options"],defaultNextTab:"options"},[v.TRUE_FALSE.code]:{availableTabs:["basic","options"],defaultNextTab:"options"},[v.FILL_BLANK.code]:{availableTabs:["basic","options"],defaultNextTab:"options"},[v.SHORT_ANSWER.code]:{availableTabs:["basic","options"],defaultNextTab:"options"}},M=(B,k)=>B==="basic"?!0:q[k]?q[k].availableTabs.includes(B):!1,Qe=B=>q[B]?q[B].defaultNextTab:"basic",Xe={key:0,class:"edit-mode-warning testcase-warning"},Ye={class:"template-debug-info"},Ze={key:0},eo={class:"dialog-footer"},oo=ie({name:"ProblemForm",__name:"ProblemForm",setup(B,{expose:k}){const n=le({"problemBo.problemKey":[{required:!1,message:"请填写题目的自定义ID"}],"problemBo.title":[{required:!0,message:"请填写题目标题"}],"problemBo.author":[{required:!1,message:"请填写作者"}],"problemBo.programType":[{required:!0,message:"请选择程序类型"}],"problemBo.problemType":[{required:!0,message:"请选择题目类型"}],"problemBo.sourceType":[{required:!1,message:"请选择来源类型"}],"problemBo.timeLimit":[{required:!0,message:"请填写时间限制"}],"problemBo.memoryLimit":[{required:!0,message:"请填写内存限制"}],"problemBo.stackLimit":[{required:!0,message:"请填写栈限制"}],"problemBo.auth":[{required:!0,message:"请选择权限类型"}],"problemBo.description":[{required:!0,message:"请填写题目描述"}]}),N=L(!1),h=L("basic"),T=L({title:"",row:{},api:void 0,getTableList:void 0}),g=re(()=>{var t;return!!((t=T.value.row)!=null&&t.id)}),o=le({problemBo:{id:null,problemKey:"",title:"",author:"",programType:0,problemType:String(v.PROGRAMMING.code),sourceType:"GlowOJ",timeLimit:1e3,memoryLimit:262144,stackLimit:128,description:"",input:"",output:"",examples:"",difficulty:0,hint:"",auth:1,ioScore:0,score:0,source:"",judgeMode:String(ae.DEFAULT.code),judgeCaseMode:String(ne.DEFAULT.code),userExtraFile:"",judgeExtraFile:"",spjCode:"",spjLanguage:"",remote:!1,codeShare:!0,removeEndBlank:!1,openCaseResult:!1,uploadCase:!1,groupProblem:!1,fileIo:!1,requireImage:!1,changeModeCode:!1,changeJudgeCaseMode:!1,caseVersion:"",modifiedUser:"",applyPublicProgress:null,ioReadFileName:"",ioWriteFileName:"",languageIds:[],tagIds:[],answer:null,referenceAnswer:"",gradingCriteria:""},problemCaseDataList:[],codeTemplates:[],uploadTestcaseDir:"",options:[],blanks:[]}),{handleUploadSuccess:C,handleUploadError:D,handleMarkdownMounted:f,resetProcessedEvents:J}=We();P(()=>o.problemBo.problemType,t=>{console.log("题目类型变更为:",t),M(h.value,t)||(h.value="basic"),(t===v.SINGLE_CHOICE.code||t===v.MULTIPLE_CHOICE.code)&&(!o.options||o.options.length===0)?o.options=[{optionKey:"A",optionContent:"",score:t===v.SINGLE_CHOICE.code?10:5,answer:!1},{optionKey:"B",optionContent:"",score:t===v.SINGLE_CHOICE.code?10:5,answer:!1},{optionKey:"C",optionContent:"",score:t===v.SINGLE_CHOICE.code?10:5,answer:!1},{optionKey:"D",optionContent:"",score:t===v.SINGLE_CHOICE.code?10:5,answer:!1}]:t===v.FILL_BLANK.code&&(!o.blanks||o.blanks.length===0)&&(o.blanks=[{optionKey:"填空1",optionContent:"",score:5,answer:!0}])}),P(()=>o.codeTemplates,t=>{if(!t||t.length===0)return;console.log("代码模板数据变化:",t);const s=t.map(e=>{const a=e.languageId||(e.id?Number(e.id):void 0),i=e.isCustomized===!0,l=e.code||e.codeTemplate||"",b=e.codeTemplate||e.code||"";return console.log(`处理模板 ID:${e.id||a}, 是否自定义:${i}, 代码长度:${(l==null?void 0:l.length)||0}`),{id:e.id,name:e.name||"",description:e.description||"",languageId:a,code:l,codeTemplate:b,compileCommand:e.compileCommand||"",contentType:e.contentType||"",oj:e.oj||"",template:e.template||"",spjEnable:e.spjEnable||0,seq:e.seq||0,isCustomized:e.isCustomized||!1}});JSON.stringify(s)!==JSON.stringify(t)&&(console.log("更新代码模板数据格式:"),console.log("原格式:",JSON.stringify(t)),console.log("新格式:",JSON.stringify(s)),o.codeTemplates=s)},{deep:!0});const R=L(!0),G=t=>{if(T.value=t,J(),F(),t.row&&t.row.id){console.log("编辑模式，填充数据:",t.row);try{K(t.row),console.log("数据填充完成:",o)}catch(s){console.error("处理编辑数据时出错:",s)}}N.value=!0},F=()=>{o.problemBo={id:null,problemKey:"",title:"",author:"",programType:0,problemType:String(v.PROGRAMMING.code),sourceType:"GlowOJ",timeLimit:1e3,memoryLimit:262144,stackLimit:128,description:"",input:"",output:"",examples:"",difficulty:0,hint:"",auth:1,ioScore:0,score:0,source:"",judgeMode:String(ae.DEFAULT.code),judgeCaseMode:String(ne.DEFAULT.code),userExtraFile:"",judgeExtraFile:"",spjCode:"",spjLanguage:"",remote:!1,codeShare:!0,removeEndBlank:!1,openCaseResult:!1,uploadCase:!1,groupProblem:!1,fileIo:!1,requireImage:!1,changeModeCode:!1,changeJudgeCaseMode:!1,caseVersion:"",modifiedUser:"",applyPublicProgress:null,ioReadFileName:"",ioWriteFileName:"",languageIds:[],tagIds:[],answer:null,referenceAnswer:"",gradingCriteria:""},o.problemCaseDataList=[],o.codeTemplates=[],o.uploadTestcaseDir="",o.options=[],o.blanks=[]},K=t=>{var a,i;const s=["description","input","output","examples","hint","referenceAnswer","gradingCriteria","spjCode","userExtraFile","judgeExtraFile"];t.problemBo?Object.keys(t.problemBo).forEach(l=>{l in o.problemBo&&t.problemBo[l]!==void 0&&(s.includes(l)&&(t.problemBo[l]===null||t.problemBo[l]===void 0)?o.problemBo[l]="":o.problemBo[l]=t.problemBo[l])}):Object.keys(o.problemBo).forEach(l=>{t[l]!==void 0&&(s.includes(l)&&(t[l]===null||t[l]===void 0)?o.problemBo[l]="":o.problemBo[l]=t[l])}),t.id&&(o.problemBo.id=t.id),Array.isArray(t.samples)&&(o.problemCaseDataList=[...t.samples]),Array.isArray(t.problemCaseDataList)&&(o.problemCaseDataList=[...t.problemCaseDataList]),Array.isArray(t.codeTemplates)?(console.log("原始代码模板数据:",JSON.stringify(t.codeTemplates)),o.codeTemplates=t.codeTemplates.map(l=>{const b=l.languageId||(l.id?Number(l.id):void 0),V={id:l.id,name:l.name||"",description:l.description||"",languageId:b,code:l.code||l.codeTemplate||"",codeTemplate:l.codeTemplate||l.code||"",compileCommand:l.compileCommand||"",contentType:l.contentType||"",oj:l.oj||"",template:l.template||"",spjEnable:l.spjEnable||0,seq:l.seq||0,isCustomized:!0};return console.log("处理后的模板数据(含自定义代码):",V),V}),console.log("处理后的完整代码模板数据(含自定义代码):",o.codeTemplates)):console.log("未找到代码模板数据或格式不正确:",t.codeTemplates),Array.isArray(t.options)&&(o.options=[...t.options]),Array.isArray(t.blanks)&&t.blanks.length>0&&(String(t.problemType)===String(v.FILL_BLANK.code)||String(o.problemBo.problemType)===String(v.FILL_BLANK.code)?((!o.options||o.options.length===0)&&(o.options=[...t.blanks]),o.blanks=[]):o.blanks=[...t.blanks]),t.uploadTestcaseDir&&(o.uploadTestcaseDir=t.uploadTestcaseDir),["remote","codeShare","removeEndBlank","openCaseResult","uploadCase","groupProblem","fileIo","requireImage","changeModeCode","changeJudgeCaseMode"].forEach(l=>{if(t[l]!==void 0){const b=t[l];typeof b=="string"?o.problemBo[l]=b.toLowerCase()==="true":typeof b=="number"?o.problemBo[l]=b!==0:typeof b=="boolean"&&(o.problemBo[l]=b)}}),t.tagList&&Array.isArray(t.tagList)?o.problemBo.tagIds=t.tagList.map(l=>l.id):t.tagIds&&(o.problemBo.tagIds=Array.isArray(t.tagIds)?[...t.tagIds]:typeof t.tagIds=="string"?t.tagIds.split(",").map(l=>Number(l)):[]),t.languageIds&&(o.problemBo.languageIds=Array.isArray(t.languageIds)?[...t.languageIds]:typeof t.languageIds=="string"?t.languageIds.split(",").map(l=>Number(l)):[]),console.log("填充后的数据:",{id:o.problemBo.id,problemType:o.problemBo.problemType,codeTemplates:o.codeTemplates.length,tagsCount:((a=o.problemBo.tagIds)==null?void 0:a.length)||0,languagesCount:((i=o.problemBo.languageIds)==null?void 0:i.length)||0})},U=L(),$=()=>{var t;(t=U.value)==null||t.validate(async s=>{if(s)try{T.value.row&&T.value.row.id&&(o.problemBo.id=T.value.row.id),String(o.problemBo.problemType)===String(v.FILL_BLANK.code)&&(o.blanks=[]);const e={id:o.problemBo.id,...o,tagIds:o.problemBo.tagIds||[]};e.problemCaseDataList&&Array.isArray(e.problemCaseDataList)&&(e.problemCaseDataList=e.problemCaseDataList.map(a=>a.type&&typeof a.type=="object"&&"code"in a.type?{...a,type:a.type.code}:a)),console.log("提交的数据:",e),console.log("提交的标签IDs:",e.tagIds),console.log("提交的problemBo.tagIds:",o.problemBo.tagIds),await T.value.api(e),z.success({message:`${T.value.title}成功！`}),T.value.getTableList(),N.value=!1}catch(e){console.error("提交数据时出错:",e),z.error("提交失败，请检查数据格式")}})},H=t=>{h.value=Qe(t),console.log(`题目类型 ${t} 的下一步跳转到: ${h.value}`)},x=()=>{if(!o.codeTemplates||o.codeTemplates.length===0)return console.log("无代码模板数据，返回空数组"),[];console.log("从codeTemplates中提取语言ID:",JSON.stringify(o.codeTemplates));const t=o.codeTemplates.filter(s=>s.languageId!==void 0||s.id!==void 0).map(s=>{const e=s.languageId||s.id,a=s.code&&s.code.trim().length>0,i=s.codeTemplate&&s.codeTemplate.trim().length>0,l=a||i;return console.log(`模板 ${JSON.stringify({id:e,languageId:s.languageId,hasCode:l,isCustomized:s.isCustomized})} 提取ID: ${e}`),String(e)});return console.log("提取到的语言ID:",t),t.length===0&&console.warn("未能提取到任何有效的语言ID"),t},W=()=>{if(console.log("语言模板设置已完成, 当前模板数量:",o.codeTemplates.length),o.codeTemplates&&o.codeTemplates.length>0){const t=o.codeTemplates.filter(e=>e.isCustomized).length,s=o.codeTemplates.filter(e=>e.code&&e.code.trim().length>0||e.codeTemplate&&e.codeTemplate.trim().length>0).length;console.log(`已选择 ${o.codeTemplates.length} 个模板，其中 ${t} 个自定义模板，${s} 个包含代码`)}h.value="advanced",z.success("代码模板设置成功")},Q=()=>o.codeTemplates?o.codeTemplates.filter(t=>t.isCustomized).length:0,X=t=>t.isCustomized?"是":"否";return k({acceptParams:G}),(t,s)=>{const e=y("el-tab-pane"),a=y("el-alert"),i=y("el-collapse-item"),l=y("el-collapse"),b=y("el-tabs"),V=y("el-form"),j=y("el-button"),Y=y("el-dialog");return c(),w(Y,{modelValue:N.value,"onUpdate:modelValue":s[9]||(s[9]=p=>N.value=p),title:`${T.value.title}`,"destroy-on-close":!0,width:"100%",top:"0",fullscreen:"",draggable:"",class:"problem-dialog"},{footer:u(()=>[d("div",eo,[m(j,{onClick:s[8]||(s[8]=p=>N.value=!1)},{default:u(()=>s[12]||(s[12]=[A("取消")])),_:1}),m(j,{type:"primary",onClick:$},{default:u(()=>s[13]||(s[13]=[A("确定")])),_:1})])]),default:u(()=>[m(V,{ref_key:"ruleFormRef",ref:U,"label-width":"140px","label-suffix":" :",rules:n,model:o,onSubmit:Te($,["prevent"]),class:"problem-form"},{default:u(()=>[m(b,{modelValue:h.value,"onUpdate:modelValue":s[7]||(s[7]=p=>h.value=p),type:"card",class:"problem-tabs"},{default:u(()=>[m(e,{label:"基本信息",name:"basic"},{default:u(()=>[m(Ce,{modelValue:o,"onUpdate:modelValue":s[0]||(s[0]=p=>Object.assign(o,p)),"is-edit":g.value,onUploadSuccess:S(C),onUploadError:S(D),onMarkdownMounted:S(f),onNextStep:H},null,8,["modelValue","is-edit","onUploadSuccess","onUploadError","onMarkdownMounted"])]),_:1}),S(M)("content",o.problemBo.problemType)?(c(),w(e,{key:0,label:"题目内容",name:"content"},{default:u(()=>[m(_e,{modelValue:o,"onUpdate:modelValue":s[1]||(s[1]=p=>Object.assign(o,p)),onUploadSuccess:S(C),onUploadError:S(D)},null,8,["modelValue","onUploadSuccess","onUploadError"])]),_:1})):I("",!0),S(M)("options",o.problemBo.problemType)?(c(),w(e,{key:1,label:"选项&答案",name:"options"},{default:u(()=>[m(ye,{modelValue:o,"onUpdate:modelValue":s[2]||(s[2]=p=>Object.assign(o,p)),onMarkdownMounted:S(f)},null,8,["modelValue","onMarkdownMounted"])]),_:1})):I("",!0),S(M)("testcase",o.problemBo.problemType)?(c(),w(e,{key:2,label:"测试数据",name:"testcase"},{default:u(()=>[g.value?(c(),_("div",Xe,[m(a,{title:"编辑模式下的测试用例处理提示",type:"warning",closable:!1,"show-icon":""},{default:u(()=>s[10]||(s[10]=[d("p",null,[d("strong",null,"重要提示："),A("编辑模式下，如果修改测试用例，以最后上传的用例数据为准（不会把原有题目的用例数据合并，如果有合并需求，请下载数据后手动合并）")],-1)])),_:1})])):I("",!0),m(he,{modelValue:o,"onUpdate:modelValue":s[3]||(s[3]=p=>Object.assign(o,p)),"is-edit":g.value},null,8,["modelValue","is-edit"])]),_:1})):I("",!0),S(M)("advanced",o.problemBo.problemType)?(c(),w(e,{key:3,label:"评测设置",name:"advanced"},{default:u(()=>[m(Ie,{modelValue:o,"onUpdate:modelValue":s[4]||(s[4]=p=>Object.assign(o,p)),"is-edit":g.value},null,8,["modelValue","is-edit"])]),_:1})):I("",!0),S(M)("codetpl",o.problemBo.problemType)?(c(),w(e,{key:4,label:"代码模板",name:"codetpl"},{default:u(()=>[R.value?(c(),w(l,{key:0,class:"template-debug-panel"},{default:u(()=>[m(i,{name:"1",title:"代码模板调试信息"},{default:u(()=>{var p;return[d("div",Ye,[d("p",null,"当前选中的语言ID: "+E(x().join(", ")||"无"),1),d("p",null,"自定义模板数量: "+E(Q())+" / 总模板数量: "+E(((p=o.codeTemplates)==null?void 0:p.length)||0),1),o.codeTemplates&&o.codeTemplates.length>0?(c(),_("div",Ze,[s[11]||(s[11]=d("p",null,"自定义模板详情:",-1)),d("ul",null,[(c(!0),_(Z,null,ee(o.codeTemplates,(r,O)=>{var oe;return c(),_("li",{key:O}," ID: "+E(r.languageId||r.id)+", 代码长度: "+E(((oe=r.code||r.codeTemplate||"")==null?void 0:oe.length)||0)+"字符, 是否自定义: "+E(X(r)),1)}),128))])])):I("",!0)])]}),_:1})]),_:1})):I("",!0),m(He,{modelValue:o.codeTemplates,"onUpdate:modelValue":s[5]||(s[5]=p=>o.codeTemplates=p),"default-selected":x(),"custom-templates":o.codeTemplates,"prioritize-custom-code":!0,onConfirm:W,onCancel:s[6]||(s[6]=p=>h.value="advanced")},null,8,["modelValue","default-selected","custom-templates"])]),_:1})):I("",!0)]),_:1},8,["modelValue"])]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}}),Lo=de(oo,[["__scopeId","data-v-80f71176"]]);export{Lo as default};
