import{h as s,bF as d,d as E,r as i,aB as F,f as u,o as q,x as S,k as r,j as a,y,T as B,W as L}from"./index-DTkCE7MD.js";const $=t=>s.post(d+"/meta-category/create",t),D=t=>s.put(d+"/meta-category/update",t),R=t=>s.delete(d+"/meta-category/remove",t),j=t=>s.get(d+"/meta-category/detail",t),N=t=>s.get(d+"/meta-category/tree",t),I=(t,c)=>s.upload(d+"/meta-category/import",t,c),O=t=>s.download(d+"/meta-category/export",t),W=E({name:"MetaCategoryForm",__name:"MetaCategoryForm",setup(t,{expose:c}){const v=i([]),V={label:"name",value:"id"},x=F({name:[{required:!0,message:"请填写分类名称"}],pid:[{required:!0,message:"请选择上级分类"}],enable:[{required:!0,message:"请选择是否启用"}],lock:[{required:!0,message:"请选择是否锁定"}]}),p=i(!1),l=i({title:"",row:{},api:void 0,getTableList:void 0}),C=()=>{var n;N({excludeNodeId:(n=l.value.row)==null?void 0:n.id}).then(e=>{v.value=e.data})},k=n=>{l.value=n,p.value=!0,l.value.title.includes("新增")&&(l.value.row.enable=!0,l.value.row.lock=!1),C()},f=i(),g=()=>{f.value.validate(async n=>{if(n)try{await l.value.api(l.value.row),L.success({message:`${l.value.title}成功！`}),l.value.getTableList(),p.value=!1}catch(e){console.log(e)}})};return c({acceptParams:k}),(n,e)=>{const M=u("el-tree-select"),m=u("el-form-item"),b=u("el-input"),U=u("el-input-number"),_=u("el-switch"),A=u("el-form"),w=u("el-button"),T=u("el-dialog");return q(),S(T,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=o=>p.value=o),title:`${l.value.title}`,"destroy-on-close":!0,width:"580px",draggable:""},{footer:r(()=>[a(w,{onClick:e[6]||(e[6]=o=>p.value=!1)},{default:r(()=>e[8]||(e[8]=[y(" 取消")])),_:1}),a(w,{type:"primary",onClick:g},{default:r(()=>e[9]||(e[9]=[y(" 确定")])),_:1})]),default:r(()=>[a(A,{ref_key:"ruleFormRef",ref:f,"label-width":"140px","label-suffix":" :",rules:x,model:l.value.row,onSubmit:B(g,["prevent"])},{default:r(()=>[a(m,{label:"上级分类",prop:"pid"},{default:r(()=>[a(M,{modelValue:l.value.row.pid,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.row.pid=o),data:v.value,"check-strictly":"",placeholder:"请选择上级分类","render-after-expand":!1,clearable:"","default-expand-all":!0,props:V},null,8,["modelValue","data"])]),_:1}),a(m,{label:"分类名称",prop:"name"},{default:r(()=>[a(b,{modelValue:l.value.row.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.row.name=o),placeholder:"请填写分类名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"排序",prop:"sort"},{default:r(()=>[a(U,{modelValue:l.value.row.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.row.sort=o),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),a(m,{label:"启用",prop:"enable"},{default:r(()=>[a(_,{modelValue:l.value.row.enable,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.row.enable=o)},null,8,["modelValue"])]),_:1}),a(m,{label:"是否锁定",prop:"lock"},{default:r(()=>[a(_,{modelValue:l.value.row.lock,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.row.lock=o)},null,8,["modelValue"])]),_:1}),a(m,{label:"备注",prop:"remark"},{default:r(()=>[a(b,{modelValue:l.value.row.remark,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.row.remark=o),placeholder:"请填写备注",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{W as _,j as a,$ as c,O as e,N as g,I as i,R as r,D as u};
