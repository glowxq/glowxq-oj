import{d as O,bc as P,aB as q,r as k,f as u,o as d,x as s,k as t,j as o,y as N,T as A,a as n,n as f,m as z,c,P as g,Q as C,u as _,W as D}from"./index-DTkCE7MD.js";const M=O({name:"SysClientForm",__name:"SysClientForm",setup($,{expose:B}){const y=P(),F=q({clientKey:[{required:!0,message:"请填写客户端名称"}],deviceTypeCd:[{required:!0,message:"请填写设备类型"}],clientStatusCd:[{required:!0,message:"请设置状态"}]}),i=k(!1),a=k({title:"",row:{},api:void 0,getTableList:void 0}),I=v=>{a.value=v,i.value=!0},T=k(),S=()=>{T.value.validate(async v=>{if(v)try{await a.value.api(a.value.row),D.success({message:`${a.value.title}成功！`}),a.value.getTableList(),i.value=!1}catch(e){console.log(e)}})};return B({acceptParams:I}),(v,e)=>{const p=u("el-tooltip"),m=u("el-space"),b=u("el-input"),r=u("el-form-item"),V=u("el-option"),w=u("el-select"),x=u("el-input-number"),L=u("el-form"),U=u("el-button"),K=u("el-dialog");return d(),s(K,{modelValue:i.value,"onUpdate:modelValue":e[10]||(e[10]=l=>i.value=l),title:`${a.value.title}`,"destroy-on-close":!0,width:"500px",draggable:"","append-to-body":""},{footer:t(()=>[o(U,{onClick:e[9]||(e[9]=l=>i.value=!1)},{default:t(()=>e[26]||(e[26]=[N(" 取消 ")])),_:1}),o(U,{type:"primary",onClick:S},{default:t(()=>e[27]||(e[27]=[N(" 确定 ")])),_:1})]),default:t(()=>[o(L,{ref_key:"ruleFormRef",ref:T,"label-width":"180px","label-suffix":" :",rules:F,model:a.value.row,onSubmit:A(S,["prevent"])},{default:t(()=>[a.value.isAdd?z("",!0):(d(),s(r,{key:0,label:"ClientId",prop:"clientId"},{label:t(()=>[o(m,{size:4},{default:t(()=>[e[12]||(e[12]=n("span",null,"clientId",-1)),o(p,{effect:"dark",content:"唯一标识串，用于token的生成。针对不同端生成不同类型的token。多端尽量不要使用相同token",placement:"top"},{default:t(()=>e[11]||(e[11]=[n("i",{class:f("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[13]||(e[13]=n("span",null," :",-1))]),default:t(()=>[o(b,{disabled:"",modelValue:a.value.row.clientId,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.row.clientId=l),clearable:""},null,8,["modelValue"])]),_:1})),o(r,{label:"客户端名称",prop:"clientKey"},{default:t(()=>[o(b,{disabled:!a.value.isAdd,modelValue:a.value.row.clientKey,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.row.clientKey=l),placeholder:"请填写客户端名称",clearable:""},null,8,["disabled","modelValue"])]),_:1}),a.value.isAdd?z("",!0):(d(),s(r,{key:1,label:"secret秘钥",prop:"clientSecret"},{label:t(()=>[o(m,{size:4},{default:t(()=>[e[15]||(e[15]=n("span",null,"secret秘钥",-1)),o(p,{effect:"dark",content:"加密串，后续实现",placement:"top"},{default:t(()=>e[14]||(e[14]=[n("i",{class:f("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[16]||(e[16]=n("span",null," :",-1))]),default:t(()=>[o(b,{disabled:"",modelValue:a.value.row.clientSecret,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.row.clientSecret=l),clearable:""},null,8,["modelValue"])]),_:1})),o(r,{label:"授权类型",prop:"grantTypeCd"},{label:t(()=>[o(m,{size:4},{default:t(()=>[e[18]||(e[18]=n("span",null,"授权类型",-1)),o(p,{effect:"dark",content:"选择认证策略strategy，如PasswordStrategy。多选支持后续完善",placement:"top"},{default:t(()=>e[17]||(e[17]=[n("i",{class:f("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[19]||(e[19]=n("span",null," :",-1))]),default:t(()=>[o(w,{modelValue:a.value.row.grantTypeCdList,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.row.grantTypeCdList=l),multiple:"",clearable:"",placeholder:"请选择授权类型"},{default:t(()=>[(d(!0),c(g,null,C(_(y).getDictOptions("grant_type"),l=>(d(),s(V,{key:l.alias,label:l.codeName,value:l.alias},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"设备类型",prop:"deviceTypeCd"},{default:t(()=>[o(w,{modelValue:a.value.row.deviceTypeCd,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.row.deviceTypeCd=l),clearable:"",placeholder:"请选择设备类型"},{default:t(()=>[(d(!0),c(g,null,C(_(y).getDictOptions("device_type"),l=>(d(),s(V,{key:l.id,label:l.codeName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"token活跃超时时间",prop:"activeTimeout"},{label:t(()=>[o(m,{size:4},{default:t(()=>[e[21]||(e[21]=n("span",null,"token活跃超时时间",-1)),o(p,{effect:"dark",content:"指定此次登录 token 最低活跃频率，单位：秒。如果用户在活跃时间内未作任何操作将踢出登录。对应sa-token activeTimeout。",placement:"top"},{default:t(()=>e[20]||(e[20]=[n("i",{class:f("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[22]||(e[22]=n("span",null," :",-1))]),default:t(()=>[o(x,{modelValue:a.value.row.activeTimeout,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.row.activeTimeout=l),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"token固定超时",prop:"timeout"},{label:t(()=>[o(m,{size:4},{default:t(()=>[e[24]||(e[24]=n("span",null,"token固定超时",-1)),o(p,{effect:"dark",content:"指定此次登录 token 有效期，单位：秒。token的最大有效期。对应sa-token timeout",placement:"top"},{default:t(()=>e[23]||(e[23]=[n("i",{class:f("iconfont icon-yiwen")},null,-1)])),_:1})]),_:1}),e[25]||(e[25]=n("span",null," :",-1))]),default:t(()=>[o(x,{modelValue:a.value.row.timeout,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.row.timeout=l),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"状态",prop:"clientStatusCd"},{default:t(()=>[o(w,{modelValue:a.value.row.clientStatusCd,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.row.clientStatusCd=l),clearable:"",placeholder:"请选择状态"},{default:t(()=>[(d(!0),c(g,null,C(_(y).getDictOptions("sys_client_status"),l=>(d(),s(V,{key:l.id,label:l.codeName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"备注",prop:"remark"},{default:t(()=>[o(b,{modelValue:a.value.row.remark,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.row.remark=l),placeholder:"请填写备注",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{M as _};
