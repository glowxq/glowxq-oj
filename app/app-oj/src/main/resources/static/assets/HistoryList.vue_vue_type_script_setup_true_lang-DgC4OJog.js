import{_ as v}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{h as a,aP as l,d as F,r as p,bc as k,aB as S,f as N,o as A,c as C,j as u,k as y,a as w}from"./index-DTkCE7MD.js";const E=e=>a.get(l+"/sys-temp-file",e),H=e=>a.post(l+"/sys-temp-file",e),O=e=>a.put(l+"/sys-temp-file",e),U=e=>a.delete(l+"/sys-temp-file",e),M=e=>{const{id:n}=e;return a.get(l+`/sys-temp-file/${n}`)},x=e=>a.get(l+"/sys-temp-file-history/history",e),I={class:"dialog-table-box"},L=["onClick"],P=F({name:"SysTemplateHistoryList",__name:"HistoryList",setup(e,{expose:n}){const r=p(!1),c=p();n({show:s=>{m.sysTempFileId=s.id,c.value=s,r.value=!0}});const f=k(),_=[{prop:"sysTempFileId",label:"模板标识",width:120},{prop:"sysFileId",label:"文件标识",width:120},{prop:"tempName",label:"模版名",tag:!0},{prop:"url",label:"文件",width:120},{prop:"remark",label:"备注"},{prop:"createId",label:"创建人",tag:!0,enum:f.getDictOptions("dynamic_user_options"),fieldNames:{label:"codeName",value:"id",tagType:"callbackShowStyle"}},{prop:"createTime",label:"创建时间"}],m=S({sysTempFileId:0}),b=p(),h=s=>x(s),g=s=>{const t=document.createElement("a");t.style.display="none",t.href=s;const o=T(s);t.setAttribute("download",o),document.body.appendChild(t),t.click(),document.body.removeChild(t)},T=s=>{const t=/\/([^/]+)$/,o=s.match(t);return o?o[1]:""};return(s,t)=>{var d;const o=N("el-dialog");return A(),C("div",I,[u(o,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),title:`模板: ${(d=c.value)==null?void 0:d.tempName}`,width:"90%","destroy-on-close":!0,"close-on-click-modal":!1,"append-to-body":""},{default:y(()=>[u(v,{ref_key:"proTableRef",ref:b,title:"历史记录",indent:20,columns:_,"request-api":h,"init-param":m},{url:y(({row:i})=>[w("a",{href:"#",target:"_blank",onClick:$=>g(i==null?void 0:i.url)},"下载",8,L)]),_:1},8,["init-param"])]),_:1},8,["modelValue","title"])])}}});export{P as _,M as a,H as c,E as g,U as r,O as u};
