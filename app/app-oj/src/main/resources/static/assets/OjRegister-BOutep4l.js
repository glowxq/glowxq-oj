import{d as B,q as I,v as O,r as V,b as h,aB as x,e as j,f as n,o as y,c as q,a as s,j as a,k as l,y as p,u as i,F as D,dX as J,dW as L,dV as z,d_ as F,x as T,B as E,m as K,aJ as S,W as b,a1 as W,_ as A}from"./index-DTkCE7MD.js";import{b as G}from"./userInfo-CIsM0YAT.js";import{U as X}from"./Img-CbqiKKTP.js";import"./upload-BtJOZC1L.js";const $={class:"oj-register-container"},H={class:"form-card"},P={class:"form-row"},Q={class:"form-row"},Z={class:"form-row"},ee={class:"form-row"},ae={class:"avatar-upload-wrapper"},le={class:"register-actions"},te=B({__name:"OjRegister",emits:["updateLeftContent"],setup(oe,{emit:k}){const N=k,U=I(),c=O(),g=V(),d=V(!1);h(()=>({tenantId:c.tenantId,tenantName:c.tenantName,systemName:c.systemName}));const t=x({name:"",nickName:"",phone:"",email:"",avatar:"",sex:"0",birthday:"",groupCode:""}),C=x({name:[{required:!0,message:"è¯·è¾“å…¥çœŸå®å§“å",trigger:"blur"},{min:2,max:20,message:"å§“åé•¿åº¦åº”åœ¨ 2 åˆ° 20 ä¸ªå­—ç¬¦ä¹‹é—´",trigger:"blur"}],nickName:[{required:!0,message:"è¯·è¾“å…¥æ˜µç§°",trigger:"blur"},{min:2,max:15,message:"æ˜µç§°é•¿åº¦åº”åœ¨ 2 åˆ° 15 ä¸ªå­—ç¬¦ä¹‹é—´",trigger:"blur"}],phone:[{required:!0,message:"è¯·è¾“å…¥æ‰‹æœºå·",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",trigger:"blur"}],email:[{type:"email",message:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",trigger:"blur"}]}),v=async()=>{if(console.log("OJæ³¨å†Œè¢«è°ƒç”¨"),!g.value){console.error("è¡¨å•å¼•ç”¨ä¸ºç©º");return}if(d.value){console.log("æ­£åœ¨æäº¤ä¸­ï¼Œè¯·å‹¿é‡å¤ç‚¹å‡»");return}try{await g.value.validate()}catch{console.log("è¡¨å•éªŒè¯å¤±è´¥");return}if(!t.name){b.error("è¯·è¾“å…¥çœŸå®å§“å");return}console.log("OJæ³¨å†Œè¡¨å•æ•°æ®:",t),d.value=!0;try{await G(t),b.success("æ³¨å†ŒæˆåŠŸï¼Œå³å°†è·³è½¬åˆ°ç™»å½•é¡µ"),setTimeout(()=>{U.push(W)},1500)}catch(f){console.error("OJæ³¨å†Œå¤±è´¥:",f),b.error(f.message||"æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{d.value=!1}};return j(()=>{N("updateLeftContent",{title:"æ¬¢è¿åŠ å…¥ç¼–ç¨‹å­¦ä¹ ",subtitle:"å¼€å¯ä½ çš„ä»£ç ä¹‹æ—…",features:[{icon:"ğŸ’»",text:"åœ¨çº¿ç¼–ç¨‹ç»ƒä¹ "},{icon:"ğŸ†",text:"ç®—æ³•ç«èµ›ç³»ç»Ÿ"},{icon:"ğŸ“š",text:"ä¸°å¯Œé¢˜åº“èµ„æº"},{icon:"ğŸ‘¥",text:"å­¦ä¹ å°ç»„åä½œ"}]})}),(f,e)=>{const m=n("el-icon"),u=n("el-input"),r=n("el-form-item"),_=n("el-option"),w=n("el-select"),R=n("el-date-picker"),Y=n("el-button"),M=n("el-form");return y(),q("div",$,[s("div",H,[e[17]||(e[17]=s("div",{class:"form-header"},[s("h3",{class:"form-title"},"å­¦å‘˜ä¿¡æ¯æ³¨å†Œ")],-1)),a(M,{ref_key:"registerFormRef",ref:g,model:t,rules:C,"label-position":"top",size:"default",onKeyup:S(v,["enter"]),class:"register-form"},{default:l(()=>[s("div",P,[a(r,{prop:"name",class:"form-item"},{label:l(()=>e[8]||(e[8]=[p("çœŸå®å§“å")])),default:l(()=>[a(u,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"è¯·è¾“å…¥çœŸå®å§“å",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(D))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"nickName",class:"form-item"},{label:l(()=>e[9]||(e[9]=[p("æ˜µç§°")])),default:l(()=>[a(u,{modelValue:t.nickName,"onUpdate:modelValue":e[1]||(e[1]=o=>t.nickName=o),placeholder:"è¯·è¾“å…¥æ˜µç§°",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(J))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",Q,[a(r,{prop:"phone",class:"form-item"},{label:l(()=>e[10]||(e[10]=[p("æ‰‹æœºå·")])),default:l(()=>[a(u,{modelValue:t.phone,"onUpdate:modelValue":e[2]||(e[2]=o=>t.phone=o),placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(L))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"email",class:"form-item"},{label:l(()=>e[11]||(e[11]=[p("é‚®ç®±")])),default:l(()=>[a(u,{modelValue:t.email,"onUpdate:modelValue":e[3]||(e[3]=o=>t.email=o),placeholder:"è¯·è¾“å…¥é‚®ç®±",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(z))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",Z,[a(r,{prop:"sex",class:"form-item"},{label:l(()=>e[12]||(e[12]=[s("span",{class:"form-label"},"æ€§åˆ«",-1)])),default:l(()=>[a(w,{modelValue:t.sex,"onUpdate:modelValue":e[4]||(e[4]=o=>t.sex=o),placeholder:"è¯·é€‰æ‹©æ€§åˆ«",class:"compact-select"},{default:l(()=>[a(_,{label:"æœªçŸ¥",value:"0"}),a(_,{label:"ç”·",value:"1"}),a(_,{label:"å¥³",value:"2"})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"birthday",class:"form-item"},{label:l(()=>e[13]||(e[13]=[s("span",{class:"form-label"},"ç”Ÿæ—¥",-1)])),default:l(()=>[a(R,{modelValue:t.birthday,"onUpdate:modelValue":e[5]||(e[5]=o=>t.birthday=o),type:"date",placeholder:"è¯·é€‰æ‹©ç”Ÿæ—¥",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"compact-date-picker"},null,8,["modelValue"])]),_:1})]),s("div",ee,[a(r,{prop:"groupCode",class:"form-item"},{label:l(()=>e[14]||(e[14]=[s("span",{class:"form-label"},"ç­çº§ä»£ç ",-1)])),default:l(()=>[a(u,{modelValue:t.groupCode,"onUpdate:modelValue":e[6]||(e[6]=o=>t.groupCode=o),placeholder:"è¯·è¾“å…¥ç­çº§ä»£ç ",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(F))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"avatar",class:"form-item avatar-item"},{label:l(()=>e[15]||(e[15]=[s("span",{class:"form-label"},"å¤´åƒ",-1)])),default:l(()=>[s("div",ae,[a(X,{"image-url":t.avatar,"onUpdate:imageUrl":e[7]||(e[7]=o=>t.avatar=o),limit:1,"file-size":2,dir:"avatar",height:"60px",width:"60px",class:"avatar-uploader"},null,8,["image-url"])])]),_:1})]),s("div",le,[a(Y,{type:"primary",loading:d.value,class:"register-button",size:"large",onClick:v},{default:l(()=>[d.value?K("",!0):(y(),T(m,{key:0,class:"button-icon"},{default:l(()=>[a(i(E))]),_:1})),e[16]||(e[16]=p(" å®Œæˆæ³¨å†Œ "))]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])])}}}),ie=A(te,[["__scopeId","data-v-f91c701f"]]);export{ie as default};
