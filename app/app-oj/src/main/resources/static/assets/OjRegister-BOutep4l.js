import{d as B,q as I,v as O,r as V,b as h,aB as x,e as j,f as n,o as y,c as q,a as s,j as a,k as l,y as p,u as i,F as D,dX as J,dW as L,dV as z,d_ as F,x as T,B as E,m as K,aJ as S,W as b,a1 as W,_ as A}from"./index-DTkCE7MD.js";import{b as G}from"./userInfo-CIsM0YAT.js";import{U as X}from"./Img-CbqiKKTP.js";import"./upload-BtJOZC1L.js";const $={class:"oj-register-container"},H={class:"form-card"},P={class:"form-row"},Q={class:"form-row"},Z={class:"form-row"},ee={class:"form-row"},ae={class:"avatar-upload-wrapper"},le={class:"register-actions"},te=B({__name:"OjRegister",emits:["updateLeftContent"],setup(oe,{emit:k}){const N=k,U=I(),c=O(),g=V(),d=V(!1);h(()=>({tenantId:c.tenantId,tenantName:c.tenantName,systemName:c.systemName}));const t=x({name:"",nickName:"",phone:"",email:"",avatar:"",sex:"0",birthday:"",groupCode:""}),C=x({name:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度应在 2 到 20 个字符之间",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:15,message:"昵称长度应在 2 到 15 个字符之间",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]}),v=async()=>{if(console.log("OJ注册被调用"),!g.value){console.error("表单引用为空");return}if(d.value){console.log("正在提交中，请勿重复点击");return}try{await g.value.validate()}catch{console.log("表单验证失败");return}if(!t.name){b.error("请输入真实姓名");return}console.log("OJ注册表单数据:",t),d.value=!0;try{await G(t),b.success("注册成功，即将跳转到登录页"),setTimeout(()=>{U.push(W)},1500)}catch(f){console.error("OJ注册失败:",f),b.error(f.message||"注册失败，请稍后重试")}finally{d.value=!1}};return j(()=>{N("updateLeftContent",{title:"欢迎加入编程学习",subtitle:"开启你的代码之旅",features:[{icon:"💻",text:"在线编程练习"},{icon:"🏆",text:"算法竞赛系统"},{icon:"📚",text:"丰富题库资源"},{icon:"👥",text:"学习小组协作"}]})}),(f,e)=>{const m=n("el-icon"),u=n("el-input"),r=n("el-form-item"),_=n("el-option"),w=n("el-select"),R=n("el-date-picker"),Y=n("el-button"),M=n("el-form");return y(),q("div",$,[s("div",H,[e[17]||(e[17]=s("div",{class:"form-header"},[s("h3",{class:"form-title"},"学员信息注册")],-1)),a(M,{ref_key:"registerFormRef",ref:g,model:t,rules:C,"label-position":"top",size:"default",onKeyup:S(v,["enter"]),class:"register-form"},{default:l(()=>[s("div",P,[a(r,{prop:"name",class:"form-item"},{label:l(()=>e[8]||(e[8]=[p("真实姓名")])),default:l(()=>[a(u,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"请输入真实姓名",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(D))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"nickName",class:"form-item"},{label:l(()=>e[9]||(e[9]=[p("昵称")])),default:l(()=>[a(u,{modelValue:t.nickName,"onUpdate:modelValue":e[1]||(e[1]=o=>t.nickName=o),placeholder:"请输入昵称",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(J))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",Q,[a(r,{prop:"phone",class:"form-item"},{label:l(()=>e[10]||(e[10]=[p("手机号")])),default:l(()=>[a(u,{modelValue:t.phone,"onUpdate:modelValue":e[2]||(e[2]=o=>t.phone=o),placeholder:"请输入手机号",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(L))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"email",class:"form-item"},{label:l(()=>e[11]||(e[11]=[p("邮箱")])),default:l(()=>[a(u,{modelValue:t.email,"onUpdate:modelValue":e[3]||(e[3]=o=>t.email=o),placeholder:"请输入邮箱",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(z))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),s("div",Z,[a(r,{prop:"sex",class:"form-item"},{label:l(()=>e[12]||(e[12]=[s("span",{class:"form-label"},"性别",-1)])),default:l(()=>[a(w,{modelValue:t.sex,"onUpdate:modelValue":e[4]||(e[4]=o=>t.sex=o),placeholder:"请选择性别",class:"compact-select"},{default:l(()=>[a(_,{label:"未知",value:"0"}),a(_,{label:"男",value:"1"}),a(_,{label:"女",value:"2"})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"birthday",class:"form-item"},{label:l(()=>e[13]||(e[13]=[s("span",{class:"form-label"},"生日",-1)])),default:l(()=>[a(R,{modelValue:t.birthday,"onUpdate:modelValue":e[5]||(e[5]=o=>t.birthday=o),type:"date",placeholder:"请选择生日",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"compact-date-picker"},null,8,["modelValue"])]),_:1})]),s("div",ee,[a(r,{prop:"groupCode",class:"form-item"},{label:l(()=>e[14]||(e[14]=[s("span",{class:"form-label"},"班级代码",-1)])),default:l(()=>[a(u,{modelValue:t.groupCode,"onUpdate:modelValue":e[6]||(e[6]=o=>t.groupCode=o),placeholder:"请输入班级代码",clearable:"",class:"compact-input"},{prefix:l(()=>[a(m,null,{default:l(()=>[a(i(F))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"avatar",class:"form-item avatar-item"},{label:l(()=>e[15]||(e[15]=[s("span",{class:"form-label"},"头像",-1)])),default:l(()=>[s("div",ae,[a(X,{"image-url":t.avatar,"onUpdate:imageUrl":e[7]||(e[7]=o=>t.avatar=o),limit:1,"file-size":2,dir:"avatar",height:"60px",width:"60px",class:"avatar-uploader"},null,8,["image-url"])])]),_:1})]),s("div",le,[a(Y,{type:"primary",loading:d.value,class:"register-button",size:"large",onClick:v},{default:l(()=>[d.value?K("",!0):(y(),T(m,{key:0,class:"button-icon"},{default:l(()=>[a(i(E))]),_:1})),e[16]||(e[16]=p(" 完成注册 "))]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])])}}}),ie=A(te,[["__scopeId","data-v-f91c701f"]]);export{ie as default};
