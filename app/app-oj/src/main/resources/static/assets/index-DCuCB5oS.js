import{d as A,a3 as L,q as O,s as W,ad as F,r as v,b as S,e as H,o as a,c as d,a as o,j as l,k as u,u as i,a9 as P,t as n,m as w,x as m,y as Y,by as z,ds as G,R as C,W as x,f as _,p as K,_ as Q}from"./index-DTkCE7MD.js";import{g as X}from"./topic-DtpaBxBf.js";import{T as N}from"./TopicType-BfRQGLIH.js";import{T as Z}from"./TopicJudgeType-B4cJ_xct.js";import{T as ee}from"./TimeRangeType-BW_JmSm6.js";import oe from"./TopicRankingTable-CPsxc5fH.js";import te from"./TopicSubmitTable-CUJKBJN6.js";import"./topicInfo-BsE0LD6L.js";import"./TopicInfoStatus-BMpq3Jyc.js";import"./topicSubmit-D3ViFuzS.js";import"./JudgeStatusShow-BtDm6N5o.js";import"./JudgeStatus-By11LX14.js";import"./FileSaver.min-BnsyPtRb.js";const se={class:"topic-detail-container"},ae={class:"topic-nav"},ie={class:"topic-title"},ne={key:0,class:"topic-code"},le={class:"topic-actions"},ce={class:"info-section"},re={class:"card-header"},de={class:"info-content"},ue={class:"info-row"},pe={class:"info-value"},ve={class:"info-row"},fe={class:"info-label"},me={class:"info-value"},_e={key:1},ye={class:"info-row"},ge={class:"info-value"},Te={key:1},be={class:"info-row"},he={class:"info-value"},ke={key:1},Se={class:"info-row"},we={class:"info-value"},Ce={class:"info-row"},xe={class:"info-value"},De={key:0,class:"info-row"},Re={class:"info-value description"},je=A({__name:"index",setup(Ve){K(s=>({"1280f7c8":i(g)}));const B=L(),y=O(),J=W(),{primary:g}=F(J),t=v({}),f=S(()=>Number(B.params.id)),D=v([]),R=v(!1),j=v(!1),T=v(0),M=S(()=>{const s=t.value.enable;return typeof s=="boolean"?s:typeof s=="string"?s==="true":typeof s=="number"?s===1:!1}),V=S(()=>{if(!t.value.topicType)return"主题";const s=t.value.topicType,e=Object.values(N).find(r=>r.code===s);return e?e.name:"主题"}),p=s=>`${V.value}${s}`,I=()=>{y.back()},U=()=>{t.value.id&&y.push({path:`/oj/topic/doTopic/${t.value.id}`,query:{topicName:t.value.name,topicCode:t.value.code}})},$=s=>{if(!s)return"";const e=new Date(s),r=e.getFullYear(),b=(e.getMonth()+1).toString().padStart(2,"0"),h=e.getDate().toString().padStart(2,"0"),k=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0");return`${r}-${b}-${h} ${k}:${c}`},E=s=>{T.value++;const e=T.value;setTimeout(()=>{e===T.value&&x.error(s)},300)},q=async()=>{if(!f.value){x.error("主题ID无效"),y.back();return}try{const s=await X({id:f.value});s.data&&(t.value=s.data)}catch(s){console.error("获取数据失败",s),x.error("获取数据失败，请稍后重试")}};return H(()=>{q()}),(s,e)=>{const r=_("el-icon"),b=_("el-button"),h=_("el-collapse-item"),k=_("el-collapse");return a(),d("div",se,[o("div",ae,[o("div",{class:"back-button",onClick:I},[l(r,null,{default:u(()=>[l(i(P))]),_:1}),e[3]||(e[3]=o("span",null,"返回",-1))]),o("div",ie,[o("h1",null,n(t.value.name||p("详情")),1),t.value.code?(a(),d("div",ne,n(t.value.code),1)):w("",!0)]),o("div",le,[M.value?(a(),m(b,{key:0,type:"primary",onClick:U,icon:i(z),class:"action-button"},{default:u(()=>[Y(" 进入"+n(V.value),1)]),_:1},8,["icon"])):w("",!0)])]),o("div",ce,[l(k,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=c=>D.value=c),accordion:"",class:"custom-collapse"},{default:u(()=>[l(h,{name:"info"},{title:u(()=>[o("div",re,[l(r,null,{default:u(()=>[l(i(G))]),_:1}),o("span",null,n(p("基本信息")),1)])]),default:u(()=>[o("div",de,[o("div",ue,[e[4]||(e[4]=o("div",{class:"info-label"},"负责人",-1)),o("div",pe,n(t.value.principalName||"未设置"),1)]),o("div",ve,[o("div",fe,n(p("类型")),1),o("div",me,[t.value.topicType?(a(),m(C,{key:0,enum:i(N),code:t.value.topicType},null,8,["enum","code"])):(a(),d("span",_e,"未设置"))])]),o("div",ye,[e[5]||(e[5]=o("div",{class:"info-label"},"判题模式",-1)),o("div",ge,[t.value.topicJudgeType?(a(),m(C,{key:0,enum:i(Z),code:t.value.topicJudgeType},null,8,["enum","code"])):(a(),d("span",Te,"未设置"))])]),o("div",be,[e[6]||(e[6]=o("div",{class:"info-label"},"时间策略",-1)),o("div",he,[t.value.timeRangeType?(a(),m(C,{key:0,enum:i(ee),code:t.value.timeRangeType},null,8,["enum","code"])):(a(),d("span",ke,"未设置"))])]),o("div",Se,[e[7]||(e[7]=o("div",{class:"info-label"},"开始时间",-1)),o("div",we,n($(t.value.startTime)||"未设置"),1)]),o("div",Ce,[e[8]||(e[8]=o("div",{class:"info-label"},"结束时间",-1)),o("div",xe,n($(t.value.endTime)||"未设置"),1)]),t.value.description?(a(),d("div",De,[e[9]||(e[9]=o("div",{class:"info-label"},"描述",-1)),o("div",Re,n(t.value.description),1)])):w("",!0)])]),_:1})]),_:1},8,["modelValue"])]),l(te,{"topic-id":f.value,title:p("做题情况"),"topic-judge-type":t.value.topicJudgeType||0,"topic-name":t.value.name,"header-bg-color":i(g),loading:j.value,"onUpdate:loading":e[1]||(e[1]=c=>j.value=c),onError:E},null,8,["topic-id","title","topic-judge-type","topic-name","header-bg-color","loading"]),l(oe,{"topic-id":f.value,title:p("排行榜"),"header-bg-color":i(g),"default-judge-type":t.value.topicJudgeType||0,loading:R.value,"onUpdate:loading":e[2]||(e[2]=c=>R.value=c),onError:E},null,8,["topic-id","title","header-bg-color","default-judge-type","loading"])])}}}),Fe=Q(je,[["__scopeId","data-v-3bccff20"]]);export{Fe as default};
