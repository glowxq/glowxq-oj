import{h as s,O as c,d as S,r as _,f as N,g as O,o as n,c as q,j as y,k as p,i as d,x as u,u as b,a_ as B,y as f,a$ as g,D as J,b0 as V,b1 as H}from"./index-DTkCE7MD.js";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as I}from"./useHandleData-BdxQ-8Ab.js";import{_ as j}from"./TopicProblemForm.vue_vue_type_script_setup_true_lang-BA4zfkWa.js";import{I as F,d as M,u as U}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const z=a=>s.get(c+"/topic-problem",a),G=a=>s.post(c+"/topic-problem",a),K=a=>s.put(c+"/topic-problem",a),C=a=>s.delete(c+"/topic-problem",a),Q=a=>{const{id:i}=a;return s.get(c+`/topic-problem/${i}`)},W=(a,i)=>s.upload(c+"/topic-problem/import",a,i),X=a=>s.download(c+"/topic-problem/export",a),Y={class:"table-box"},re=S({name:"TopicProblemView",__name:"index",setup(a){const i=_(),D=[{type:"selection",width:80},{prop:"topicId",label:"主题ID"},{prop:"problemId",label:"题目ID"},{prop:"required",label:"必填"},{prop:"operation",label:"操作",width:250,fixed:"right"}],w=[{prop:"topicId",label:"主题ID",el:"input"},{prop:"problemId",label:"题目ID",el:"input"},{prop:"required",label:"必填",el:"input"}],E=t=>{let e=v(t);return z(e)},v=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},k=_(),P=async(t,e={},o=!0)=>{var l,m;if(!o){const T=await Q({id:e==null?void 0:e.id});e=T==null?void 0:T.data}const r={title:t,row:{...e},api:o?G:K,getTableList:(l=i.value)==null?void 0:l.getTableList};(m=k.value)==null||m.acceptParams(r)},L=async t=>{var e;await I(C,{ids:[t.id]},`删除【${t.id}】主题题目`),(e=i.value)==null||e.getTableList()},A=async t=>{var e,o;await I(C,{ids:t},"删除所选主题题目"),(e=i.value)==null||e.clearSelection(),(o=i.value)==null||o.getTableList()},x=_(),$=()=>{var e,o;const t={title:"主题题目",templateName:"主题题目",tempApi:M,importApi:W,getTableList:(e=i.value)==null?void 0:e.getTableList};(o=x.value)==null||o.acceptParams(t)},R=async()=>{var e;let t=v((e=i.value)==null?void 0:e.searchParam);U(X,"主题题目",t)};return(t,e)=>{const o=N("el-button"),r=O("auth");return n(),q("div",Y,[y(h,{ref_key:"proTableRef",ref:i,title:"主题题目",indent:20,columns:D,"search-columns":w,"request-api":E,"row-key":"id"},{tableHeader:p(l=>[d((n(),u(o,{type:"primary",icon:b(B),onClick:e[0]||(e[0]=m=>P("新增主题题目"))},{default:p(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[r,"topic.problem.create"]]),d((n(),u(o,{type:"danger",icon:b(g),plain:"",disabled:!l.isSelected,onClick:m=>A(l.selectedListIds)},{default:p(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[r,"topic.problem.remove"]]),d((n(),u(o,{type:"primary",icon:b(J),plain:"",onClick:$},{default:p(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[r,"topic.problem.import"]]),d((n(),u(o,{type:"primary",icon:b(V),plain:"",onClick:R},{default:p(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[r,"topic.problem.export"]])]),operation:p(({row:l})=>[d((n(),u(o,{type:"primary",link:"",icon:b(H),onClick:m=>P("编辑主题题目",l,!1)},{default:p(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[r,"topic.problem.update"]]),d((n(),u(o,{type:"primary",link:"",icon:b(g),onClick:m=>L(l)},{default:p(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[r,"topic.problem.remove"]])]),_:1},512),y(j,{ref_key:"topicProblemRef",ref:k},null,512),y(F,{ref_key:"ImportExcelRef",ref:x},null,512)])}}});export{re as default};
