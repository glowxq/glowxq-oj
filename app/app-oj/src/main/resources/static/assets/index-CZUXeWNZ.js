import{h as s,O as u,d as $,r as g,f as P,g as I,o as n,c as R,j as T,k as i,i as m,x as c,u as b,a_ as O,y as f,a$ as x,D as B,b0 as F,b1 as M}from"./index-DTkCE7MD.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as S}from"./useHandleData-BdxQ-8Ab.js";import{_ as H}from"./JudgeServerForm.vue_vue_type_script_setup_true_lang-Dg6SBoLd.js";import{I as h,d as q,u as U}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const z=a=>s.get(u+"/judge-server",a),G=a=>s.post(u+"/judge-server",a),K=a=>s.put(u+"/judge-server",a),C=a=>s.delete(u+"/judge-server",a),Q=a=>{const{id:l}=a;return s.get(u+`/judge-server/${l}`)},W=(a,l)=>s.upload(u+"/judge-server/import",a,l),X=a=>s.download(u+"/judge-server/export",a),Y={class:"table-box"},pe=$({name:"JudgeServerView",__name:"index",setup(a){const l=g(),E=[{type:"selection",width:80},{prop:"name",label:"判题服务名字"},{prop:"ip",label:"判题机ip"},{prop:"port",label:"判题机端口号"},{prop:"url",label:"ip:port"},{prop:"cpuCore",label:"判题机所在服务器cpu核心数"},{prop:"freeMemory",label:"判题机所在服务器空闲内存"},{prop:"taskNumber",label:"当前判题数"},{prop:"maxTaskNumber",label:"判题并发最大数"},{prop:"enable",label:"0禁用|1启用"},{prop:"remoteEnable",label:"是否开启远程判题vj"},{prop:"cfSubmittableEnable",label:"是否可提交CF"},{prop:"operation",label:"操作",width:250,fixed:"right"}],w=[{prop:"name",label:"判题服务名字",el:"input"},{prop:"ip",label:"判题机ip",el:"input"},{prop:"port",label:"判题机端口号",el:"input"},{prop:"url",label:"ip:port",el:"input"},{prop:"cpuCore",label:"判题机所在服务器cpu核心数",el:"input"},{prop:"freeMemory",label:"判题机所在服务器空闲内存",el:"input"},{prop:"taskNumber",label:"当前判题数",el:"input"},{prop:"maxTaskNumber",label:"判题并发最大数",el:"input"},{prop:"enable",label:"0禁用|1启用",el:"input"},{prop:"remoteEnable",label:"是否开启远程判题vj",el:"input"},{prop:"cfSubmittableEnable",label:"是否可提交CF",el:"input"}],J=t=>{let e=_(t);return z(e)},_=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},y=g(),k=async(t,e={},r=!0)=>{var o,d;if(!r){const v=await Q({id:e==null?void 0:e.id});e=v==null?void 0:v.data}const p={title:t,row:{...e},api:r?G:K,getTableList:(o=l.value)==null?void 0:o.getTableList};(d=y.value)==null||d.acceptParams(p)},L=async t=>{var e;await S(C,{ids:[t.id]},`删除【${t.id}】测评服务`),(e=l.value)==null||e.getTableList()},A=async t=>{var e,r;await S(C,{ids:t},"删除所选测评服务"),(e=l.value)==null||e.clearSelection(),(r=l.value)==null||r.getTableList()},j=g(),D=()=>{var e,r;const t={title:"测评服务",templateName:"测评服务",tempApi:q,importApi:W,getTableList:(e=l.value)==null?void 0:e.getTableList};(r=j.value)==null||r.acceptParams(t)},N=async()=>{var e;let t=_((e=l.value)==null?void 0:e.searchParam);U(X,"测评服务",t)};return(t,e)=>{const r=P("el-button"),p=I("auth");return n(),R("div",Y,[T(V,{ref_key:"proTableRef",ref:l,title:"测评服务",indent:20,columns:E,"search-columns":w,"request-api":J,"row-key":"id"},{tableHeader:i(o=>[m((n(),c(r,{type:"primary",icon:b(O),onClick:e[0]||(e[0]=d=>k("新增测评服务"))},{default:i(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[p,"judge.server.create"]]),m((n(),c(r,{type:"danger",icon:b(x),plain:"",disabled:!o.isSelected,onClick:d=>A(o.selectedListIds)},{default:i(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[p,"judge.server.remove"]]),m((n(),c(r,{type:"primary",icon:b(B),plain:"",onClick:D},{default:i(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[p,"judge.server.import"]]),m((n(),c(r,{type:"primary",icon:b(F),plain:"",onClick:N},{default:i(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[p,"judge.server.export"]])]),operation:i(({row:o})=>[m((n(),c(r,{type:"primary",link:"",icon:b(M),onClick:d=>k("编辑测评服务",o,!1)},{default:i(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[p,"judge.server.update"]]),m((n(),c(r,{type:"primary",link:"",icon:b(x),onClick:d=>L(o)},{default:i(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[p,"judge.server.remove"]])]),_:1},512),T(H,{ref_key:"judgeServerRef",ref:y},null,512),T(h,{ref_key:"ImportExcelRef",ref:j},null,512)])}}});export{pe as default};
