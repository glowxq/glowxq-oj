import{d as z,aB as H,r as p,f as d,o as v,x,k as o,j as l,y as h,t as R,m as $,T as A,u as w,bp as Q,a as b,ds as W,c as P,P as G,Q as J,W as K,_ as X}from"./index-DTkCE7MD.js";import{U as q}from"./Img-CbqiKKTP.js";import{C as Z}from"./ColorSelect-DZmuTeqD.js";import{M as ee}from"./index-E5zgXN01.js";import{M as le}from"./MdPreview-CyycvVxJ.js";import"./upload-BtJOZC1L.js";import"./style-DrPmFrlE.js";import"./FileSaver.min-BnsyPtRb.js";const ae={class:"password-tip"},oe={key:0,class:"markdown-preview-container"},te=z({name:"TenantForm",__name:"TenantForm",setup(re,{expose:D}){const E=H({tenantCode:[{required:!0,message:"请填写租户编码，唯一标识"}],tenantName:[{required:!0,message:"请填写租户名称"}],contactName:[{required:!0,message:"请填写联系人姓名"}],contactPhone:[{required:!0,message:"请填写联系人手机号"}],contactEmail:[],show:[{required:!0,message:"请选择是否显示"}],password:[],enable:[{required:!0,message:"请选择状态"}],expiredTime:[{required:!0,message:"请选择到期时间"}],maxUserNum:[{required:!0,message:"请填写最大用户数"}]}),i=p(!1),V=p("basic"),e=p({title:"",row:{},api:void 0,getTableList:void 0,readonly:!1}),g=p("#FFFFFF"),U=[{label:"基础版（3个月）",value:"basic3",expiredTime:3,maxUserNum:10,price:999},{label:"基础版（1年）",value:"basic12",expiredTime:12,maxUserNum:10,price:2999},{label:"标准版（3个月）",value:"standard3",expiredTime:3,maxUserNum:50,price:1999},{label:"标准版（1年）",value:"standard12",expiredTime:12,maxUserNum:50,price:5999},{label:"企业版（3个月）",value:"enterprise3",expiredTime:3,maxUserNum:200,price:3999},{label:"企业版（1年）",value:"enterprise12",expiredTime:12,maxUserNum:200,price:11999},{label:"自定义",value:"custom"}],N=p(""),I=s=>{const a=U.find(u=>u.value===s);if(a&&s!=="custom"){const u=new Date,r=new Date(u);r.setMonth(u.getMonth()+(a.expiredTime||0)),e.value.row.expiredTime=r.toISOString().slice(0,19).replace("T"," "),e.value.row.maxUserNum=a.maxUserNum,e.value.row.currentUserNum=0}},S=s=>{e.value=s,e.value.row.themeColor||(e.value.row.themeColor="#009688"),e.value.row.currentUserNum===void 0&&(e.value.row.currentUserNum=0),e.value.row.enable===void 0&&(e.value.row.enable=!0),e.value.row.show===void 0&&(e.value.row.show=!0),(e.value.row.text===void 0||e.value.row.text===null)&&(e.value.row.text=""),i.value=!0},y=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let a="";for(let u=0;u<12;u++)a+=s.charAt(Math.floor(Math.random()*s.length));e.value.row.password=a},C=p(),k=()=>{C.value.validate(async s=>{if(s)try{await e.value.api(e.value.row),K.success({message:`${e.value.title}成功！`}),e.value.getTableList(),i.value=!1}catch(a){console.log(a)}})};return D({acceptParams:S}),(s,a)=>{const u=d("el-input"),r=d("el-form-item"),n=d("el-col"),m=d("el-row"),T=d("el-icon"),_=d("el-button"),B=d("el-option"),L=d("el-select"),Y=d("el-date-picker"),F=d("el-input-number"),M=d("el-switch"),c=d("el-form"),f=d("el-tab-pane"),j=d("el-tabs"),O=d("el-dialog");return v(),x(O,{modelValue:i.value,"onUpdate:modelValue":a[23]||(a[23]=t=>i.value=t),title:e.value.title,"destroy-on-close":!0,width:"800px",draggable:""},{footer:o(()=>[l(_,{onClick:a[22]||(a[22]=t=>i.value=!1)},{default:o(()=>[h(R(e.value.readonly?"关闭":"取消"),1)]),_:1}),e.value.readonly?$("",!0):(v(),x(_,{key:0,type:"primary",onClick:k},{default:o(()=>a[27]||(a[27]=[h("确定")])),_:1}))]),default:o(()=>[l(j,{modelValue:V.value,"onUpdate:modelValue":a[21]||(a[21]=t=>V.value=t),class:"tenant-tabs"},{default:o(()=>[l(f,{label:"基本信息",name:"basic"},{default:o(()=>[l(c,{ref_key:"ruleFormRef",ref:C,"label-width":"140px","label-suffix":" :",rules:e.value.readonly?{}:E,model:e.value.row,disabled:e.value.readonly,onSubmit:A(k,["prevent"])},{default:o(()=>[l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"租户编码",prop:"tenantCode"},{default:o(()=>[l(u,{modelValue:e.value.row.tenantCode,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.row.tenantCode=t),placeholder:"请填写租户编码，唯一标识",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"租户名称",prop:"tenantName"},{default:o(()=>[l(u,{modelValue:e.value.row.tenantName,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.row.tenantName=t),placeholder:"请填写租户名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"联系人姓名",prop:"contactName"},{default:o(()=>[l(u,{modelValue:e.value.row.contactName,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.row.contactName=t),placeholder:"请填写联系人姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"联系人手机号",prop:"contactPhone"},{default:o(()=>[l(u,{modelValue:e.value.row.contactPhone,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.row.contactPhone=t),placeholder:"请填写联系人手机号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"联系人邮箱",prop:"contactEmail"},{default:o(()=>[l(u,{modelValue:e.value.row.contactEmail,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.row.contactEmail=t),placeholder:"选填，请填写联系人邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"租户密码",prop:"password"},{default:o(()=>[l(u,{modelValue:e.value.row.password,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.row.password=t),placeholder:"请填写租户密码，不填则无需密码验证",clearable:"","onClick:append":y},{append:o(()=>[l(_,{onClick:y},{default:o(()=>[l(T,null,{default:o(()=>[l(w(Q))]),_:1})]),_:1})]),_:1},8,["modelValue"]),b("div",ae,[l(T,null,{default:o(()=>[l(w(W))]),_:1}),a[24]||(a[24]=b("span",null,"设置密码后，用户切换租户时需要输入密码验证",-1))])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"套餐选择",prop:"package"},{default:o(()=>[l(L,{modelValue:N.value,"onUpdate:modelValue":a[6]||(a[6]=t=>N.value=t),placeholder:"请选择套餐",onChange:I},{default:o(()=>[(v(),P(G,null,J(U,t=>l(B,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"到期时间",prop:"expiredTime"},{default:o(()=>[l(Y,{clearable:"",modelValue:e.value.row.expiredTime,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.row.expiredTime=t),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择到期时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"最大用户数",prop:"maxUserNum"},{default:o(()=>[l(F,{modelValue:e.value.row.maxUserNum,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value.row.maxUserNum=t),precision:0,min:1,max:999999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"当前用户数",prop:"currentUserNum"},{default:o(()=>[l(F,{modelValue:e.value.row.currentUserNum,"onUpdate:modelValue":a[9]||(a[9]=t=>e.value.row.currentUserNum=t),precision:0,min:0,max:999999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"系统名称",prop:"systemName"},{default:o(()=>[l(u,{modelValue:e.value.row.systemName,"onUpdate:modelValue":a[10]||(a[10]=t=>e.value.row.systemName=t),placeholder:"请填写系统名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"自定义域名",prop:"customDomain"},{default:o(()=>[l(u,{modelValue:e.value.row.customDomain,"onUpdate:modelValue":a[11]||(a[11]=t=>e.value.row.customDomain=t),placeholder:"请填写自定义域名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{gutter:20},{default:o(()=>[l(n,{span:12},{default:o(()=>[l(r,{label:"显示",prop:"show"},{default:o(()=>[l(M,{modelValue:e.value.row.show,"onUpdate:modelValue":a[12]||(a[12]=t=>e.value.row.show=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:o(()=>[l(r,{label:"状态",prop:"enable"},{default:o(()=>[l(M,{modelValue:e.value.row.enable,"onUpdate:modelValue":a[13]||(a[13]=t=>e.value.row.enable=t),"active-text":"正常","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model","disabled"])]),_:1}),l(f,{label:"外观设置",name:"appearance"},{default:o(()=>[l(c,{"label-width":"140px","label-suffix":" :",model:e.value.row,disabled:e.value.readonly},{default:o(()=>[l(r,{label:"Logo上传",prop:"logoUrl"},{default:o(()=>[l(q,{imageUrl:e.value.row.logoUrl,"onUpdate:imageUrl":a[14]||(a[14]=t=>e.value.row.logoUrl=t),limit:1,"file-size":2,dir:"logo",height:"120px",width:"120px",disabled:e.value.readonly},{tip:o(()=>a[25]||(a[25]=[b("span",null,"推荐尺寸: 120x120px, 支持jpg, png格式",-1)])),_:1},8,["imageUrl","disabled"])]),_:1}),l(r,{label:"首页图片",prop:"homeImageUrl"},{default:o(()=>[l(q,{imageUrl:e.value.row.homeImageUrl,"onUpdate:imageUrl":a[15]||(a[15]=t=>e.value.row.homeImageUrl=t),limit:1,"file-size":5,dir:"banner",height:"120px",width:"240px",disabled:e.value.readonly},{tip:o(()=>a[26]||(a[26]=[b("span",null,"推荐尺寸: 1920x400px, 支持jpg, png格式",-1)])),_:1},8,["imageUrl","disabled"])]),_:1}),l(r,{label:"主题颜色",prop:"themeColor"},{default:o(()=>[l(Z,{modelValue:e.value.row.themeColor,"onUpdate:modelValue":a[16]||(a[16]=t=>e.value.row.themeColor=t),"show-preview":"",textColor:g.value,"onUpdate:textColor":a[17]||(a[17]=t=>g.value=t),"preview-text":"预览效果",disabled:e.value.readonly},null,8,["modelValue","textColor","disabled"])]),_:1})]),_:1},8,["model","disabled"])]),_:1}),l(f,{label:"租户文本",name:"content"},{default:o(()=>[e.value.readonly?(v(),P("div",oe,[l(w(le),{modelValue:e.value.row.text,"onUpdate:modelValue":a[18]||(a[18]=t=>e.value.row.text=t),height:400},null,8,["modelValue"])])):(v(),x(w(ee),{key:1,modelValue:e.value.row.text,"onUpdate:modelValue":a[19]||(a[19]=t=>e.value.row.text=t),height:400},null,8,["modelValue"]))]),_:1}),l(f,{label:"高级配置",name:"advanced"},{default:o(()=>[l(c,{"label-width":"140px","label-suffix":" :",model:e.value.row,disabled:e.value.readonly},{default:o(()=>[l(r,{label:"配置信息",prop:"config"},{default:o(()=>[l(u,{modelValue:e.value.row.config,"onUpdate:modelValue":a[20]||(a[20]=t=>e.value.row.config=t),placeholder:"请填写配置信息",type:"textarea",rows:10,clearable:"",disabled:e.value.readonly},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),fe=X(te,[["__scopeId","data-v-539ebbf0"]]);export{fe as default};
