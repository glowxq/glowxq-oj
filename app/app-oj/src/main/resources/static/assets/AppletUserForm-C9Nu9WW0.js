import{d as S,bc as N,aB as O,r as v,b as L,w as P,f as n,o as E,x as W,k as o,j as l,y as _,T as z,bo as G,a as U,W as H,_ as J}from"./index-DTkCE7MD.js";import{U as x}from"./Img-CbqiKKTP.js";import"./upload-BtJOZC1L.js";const K=S({name:"AppletUserForm",__name:"AppletUserForm",setup(Q,{expose:C}){const h=[{value:"北京市",label:"北京市",children:[{value:"北京市",label:"北京市",children:[{value:"东城区",label:"东城区"},{value:"西城区",label:"西城区"},{value:"朝阳区",label:"朝阳区"},{value:"海淀区",label:"海淀区"},{value:"丰台区",label:"丰台区"},{value:"石景山区",label:"石景山区"}]}]},{value:"上海市",label:"上海市",children:[{value:"上海市",label:"上海市",children:[{value:"黄浦区",label:"黄浦区"},{value:"徐汇区",label:"徐汇区"},{value:"静安区",label:"静安区"},{value:"普陀区",label:"普陀区"}]}]},{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市",children:[{value:"越秀区",label:"越秀区"},{value:"荔湾区",label:"荔湾区"},{value:"海珠区",label:"海珠区"},{value:"天河区",label:"天河区"}]},{value:"深圳市",label:"深圳市",children:[{value:"福田区",label:"福田区"},{value:"罗湖区",label:"罗湖区"},{value:"南山区",label:"南山区"},{value:"宝安区",label:"宝安区"}]}]}];N();const y=O({sysUserId:[{required:!0,message:"请选择关联的系统用户"}],openid:[{required:!0,message:"请填写小程序用户的唯一标识"}],address:[{required:!0,message:"请填写地址"}],subscribe:[{required:!0,message:"请选择是否订阅公众号"}],enable:[{required:!0,message:"请选择状态"}],code:[{required:!0,message:"请填写业务Code"}],bindCode:[{required:!0,message:"请填写绑定Code"}]}),m=v(!1),a=v({title:"",row:{},api:void 0,getTableList:void 0}),f=L(()=>!1),i=v([]),s=v(""),k=v(h),q=t=>{const e=t.map(d=>d).join(" "),r=s.value?`${e} ${s.value}`:e;a.value.row.address=r};P(s,t=>{if(i.value&&i.value.length>0){const e=i.value.map(r=>r).join(" ");a.value.row.address=`${e} ${t}`}else a.value.row.address=t});const A=(t,e)=>{e&&(a.value.row.name=e.name||a.value.row.name,a.value.row.phone=e.phone||a.value.row.phone)},$=t=>{t&&t.url&&(a.value.row.avatar=t.url)},T=t=>{t&&t.url&&(a.value.row.url=t.url)},j=t=>{if(!t)return;const e=t.split(" ");e.length>1?s.value=e[e.length-1]:s.value=t},F=t=>{a.value=t,m.value=!0,t.row.address?j(t.row.address):(s.value="",i.value=[])},w=v(),c=()=>{w.value.validate(async t=>{if(t)try{await a.value.api(a.value.row),H.success({message:`${a.value.title}成功！`}),a.value.getTableList(),m.value=!1}catch(e){console.log(e)}})};return C({acceptParams:F}),(t,e)=>{const r=n("el-form-item"),d=n("el-col"),p=n("el-input"),b=n("el-option"),B=n("el-select"),D=n("el-cascader"),g=n("el-switch"),I=n("el-row"),M=n("el-form"),V=n("el-button"),R=n("el-dialog");return E(),W(R,{modelValue:m.value,"onUpdate:modelValue":e[16]||(e[16]=u=>m.value=u),title:`${a.value.title}`,"destroy-on-close":!0,width:"650px",draggable:"",class:"apple-style-dialog"},{footer:o(()=>[l(V,{onClick:e[15]||(e[15]=u=>m.value=!1),class:"cancel-btn"},{default:o(()=>e[19]||(e[19]=[_("取消")])),_:1}),l(V,{type:"primary",onClick:c,class:"confirm-btn"},{default:o(()=>e[20]||(e[20]=[_("确定")])),_:1})]),default:o(()=>[l(M,{ref_key:"ruleFormRef",ref:w,"label-width":"140px","label-suffix":" :",rules:y,model:a.value.row,onSubmit:z(c,["prevent"])},{default:o(()=>[l(I,{gutter:20},{default:o(()=>[l(d,{span:24},{default:o(()=>[l(r,{label:"关联系统用户",prop:"sysUserId"},{default:o(()=>[l(G,{modelValue:a.value.row.sysUserId,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.row.sysUserId=u),multiple:!1,placeholder:"请选择关联的系统用户",onChange:A},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"OpenID",prop:"openid"},{default:o(()=>[l(p,{modelValue:a.value.row.openid,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.row.openid=u),placeholder:"请填写小程序用户的唯一标识",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"UnionID",prop:"unionid"},{default:o(()=>[l(p,{modelValue:a.value.row.unionid,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.row.unionid=u),placeholder:"请填写公众号的唯一标识",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"业务Code",prop:"code"},{default:o(()=>[l(p,{modelValue:a.value.row.code,"onUpdate:modelValue":e[3]||(e[3]=u=>a.value.row.code=u),placeholder:"请填写业务Code",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"绑定Code",prop:"bindCode"},{default:o(()=>[l(p,{modelValue:a.value.row.bindCode,"onUpdate:modelValue":e[4]||(e[4]=u=>a.value.row.bindCode=u),placeholder:"请填写绑定Code",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"昵称",prop:"nickname"},{default:o(()=>[l(p,{modelValue:a.value.row.nickname,"onUpdate:modelValue":e[5]||(e[5]=u=>a.value.row.nickname=u),placeholder:"请填写昵称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"真实姓名",prop:"name"},{default:o(()=>[l(p,{modelValue:a.value.row.name,"onUpdate:modelValue":e[6]||(e[6]=u=>a.value.row.name=u),placeholder:"请填写真实姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"手机号",prop:"phone"},{default:o(()=>[l(p,{modelValue:a.value.row.phone,"onUpdate:modelValue":e[7]||(e[7]=u=>a.value.row.phone=u),placeholder:"请填写手机号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"性别",prop:"sex"},{default:o(()=>[l(B,{modelValue:a.value.row.sex,"onUpdate:modelValue":e[8]||(e[8]=u=>a.value.row.sex=u),clearable:"",placeholder:"请选择性别"},{default:o(()=>[l(b,{label:"未知",value:0}),l(b,{label:"男性",value:1}),l(b,{label:"女性",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:24},{default:o(()=>[l(r,{label:"地址",prop:"address"},{default:o(()=>[l(D,{modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=u=>i.value=u),options:k.value,placeholder:"请选择所在地区",onChange:q,style:{width:"100%"}},null,8,["modelValue","options"]),l(p,{modelValue:s.value,"onUpdate:modelValue":e[10]||(e[10]=u=>s.value=u),placeholder:"请填写详细地址",clearable:"",style:{"margin-top":"8px"}},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:24},{default:o(()=>[l(r,{label:"头像",prop:"avatar"},{default:o(()=>[l(x,{imageUrl:a.value.row.avatar,"onUpdate:imageUrl":e[11]||(e[11]=u=>a.value.row.avatar=u),disabled:f.value,dir:"applet/avatar",height:"120px",width:"120px","use-oss":!0,onChange:$},{tip:o(()=>e[17]||(e[17]=[U("span",{class:"upload-tip"},"支持 jpg、png 格式，建议尺寸 200x200px，不超过2M",-1)])),_:1},8,["imageUrl","disabled"])]),_:1})]),_:1}),l(d,{span:24},{default:o(()=>[l(r,{label:"链接图片",prop:"url"},{default:o(()=>[l(x,{imageUrl:a.value.row.url,"onUpdate:imageUrl":e[12]||(e[12]=u=>a.value.row.url=u),disabled:f.value,dir:"applet/url",height:"120px",width:"120px","use-oss":!0,onChange:T},{tip:o(()=>e[18]||(e[18]=[U("span",{class:"upload-tip"},"支持 jpg、png 格式，建议尺寸 200x200px，不超过2M",-1)])),_:1},8,["imageUrl","disabled"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"订阅公众号",prop:"subscribe"},{default:o(()=>[l(g,{modelValue:a.value.row.subscribe,"onUpdate:modelValue":e[13]||(e[13]=u=>a.value.row.subscribe=u),"active-text":"是","inactive-text":"否",class:"custom-switch"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:o(()=>[l(r,{label:"状态",prop:"enable"},{default:o(()=>[l(g,{modelValue:a.value.row.enable,"onUpdate:modelValue":e[14]||(e[14]=u=>a.value.row.enable=u),"active-text":"启用","inactive-text":"禁用",class:"custom-switch"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}}),ee=J(K,[["__scopeId","data-v-3003ebd0"]]);export{ee as default};
