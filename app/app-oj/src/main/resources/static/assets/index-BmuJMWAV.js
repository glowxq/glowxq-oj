import{h as n,O as m,d as R,r as y,f as S,g as j,o as s,c as N,j as _,k as i,i as d,x as c,u as b,a_ as O,y as f,a$ as D,D as K,b0 as B,b1 as J}from"./index-DTkCE7MD.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as P}from"./useHandleData-BdxQ-8Ab.js";import{_ as H}from"./UserProblemForm.vue_vue_type_script_setup_true_lang-DgNV0aXy.js";import{I as h,d as q,u as F}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const M=r=>n.get(m+"/user-problem",r),z=r=>n.post(m+"/user-problem",r),G=r=>n.put(m+"/user-problem",r),x=r=>n.delete(m+"/user-problem",r),Q=r=>{const{id:o}=r;return n.get(m+`/user-problem/${o}`)},W=(r,o)=>n.upload(m+"/user-problem/import",r,o),X=r=>n.download(m+"/user-problem/export",r),Y={class:"table-box"},ae=R({name:"UserProblemView",__name:"index",setup(r){const o=y(),C=[{type:"selection",width:80},{prop:"userId",label:"用户ID"},{prop:"problemId",label:"题目ID"},{prop:"problemKey",label:"题目Key"},{prop:"problemTitle",label:"题目标题ID"},{prop:"judgeId",label:"测评ID"},{prop:"judgeStatus",label:"测评状态"},{prop:"score",label:"作业分数"},{prop:"code",label:"AC的代码"},{prop:"options",label:"非编程题作答内容"},{prop:"flowImage",label:"流程图URL"},{prop:"problemType",label:"题目类型"},{prop:"operation",label:"操作",width:250,fixed:"right"}],w=[{prop:"userId",label:"用户ID",el:"input"},{prop:"problemId",label:"题目ID",el:"input"},{prop:"problemKey",label:"题目Key",el:"input"},{prop:"problemTitle",label:"题目标题ID",el:"input"},{prop:"judgeId",label:"测评ID",el:"input"},{prop:"judgeStatus",label:"测评状态",el:"select"},{prop:"score",label:"作业分数",el:"input"},{prop:"code",label:"AC的代码",el:"input"},{prop:"options",label:"非编程题作答内容",el:"input"},{prop:"flowImage",label:"流程图URL",el:"input"},{prop:"problemType",label:"题目类型",el:"select"}],L=t=>{let e=I(t);return M(e)},I=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},g=y(),v=async(t,e={},l=!0)=>{var p,u;if(!l){const T=await Q({id:e==null?void 0:e.id});e=T==null?void 0:T.data}const a={title:t,row:{...e},api:l?z:G,getTableList:(p=o.value)==null?void 0:p.getTableList};(u=g.value)==null||u.acceptParams(a)},A=async t=>{var e;await P(x,{ids:[t.id]},`删除【${t.id}】用户题目数据`),(e=o.value)==null||e.getTableList()},U=async t=>{var e,l;await P(x,{ids:t},"删除所选用户题目数据"),(e=o.value)==null||e.clearSelection(),(l=o.value)==null||l.getTableList()},k=y(),E=()=>{var e,l;const t={title:"用户题目数据",templateName:"用户题目数据",tempApi:q,importApi:W,getTableList:(e=o.value)==null?void 0:e.getTableList};(l=k.value)==null||l.acceptParams(t)},$=async()=>{var e;let t=I((e=o.value)==null?void 0:e.searchParam);F(X,"用户题目数据",t)};return(t,e)=>{const l=S("el-button"),a=j("auth");return s(),N("div",Y,[_(V,{ref_key:"proTableRef",ref:o,title:"用户题目数据",indent:20,columns:C,"search-columns":w,"request-api":L,"row-key":"id"},{tableHeader:i(p=>[d((s(),c(l,{type:"primary",icon:b(O),onClick:e[0]||(e[0]=u=>v("新增用户题目数据"))},{default:i(()=>e[1]||(e[1]=[f(" 新增 ")])),_:1},8,["icon"])),[[a,"user.problem.create"]]),d((s(),c(l,{type:"danger",icon:b(D),plain:"",disabled:!p.isSelected,onClick:u=>U(p.selectedListIds)},{default:i(()=>e[2]||(e[2]=[f(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[a,"user.problem.remove"]]),d((s(),c(l,{type:"primary",icon:b(K),plain:"",onClick:E},{default:i(()=>e[3]||(e[3]=[f(" 导入 ")])),_:1},8,["icon"])),[[a,"user.problem.import"]]),d((s(),c(l,{type:"primary",icon:b(B),plain:"",onClick:$},{default:i(()=>e[4]||(e[4]=[f(" 导出 ")])),_:1},8,["icon"])),[[a,"user.problem.export"]])]),operation:i(({row:p})=>[d((s(),c(l,{type:"primary",link:"",icon:b(J),onClick:u=>v("编辑用户题目数据",p,!1)},{default:i(()=>e[5]||(e[5]=[f(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[a,"user.problem.update"]]),d((s(),c(l,{type:"primary",link:"",icon:b(D),onClick:u=>A(p)},{default:i(()=>e[6]||(e[6]=[f(" 删除 ")])),_:2},1032,["icon","onClick"])),[[a,"user.problem.remove"]])]),_:1},512),_(H,{ref_key:"userProblemRef",ref:g},null,512),_(h,{ref_key:"ImportExcelRef",ref:k},null,512)])}}});export{ae as default};
