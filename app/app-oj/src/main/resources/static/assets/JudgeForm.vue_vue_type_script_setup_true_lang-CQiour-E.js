import{d as Y,bc as M,aB as k,r as i,f as m,o as _,x as j,k as u,j as o,y as g,T as C,bo as S,u as v,W as E}from"./index-DTkCE7MD.js";import{E as b}from"./EnumSelect-C2fXZs6G.js";import{J as H}from"./JudgeStatus-By11LX14.js";import{J}from"./JudgeSceneType-G292ww_A.js";import{P as O}from"./ProblemType-TBlMUhPx.js";const R=Y({name:"JudgeForm",__name:"JudgeForm",setup(F,{expose:y}){M();const T=k({judgeKey:[{required:!0,message:"请填写测评Key"}],problemId:[{required:!0,message:"请填写题目ID"}],problemKey:[{required:!0,message:"请填写题目Key"}],userId:[{required:!0,message:"请填写测评用户id"}],businessId:[{required:!0,message:"请填写关联业务表ID"}],username:[{required:!0,message:"请填写用户名"}],sceneType:[{required:!0,message:"请填写测评类型"}],problemType:[{required:!0,message:"请填写题目类型"}],submitTime:[{required:!0,message:"请填写提交测评的时间"}],startTime:[{required:!0,message:"请填写开始测评的时间"}],endTime:[{required:!0,message:"请填写结束测评的时间"}],flowImage:[{required:!0,message:"请填写流程图"}],code:[{required:!0,message:"请填写代码"}],replyOptions:[{required:!0,message:"请填写客观题作答内容"}],version:[{required:!0,message:"请填写乐观锁"}],createTime:[{required:!0,message:"请填写创建时间"}],updateTime:[{required:!0,message:"请填写更新时间"}],delFlag:[{required:!0,message:"请填写是否删除"}]}),s=i(!1),l=i({title:"",row:{},api:void 0,getTableList:void 0}),U=n=>{l.value=n,s.value=!0},V=i(),w=()=>{V.value.validate(async n=>{if(n)try{await l.value.api(l.value.row),E.success({message:`${l.value.title}成功！`}),l.value.getTableList(),s.value=!1}catch(e){console.log(e)}})},I=(n,e)=>{e?(l.value.row.username=e.username||e.name,l.value.row.name=e.name):(l.value.row.username=void 0,l.value.row.name=void 0)};return y({acceptParams:U}),(n,e)=>{const t=m("el-input"),r=m("el-form-item"),d=m("el-input-number"),p=m("el-date-picker"),q=m("el-switch"),x=m("el-form"),f=m("el-button"),D=m("el-dialog");return _(),j(D,{modelValue:s.value,"onUpdate:modelValue":e[24]||(e[24]=a=>s.value=a),title:`${l.value.title}`,"destroy-on-close":!0,width:"580px",draggable:""},{footer:u(()=>[o(f,{onClick:e[23]||(e[23]=a=>s.value=!1)},{default:u(()=>e[25]||(e[25]=[g(" 取消")])),_:1}),o(f,{type:"primary",onClick:w},{default:u(()=>e[26]||(e[26]=[g(" 确定")])),_:1})]),default:u(()=>[o(x,{ref_key:"ruleFormRef",ref:V,"label-width":"140px","label-suffix":" :",rules:T,model:l.value.row,onSubmit:C(w,["prevent"])},{default:u(()=>[o(r,{label:"测评Key",prop:"judgeKey"},{default:u(()=>[o(t,{modelValue:l.value.row.judgeKey,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.row.judgeKey=a),placeholder:"请填写测评Key",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"题目ID",prop:"problemId"},{default:u(()=>[o(d,{modelValue:l.value.row.problemId,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.row.problemId=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"题目Key",prop:"problemKey"},{default:u(()=>[o(t,{modelValue:l.value.row.problemKey,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.row.problemKey=a),placeholder:"请填写题目Key",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"错误提醒(编译错误|或者vj提醒)",prop:"errorMessage"},{default:u(()=>[o(t,{modelValue:l.value.row.errorMessage,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.row.errorMessage=a),placeholder:"请填写错误提醒(编译错误|或者vj提醒)",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"测评用户id",prop:"userId"},{default:u(()=>[o(S,{modelValue:l.value.row.userId,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.row.userId=a),placeholder:"请选择测评用户",clearable:"",onChange:e[5]||(e[5]=(a,K)=>I(a,K))},null,8,["modelValue"])]),_:1}),o(r,{label:"测评类型",prop:"sceneType"},{default:u(()=>[o(b,{modelValue:l.value.row.sceneType,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.row.sceneType=a),enumData:v(J),placeholder:"请选择测评类型",type:"select",clearable:""},null,8,["modelValue","enumData"])]),_:1}),o(r,{label:"关联业务",prop:"businessId"},{default:u(()=>[o(d,{modelValue:l.value.row.businessId,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.row.businessId=a),precision:0,min:1,max:999999,placeholder:"请输入业务ID"},null,8,["modelValue"])]),_:1}),o(r,{label:"用户名",prop:"username"},{default:u(()=>[o(t,{modelValue:l.value.row.username,"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.row.username=a),placeholder:"请填写用户名",clearable:"",disabled:""},null,8,["modelValue"])]),_:1}),o(r,{label:"题目类型",prop:"problemType"},{default:u(()=>[o(b,{modelValue:l.value.row.problemType,"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.row.problemType=a),enumData:v(O),placeholder:"请选择题目类型",type:"select",clearable:""},null,8,["modelValue","enumData"])]),_:1}),o(r,{label:"提交测评的时间",prop:"submitTime"},{default:u(()=>[o(p,{clearable:"",modelValue:l.value.row.submitTime,"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.row.submitTime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择提交测评的时间"},null,8,["modelValue"])]),_:1}),o(r,{label:"开始测评的时间",prop:"startTime"},{default:u(()=>[o(p,{clearable:"",modelValue:l.value.row.startTime,"onUpdate:modelValue":e[11]||(e[11]=a=>l.value.row.startTime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择开始测评的时间"},null,8,["modelValue"])]),_:1}),o(r,{label:"结束测评的时间",prop:"endTime"},{default:u(()=>[o(p,{clearable:"",modelValue:l.value.row.endTime,"onUpdate:modelValue":e[12]||(e[12]=a=>l.value.row.endTime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择结束测评的时间"},null,8,["modelValue"])]),_:1}),o(r,{label:"评测状态",prop:"status"},{default:u(()=>[o(b,{modelValue:l.value.row.status,"onUpdate:modelValue":e[13]||(e[13]=a=>l.value.row.status=a),enumData:v(H),placeholder:"请选择评测状态",type:"select",clearable:""},null,8,["modelValue","enumData"])]),_:1}),o(r,{label:"运行时间(ms)",prop:"time"},{default:u(()=>[o(d,{modelValue:l.value.row.time,"onUpdate:modelValue":e[14]||(e[14]=a=>l.value.row.time=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"运行内存(kb)",prop:"memory"},{default:u(()=>[o(d,{modelValue:l.value.row.memory,"onUpdate:modelValue":e[15]||(e[15]=a=>l.value.row.memory=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"IO判题则不为空",prop:"score"},{default:u(()=>[o(d,{modelValue:l.value.row.score,"onUpdate:modelValue":e[16]||(e[16]=a=>l.value.row.score=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"代码长度",prop:"length"},{default:u(()=>[o(d,{modelValue:l.value.row.length,"onUpdate:modelValue":e[17]||(e[17]=a=>l.value.row.length=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(r,{label:"流程图",prop:"flowImage"},{default:u(()=>[o(t,{modelValue:l.value.row.flowImage,"onUpdate:modelValue":e[18]||(e[18]=a=>l.value.row.flowImage=a),placeholder:"请填写流程图",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"代码",prop:"code"},{default:u(()=>[o(t,{modelValue:l.value.row.code,"onUpdate:modelValue":e[19]||(e[19]=a=>l.value.row.code=a),placeholder:"请填写代码",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"客观题作答内容",prop:"replyOptions"},{default:u(()=>[o(t,{modelValue:l.value.row.replyOptions,"onUpdate:modelValue":e[20]||(e[20]=a=>l.value.row.replyOptions=a),placeholder:"请填写客观题作答内容",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"代码语言",prop:"language"},{default:u(()=>[o(t,{modelValue:l.value.row.language,"onUpdate:modelValue":e[21]||(e[21]=a=>l.value.row.language=a),placeholder:"请填写代码语言",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"是否为人工评测",prop:"manualEvaluation"},{default:u(()=>[o(q,{modelValue:l.value.row.manualEvaluation,"onUpdate:modelValue":e[22]||(e[22]=a=>l.value.row.manualEvaluation=a),"active-text":"人工评测","inactive-text":"自动评测"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{R as _};
