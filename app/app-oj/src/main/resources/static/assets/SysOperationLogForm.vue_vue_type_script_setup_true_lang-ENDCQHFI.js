import{d as k,bc as j,aB as D,r as p,f as d,o as m,x as w,k as r,j as o,y as f,T as F,c as M,P as S,Q as C,u as L,W as B}from"./index-DTkCE7MD.js";const P=k({name:"SysOperationLogForm",__name:"SysOperationLogForm",setup(O,{expose:g}){const q=j(),I=D({userId:[{required:!0,message:"请填写用户id"}],traceId:[{required:!0,message:"请填写链路追踪ID"}],spanId:[{required:!0,message:"请填写业务模块跟踪ID"}],username:[{required:!0,message:"请填写用户名称"}],ip:[{required:!0,message:"请填写ip"}],method:[{required:!0,message:"请填写方法"}],uri:[{required:!0,message:"请填写接口"}],module:[{required:!0,message:"请填写模块名称"}],description:[{required:!0,message:"请填写操作描述"}],param:[{required:!0,message:"请填写参数"}],request:[{required:!0,message:"请填写请求参数json"}],response:[{required:!0,message:"请填写响应参数json"}],error:[{required:!0,message:"请填写存在错误"}],businessType:[{required:!0,message:"请填写操作类型"}],errorMessage:[{required:!0,message:"请填写错误信息"}],costTime:[{required:!0,message:"请填写操作耗时（ms）"}],createTime:[{required:!0,message:"请填写创建时间"}],updateTime:[{required:!0,message:"请填写更新时间"}],delFlag:[{required:!0,message:"请填写是否删除"}],tenantId:[{required:!0,message:"请填写租户id"}]}),s=p(!1),l=p({title:"",row:{},api:void 0,getTableList:void 0}),y=n=>{l.value=n,s.value=!0},i=p(),v=()=>{i.value.validate(async n=>{if(n)try{await l.value.api(l.value.row),B.success({message:`${l.value.title}成功！`}),l.value.getTableList(),s.value=!1}catch(e){console.log(e)}})};return g({acceptParams:y}),(n,e)=>{const V=d("el-input-number"),u=d("el-form-item"),t=d("el-input"),U=d("el-switch"),_=d("el-option"),x=d("el-select"),c=d("el-form"),b=d("el-button"),T=d("el-dialog");return m(),w(T,{modelValue:s.value,"onUpdate:modelValue":e[19]||(e[19]=a=>s.value=a),title:`${l.value.title}`,"destroy-on-close":!0,width:"580px",draggable:""},{footer:r(()=>[o(b,{onClick:e[18]||(e[18]=a=>s.value=!1)},{default:r(()=>e[20]||(e[20]=[f(" 取消")])),_:1}),o(b,{type:"primary",onClick:v},{default:r(()=>e[21]||(e[21]=[f(" 确定")])),_:1})]),default:r(()=>[o(c,{ref_key:"ruleFormRef",ref:i,"label-width":"140px","label-suffix":" :",rules:I,model:l.value.row,onSubmit:F(v,["prevent"])},{default:r(()=>[o(u,{label:"用户id",prop:"userId"},{default:r(()=>[o(V,{modelValue:l.value.row.userId,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.row.userId=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(u,{label:"链路追踪ID",prop:"traceId"},{default:r(()=>[o(t,{modelValue:l.value.row.traceId,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.row.traceId=a),placeholder:"请填写链路追踪ID",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"业务模块跟踪ID",prop:"spanId"},{default:r(()=>[o(t,{modelValue:l.value.row.spanId,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.row.spanId=a),placeholder:"请填写业务模块跟踪ID",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"用户名称",prop:"username"},{default:r(()=>[o(t,{modelValue:l.value.row.username,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.row.username=a),placeholder:"请填写用户名称",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"ip",prop:"ip"},{default:r(()=>[o(t,{modelValue:l.value.row.ip,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.row.ip=a),placeholder:"请填写ip",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"方法",prop:"method"},{default:r(()=>[o(t,{modelValue:l.value.row.method,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.row.method=a),placeholder:"请填写方法",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"接口",prop:"uri"},{default:r(()=>[o(t,{modelValue:l.value.row.uri,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.row.uri=a),placeholder:"请填写接口",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"请求头",prop:"header"},{default:r(()=>[o(t,{modelValue:l.value.row.header,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.row.header=a),placeholder:"请填写请求头",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"模块名称",prop:"module"},{default:r(()=>[o(t,{modelValue:l.value.row.module,"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.row.module=a),placeholder:"请填写模块名称",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"操作描述",prop:"description"},{default:r(()=>[o(t,{modelValue:l.value.row.description,"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.row.description=a),placeholder:"请填写操作描述",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"参数",prop:"param"},{default:r(()=>[o(t,{modelValue:l.value.row.param,"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.row.param=a),placeholder:"请填写参数",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"请求参数json",prop:"request"},{default:r(()=>[o(t,{modelValue:l.value.row.request,"onUpdate:modelValue":e[11]||(e[11]=a=>l.value.row.request=a),placeholder:"请填写请求参数json",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"响应参数json",prop:"response"},{default:r(()=>[o(t,{modelValue:l.value.row.response,"onUpdate:modelValue":e[12]||(e[12]=a=>l.value.row.response=a),placeholder:"请填写响应参数json",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"存在错误",prop:"error"},{default:r(()=>[o(U,{modelValue:l.value.row.error,"onUpdate:modelValue":e[13]||(e[13]=a=>l.value.row.error=a)},null,8,["modelValue"])]),_:1}),o(u,{label:"操作类型",prop:"businessType"},{default:r(()=>[o(x,{modelValue:l.value.row.businessType,"onUpdate:modelValue":e[14]||(e[14]=a=>l.value.row.businessType=a),clearable:"",placeholder:"请选择操作类型"},{default:r(()=>[(m(!0),M(S,null,C(L(q).getDictOptions(""),a=>(m(),w(_,{key:a.id,label:a.codeName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"错误信息",prop:"errorMessage"},{default:r(()=>[o(t,{modelValue:l.value.row.errorMessage,"onUpdate:modelValue":e[15]||(e[15]=a=>l.value.row.errorMessage=a),placeholder:"请填写错误信息",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"操作耗时（ms）",prop:"costTime"},{default:r(()=>[o(V,{modelValue:l.value.row.costTime,"onUpdate:modelValue":e[16]||(e[16]=a=>l.value.row.costTime=a),precision:0,min:1,max:999999},null,8,["modelValue"])]),_:1}),o(u,{label:"租户id",prop:"tenantId"},{default:r(()=>[o(t,{modelValue:l.value.row.tenantId,"onUpdate:modelValue":e[17]||(e[17]=a=>l.value.row.tenantId=a),placeholder:"请填写租户id",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{P as _};
