import{d as L,r as b,f as Y,g as $,o as r,c as N,j as f,k as l,i as n,x as m,u as c,a_ as P,y as u,a$ as v,D as H,b0 as M,b1 as R}from"./index-DTkCE7MD.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{a as K,b as O,c as j,u as B,r as I,i as F,e as V}from"./topicSubmit-D3ViFuzS.js";import{u as D}from"./useHandleData-BdxQ-8Ab.js";import{_ as h}from"./TopicSubmitForm.vue_vue_type_script_setup_true_lang-DDBpY6D1.js";import{I as q,d as z,u as G}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const Q={class:"table-box"},pe=L({name:"TopicSubmitView",__name:"index",setup(U){const o=b(),g=[{type:"selection",width:80},{prop:"topicId",label:"主题ID"},{prop:"problemId",label:"题目ID"},{prop:"problemKey",label:"题目Key"},{prop:"problemTitle",label:"题目标题ID"},{prop:"problemType",label:"题目类型"},{prop:"topicJudgeType",label:"主题测评类型 ACM/OI"},{prop:"userId",label:"用户ID"},{prop:"name",label:"姓名"},{prop:"nickName",label:"昵称"},{prop:"judgeStatus",label:"测评状态"},{prop:"score",label:"主题分数"},{prop:"useTime",label:"做题用时(分)"},{prop:"punishmentTime",label:"罚时(分)"},{prop:"operation",label:"操作",width:250,fixed:"right"}],S=[{prop:"topicId",label:"主题ID",el:"input"},{prop:"problemId",label:"题目ID",el:"input"},{prop:"problemKey",label:"题目Key",el:"input"},{prop:"problemTitle",label:"题目标题ID",el:"input"},{prop:"problemType",label:"题目类型",el:"select"},{prop:"topicJudgeType",label:"主题测评类型 ACM/OI",el:"select"},{prop:"userId",label:"用户ID",el:"input"},{prop:"name",label:"姓名",el:"input"},{prop:"nickName",label:"昵称",el:"input"},{prop:"judgeStatus",label:"测评状态",el:"select"},{prop:"score",label:"主题分数",el:"input"},{prop:"useTime",label:"做题用时(分)",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}},{prop:"punishmentTime",label:"罚时(分)",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}],x=t=>{let e=T(t);return K(e)},T=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},y=b(),_=async(t,e={},a=!0)=>{var p,s;if(!a){const d=await O({id:e==null?void 0:e.id});e=d==null?void 0:d.data}const i={title:t,row:{...e},api:a?j:B,getTableList:(p=o.value)==null?void 0:p.getTableList};(s=y.value)==null||s.acceptParams(i)},C=async t=>{var e;await D(I,{ids:[t.id]},`删除【${t.id}】主题测评记录`),(e=o.value)==null||e.getTableList()},A=async t=>{var e,a;await D(I,{ids:t},"删除所选主题测评记录"),(e=o.value)==null||e.clearSelection(),(a=o.value)==null||a.getTableList()},k=b(),w=()=>{var e,a;const t={title:"主题测评记录",templateName:"主题测评记录",tempApi:z,importApi:F,getTableList:(e=o.value)==null?void 0:e.getTableList};(a=k.value)==null||a.acceptParams(t)},E=async()=>{var e;let t=T((e=o.value)==null?void 0:e.searchParam);G(V,"主题测评记录",t)};return(t,e)=>{const a=Y("el-button"),i=$("auth");return r(),N("div",Q,[f(J,{ref_key:"proTableRef",ref:o,title:"主题测评记录",indent:20,columns:g,"search-columns":S,"request-api":x,"row-key":"id"},{tableHeader:l(p=>[n((r(),m(a,{type:"primary",icon:c(P),onClick:e[0]||(e[0]=s=>_("新增主题测评记录"))},{default:l(()=>e[1]||(e[1]=[u(" 新增 ")])),_:1},8,["icon"])),[[i,"topic.submit.create"]]),n((r(),m(a,{type:"danger",icon:c(v),plain:"",disabled:!p.isSelected,onClick:s=>A(p.selectedListIds)},{default:l(()=>e[2]||(e[2]=[u(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[i,"topic.submit.remove"]]),n((r(),m(a,{type:"primary",icon:c(H),plain:"",onClick:w},{default:l(()=>e[3]||(e[3]=[u(" 导入 ")])),_:1},8,["icon"])),[[i,"topic.submit.import"]]),n((r(),m(a,{type:"primary",icon:c(M),plain:"",onClick:E},{default:l(()=>e[4]||(e[4]=[u(" 导出 ")])),_:1},8,["icon"])),[[i,"topic.submit.export"]])]),operation:l(({row:p})=>[n((r(),m(a,{type:"primary",link:"",icon:c(R),onClick:s=>_("编辑主题测评记录",p,!1)},{default:l(()=>e[5]||(e[5]=[u(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[i,"topic.submit.update"]]),n((r(),m(a,{type:"primary",link:"",icon:c(v),onClick:s=>C(p)},{default:l(()=>e[6]||(e[6]=[u(" 删除 ")])),_:2},1032,["icon","onClick"])),[[i,"topic.submit.remove"]])]),_:1},512),f(h,{ref_key:"topicSubmitRef",ref:y},null,512),f(q,{ref_key:"ImportExcelRef",ref:k},null,512)])}}});export{pe as default};
