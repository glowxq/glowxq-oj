import{d as $,r as g,f as j,g as R,o as r,c as I,j as f,k as n,i as s,x as m,u,a_ as J,y as c,a$ as v,D as N,b0 as O,b1 as V,b4 as k,R as h}from"./index-DTkCE7MD.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{g as q,a as H,c as F,u as U,r as L,i as z,e as G}from"./metaLanguage-BU5JVUJz.js";import{u as x}from"./useHandleData-BdxQ-8Ab.js";import{_ as K}from"./MetaLanguageForm.vue_vue_type_script_setup_true_lang-DfECDzqn.js";import{I as Q,d as W,u as X}from"./common-DxSkM119.js";import{P as C}from"./ProblemSourceType-ColSuHcx.js";import{E as Y}from"./EnumSelect-C2fXZs6G.js";import"./sortable.esm-Cw1ESr5Y.js";const Z={class:"table-box"},me=$({name:"MetaLanguageView",__name:"index",setup(ee){const i=g(),E=[{type:"selection",width:80},{prop:"contentType",label:"语言类型"},{prop:"description",label:"语言描述"},{prop:"name",label:"语言名字"},{prop:"compileCommand",label:"编译指令"},{prop:"template",label:"模板"},{prop:"codeTemplate",label:"默认代码模板"},{prop:"spjEnable",label:"是否SPJ"},{prop:"oj",label:"OJ类型",render:a=>k(h,{enum:C,code:a.row.oj||""})},{prop:"seq",label:"语言排序"},{prop:"operation",label:"操作",width:250,fixed:"right"}],w=[{prop:"contentType",label:"语言类型",el:"select"},{prop:"description",label:"语言描述",el:"input"},{prop:"name",label:"语言名字",el:"input"},{prop:"oj",label:"OJ类型",render:a=>k(Y,{modelValue:a.searchParam.oj,"onUpdate:modelValue":e=>{a.searchParam.oj=e},enumData:C,type:"select",placeholder:"请选择OJ类型"})},{prop:"codeTemplate",label:"语言默认代码模板",el:"input"}],P=a=>{let e=b(a);return q(e)},b=a=>{let e=JSON.parse(JSON.stringify(a));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},T=g(),y=async(a,e={},t=!0)=>{var o,p;if(!t){const d=await H({id:e==null?void 0:e.id});e=d==null?void 0:d.data}const l={title:a,row:{...e},api:t?F:U,getTableList:(o=i.value)==null?void 0:o.getTableList};(p=T.value)==null||p.acceptParams(l)},S=async a=>{var e;await x(L,{ids:[a.id]},`删除【${a.id}】语言`),(e=i.value)==null||e.getTableList()},A=async a=>{var e,t;await x(L,{ids:a},"删除所选语言"),(e=i.value)==null||e.clearSelection(),(t=i.value)==null||t.getTableList()},_=g(),D=()=>{var e,t;const a={title:"语言",templateName:"语言",tempApi:W,importApi:z,getTableList:(e=i.value)==null?void 0:e.getTableList};(t=_.value)==null||t.acceptParams(a)},M=async()=>{var e;let a=b((e=i.value)==null?void 0:e.searchParam);X(G,"语言",a)};return(a,e)=>{const t=j("el-button"),l=R("auth");return r(),I("div",Z,[f(B,{ref_key:"proTableRef",ref:i,title:"语言",indent:20,columns:E,"search-columns":w,"request-api":P,"row-key":"id"},{tableHeader:n(o=>[s((r(),m(t,{type:"primary",icon:u(J),onClick:e[0]||(e[0]=p=>y("新增语言"))},{default:n(()=>e[1]||(e[1]=[c(" 新增 ")])),_:1},8,["icon"])),[[l,"meta.language.create"]]),s((r(),m(t,{type:"danger",icon:u(v),plain:"",disabled:!o.isSelected,onClick:p=>A(o.selectedListIds)},{default:n(()=>e[2]||(e[2]=[c(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[l,"meta.language.remove"]]),s((r(),m(t,{type:"primary",icon:u(N),plain:"",onClick:D},{default:n(()=>e[3]||(e[3]=[c(" 导入 ")])),_:1},8,["icon"])),[[l,"meta.language.import"]]),s((r(),m(t,{type:"primary",icon:u(O),plain:"",onClick:M},{default:n(()=>e[4]||(e[4]=[c(" 导出 ")])),_:1},8,["icon"])),[[l,"meta.language.export"]])]),operation:n(({row:o})=>[s((r(),m(t,{type:"primary",link:"",icon:u(V),onClick:p=>y("编辑语言",o,!1)},{default:n(()=>e[5]||(e[5]=[c(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[l,"meta.language.update"]]),s((r(),m(t,{type:"primary",link:"",icon:u(v),onClick:p=>S(o)},{default:n(()=>e[6]||(e[6]=[c(" 删除 ")])),_:2},1032,["icon","onClick"])),[[l,"meta.language.remove"]])]),_:1},512),f(K,{ref_key:"metaLanguageRef",ref:T},null,512),f(Q,{ref_key:"ImportExcelRef",ref:_},null,512)])}}});export{me as default};
