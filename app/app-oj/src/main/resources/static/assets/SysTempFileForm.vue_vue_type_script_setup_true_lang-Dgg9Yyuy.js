import{d as F,aB as k,r as m,f as n,o as U,x as C,k as r,j as t,y as i,T as N,W as T}from"./index-DTkCE7MD.js";import{U as L}from"./file-Cxx7VqTf.js";const M=F({name:"SysTempFileForm",__name:"SysTempFileForm",setup(S,{expose:c}){const b=k({}),s=m(!1),o=m({title:"",row:{},api:void 0,getTableList:void 0}),d=m(),x=l=>{o.value=l,s.value=!0,d.value=l.row.url?[{name:g(l.row.url),url:l.row.url}]:[]},v=m(),f=()=>{v.value.validate(async l=>{if(l)try{await o.value.api(o.value.row),T.success({message:`${o.value.title}成功！`}),o.value.getTableList(),s.value=!1}catch(e){console.log(e)}})},_=l=>{o.value.isAdd&&(o.value.row.tempName=l==null?void 0:l.filename),o.value.row.url=l==null?void 0:l.url,o.value.row.sysFileId=l==null?void 0:l.fileId},g=l=>{const e=/\/([^/]+)$/,u=l.match(e);return u?u[1]:""};return c({acceptParams:x}),(l,e)=>{const u=n("el-form-item"),p=n("el-input"),V=n("el-form"),w=n("el-button"),y=n("el-dialog");return U(),C(y,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value=a),title:`${o.value.title}`,"destroy-on-close":!0,width:"580px",draggable:""},{footer:r(()=>[t(w,{onClick:e[4]||(e[4]=a=>s.value=!1)},{default:r(()=>e[7]||(e[7]=[i(" 取消 ")])),_:1}),t(w,{type:"primary",onClick:f},{default:r(()=>e[8]||(e[8]=[i(" 确定 ")])),_:1})]),default:r(()=>[t(V,{ref_key:"ruleFormRef",ref:v,"label-width":"140px","label-suffix":" :",rules:b,model:o.value.row,onSubmit:N(f,["prevent"])},{default:r(()=>[t(u,{label:"模板文件",prop:"url"},{default:r(()=>[t(L,{"file-list":d.value,"onUpdate:fileList":e[0]||(e[0]=a=>d.value=a),multiple:"","file-size":3,width:"300px",height:"200px",onChange:_,accept:".xlsx,.xls,.doc,.docx"},{tip:r(()=>e[6]||(e[6]=[i(" 文件大小不能超过 3M ")])),_:1},8,["file-list"])]),_:1}),t(u,{label:"模版名",prop:"tempName"},{default:r(()=>[t(p,{modelValue:o.value.row.tempName,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.row.tempName=a),placeholder:"请填写模版名",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"地址",prop:"url"},{default:r(()=>[t(p,{modelValue:o.value.row.url,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.row.url=a),placeholder:"请填写地址",clearable:"",disabled:""},null,8,["modelValue"])]),_:1}),t(u,{label:"备注",prop:"remark"},{default:r(()=>[t(p,{modelValue:o.value.row.remark,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.row.remark=a),placeholder:"请填写备注",rows:2,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}});export{M as _};
