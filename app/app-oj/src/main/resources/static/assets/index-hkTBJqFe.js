import{d as $,r as b,f as v,g as N,o as s,c as U,j as m,k as n,i as c,x as d,u as r,a_ as B,y as u,a$ as g,D as F,b0 as H,R as w,a as J,t as K,b1 as O,b4 as f,_ as j}from"./index-DTkCE7MD.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{a as z,b as G,c as Q,u as W,r as C,i as X,e as Y}from"./metaText-BFcGvJCb.js";import{u as E}from"./useHandleData-BdxQ-8Ab.js";import{T as h,M as Z}from"./MetaTextForm-CsacJZ4t.js";import{I as ee,d as te,u as ae}from"./common-DxSkM119.js";import{E as D}from"./EnumSelect-C2fXZs6G.js";import{T as L}from"./TextType-D2BxZ0SN.js";import"./sortable.esm-Cw1ESr5Y.js";import"./index-E5zgXN01.js";import"./style-DrPmFrlE.js";import"./upload-BtJOZC1L.js";import"./FileSaver.min-BnsyPtRb.js";import"./Img-CbqiKKTP.js";const le={class:"table-box"},ne=$({name:"MetaTextView",__name:"index",setup(oe){const i=b(),P=[{type:"selection",width:80},{prop:"name",label:"text名字"},{prop:"textKey",label:"文本key"},{prop:"textType",label:"文本类型",render:t=>t.row.textType||"-"},{prop:"icon",label:"图标"},{prop:"businessType",label:"业务类型",render:t=>t.row.businessType||"-"},{prop:"title",label:"文本标题"},{prop:"skipUrl",label:"跳转URL"},{prop:"content",label:"文本内容",render:t=>t.row.content||"-",width:200},{prop:"sort",label:"排序(降序)"},{prop:"enable",label:"启用",render:t=>f("el-tag",{type:t.row.enable?"success":"danger"},t.row.enable?"启用":"禁用")},{prop:"operation",label:"操作",width:250,fixed:"right"}],M=[{prop:"name",label:"text名字",el:"input"},{prop:"textKey",label:"文本key",el:"input"},{prop:"textType",label:"文本类型",render:t=>f(D,{type:"select",enumData:L,modelValue:t.searchParam.textType,"onUpdate:modelValue":e=>{t.searchParam.textType=e}})},{prop:"icon",label:"图标",el:"input"},{prop:"businessType",label:"业务类型",render:t=>f(D,{type:"select",enumData:h,modelValue:t.searchParam.businessType,"onUpdate:modelValue":e=>{t.searchParam.businessType=e}})},{prop:"title",label:"文本标题",el:"input"},{prop:"skipUrl",label:"跳转URL",el:"input"},{prop:"content",label:"文本内容",el:"input"},{prop:"sort",label:"排序(降序)",el:"input"},{prop:"enable",label:"启用",el:"switch"}],A=t=>{let e=x(t);return z(e)},x=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},y=b(),_=async(t,e={},l=!0)=>{var o,a;if(!l){const p=await G({id:e==null?void 0:e.id});e=p==null?void 0:p.data}const T={title:t,row:{...e},api:l?Q:W,getTableList:(o=i.value)==null?void 0:o.getTableList};(a=y.value)==null||a.acceptParams(T)},R=async t=>{var e;await E(C,{ids:[t.id]},`删除【${t.id}】文本`),(e=i.value)==null||e.getTableList()},S=async t=>{var e,l;await E(C,{ids:t},"删除所选文本"),(e=i.value)==null||e.clearSelection(),(l=i.value)==null||l.getTableList()},k=b(),V=()=>{var e,l;const t={title:"文本",templateName:"文本",tempApi:te,importApi:X,getTableList:(e=i.value)==null?void 0:e.getTableList};(l=k.value)==null||l.acceptParams(t)},I=async()=>{var e;let t=x((e=i.value)==null?void 0:e.searchParam);ae(Y,"文本",t)};return(t,e)=>{const l=v("el-button"),T=v("el-tooltip"),o=N("auth");return s(),U("div",le,[m(q,{ref_key:"proTableRef",ref:i,title:"文本",indent:20,columns:P,"search-columns":M,"request-api":A,"row-key":"id"},{tableHeader:n(a=>[c((s(),d(l,{type:"primary",icon:r(B),onClick:e[0]||(e[0]=p=>_("新增文本"))},{default:n(()=>e[1]||(e[1]=[u(" 新增 ")])),_:1},8,["icon"])),[[o,"meta.text.create"]]),c((s(),d(l,{type:"danger",icon:r(g),plain:"",disabled:!a.isSelected,onClick:p=>S(a.selectedListIds)},{default:n(()=>e[2]||(e[2]=[u(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[o,"meta.text.remove"]]),c((s(),d(l,{type:"primary",icon:r(F),plain:"",onClick:V},{default:n(()=>e[3]||(e[3]=[u(" 导入 ")])),_:1},8,["icon"])),[[o,"meta.text.import"]]),c((s(),d(l,{type:"primary",icon:r(H),plain:"",onClick:I},{default:n(()=>e[4]||(e[4]=[u(" 导出 ")])),_:1},8,["icon"])),[[o,"meta.text.export"]])]),textType:n(({row:a})=>[m(w,{enum:r(L),code:a.textType},null,8,["enum","code"])]),businessType:n(({row:a})=>[m(w,{enum:r(h),code:a.businessType},null,8,["enum","code"])]),content:n(({row:a})=>[m(T,{content:a.content,placement:"top-start","hide-after":2e3,"max-width":500,"show-after":500},{default:n(()=>[J("span",null,K(a.content?a.content.length>20?a.content.slice(0,20)+"...":a.content:"-"),1)]),_:2},1032,["content"])]),operation:n(({row:a})=>[c((s(),d(l,{type:"primary",link:"",icon:r(O),onClick:p=>_("编辑文本",a,!1)},{default:n(()=>e[5]||(e[5]=[u(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[o,"meta.text.update"]]),c((s(),d(l,{type:"primary",link:"",icon:r(g),onClick:p=>R(a)},{default:n(()=>e[6]||(e[6]=[u(" 删除 ")])),_:2},1032,["icon","onClick"])),[[o,"meta.text.remove"]])]),_:1},512),m(Z,{ref_key:"metaTextRef",ref:y},null,512),m(ee,{ref_key:"ImportExcelRef",ref:k},null,512)])}}}),ke=j(ne,[["__scopeId","data-v-9a08eb7e"]]);export{ke as default};
