import{d as w,r as u,f as N,g as P,o as i,c as D,j as f,k as n,i as p,x as c,u as d,a_ as B,y as m,a$ as k,aK as F,b1 as V,m as H}from"./index-DTkCE7MD.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{u as v}from"./useHandleData-BdxQ-8Ab.js";import{g as M,b as S,e as h,s as j,d as C}from"./role-B65lK4x8.js";import{_ as q}from"./RoleForm.vue_vue_type_script_setup_true_lang-Do0O1CFp.js";import{_ as E}from"./RolePermissions.vue_vue_type_script_setup_true_lang-DfiE6Jon.js";import"./sortable.esm-Cw1ESr5Y.js";const K={class:"table-box"},X=w({name:"RoleManage",__name:"index",setup(z){const R=[{type:"selection",width:80,selectable:t=>t.isLock!=="T"},{prop:"id",label:"编号",width:80},{prop:"roleName",label:"角色名称"},{prop:"permissions",tag:!0,label:"标识"},{prop:"remark",label:"备注"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"修改时间"},{prop:"operation",label:"操作",width:250,fixed:"right"}],g=[{prop:"roleName",label:"角色名称",el:"input"},{prop:"permissions",label:"标识",el:"input"}],r=u(),T=t=>M(t),_=u(),b=(t,e={},o=!0)=>{var s,l;const a={title:t,row:{...e},api:o?S:h,getTableList:(s=r.value)==null?void 0:s.getTableList};(l=_.value)==null||l.acceptParams(a)},y=u(),$=(t,e={})=>{var a;const o={title:t,row:{...e},api:j};(a=y.value)==null||a.acceptParams(o)},x=async t=>{var e;await v(C,{ids:[t.id]},`删除【${t.roleName}】角色`),(e=r.value)==null||e.getTableList()},L=async t=>{var e,o;await v(C,{ids:t},"删除所选角色信息"),(e=r.value)==null||e.clearSelection(),(o=r.value)==null||o.getTableList()};return(t,e)=>{const o=N("el-button"),a=P("auth");return i(),D("div",K,[f(I,{ref_key:"proTableRef",ref:r,title:"角色列表",indent:20,columns:R,"search-columns":g,"request-api":T},{tableHeader:n(s=>[p((i(),c(o,{type:"primary",icon:d(B),onClick:e[0]||(e[0]=l=>b("新增角色"))},{default:n(()=>e[1]||(e[1]=[m(" 新增角色 ")])),_:1},8,["icon"])),[[a,"sys.role.create_btn"]]),p((i(),c(o,{type:"danger",icon:d(k),plain:"",disabled:!s.isSelected,onClick:l=>L(s.selectedListIds)},{default:n(()=>e[2]||(e[2]=[m(" 批量删除角色 ")])),_:2},1032,["icon","disabled","onClick"])),[[a,"sys.role.delete_btn"]])]),operation:n(({row:s})=>[p((i(),c(o,{type:"primary",link:"",icon:d(F),onClick:l=>$("设置权限",s)},{default:n(()=>e[3]||(e[3]=[m(" 权限 ")])),_:2},1032,["icon","onClick"])),[[a,[{type:"and",conditions:["sys.role.setting_btn","sys.role.update_btn"]}]]]),p((i(),c(o,{type:"primary",link:"",icon:d(V),onClick:l=>b("编辑角色",s,!1)},{default:n(()=>e[4]||(e[4]=[m(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[a,"sys.role.update_btn"]]),s.id!==1?p((i(),c(o,{key:0,type:"primary",link:"",icon:d(k),onClick:l=>x(s)},{default:n(()=>e[5]||(e[5]=[m(" 删除 ")])),_:2},1032,["icon","onClick"])),[[a,"sys.menu.delete_btn"]]):H("",!0)]),_:1},512),f(q,{ref_key:"roleFormRef",ref:_},null,512),f(E,{ref_key:"rolePermissionsRef",ref:y},null,512)])}}});export{X as default};
