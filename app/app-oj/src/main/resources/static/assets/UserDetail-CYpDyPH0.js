import{d as P,b as C,o as s,c as o,a,t as u,z as m,m as v,_ as F,r as N,A as H,C as K,dS as X,dT as Y,dU as L,bw as Z,dV as ee,F as M,E as A,S as $,ak as E,f as g,g as ae,x as p,k as c,j as n,u as f,dt as se,y as j,i as te,b1 as le,P as I,Q as S,a0 as z,R as oe,J as ie,G as ne,dD as ce,bu as re,W as de}from"./index-DTkCE7MD.js";import{S as ue}from"./Sex-CCT3w392.js";import{g as ve}from"./userInfo-CIsM0YAT.js";const _e={class:"title-text"},fe={key:1,class:"no-title"},pe=P({__name:"UserTitle",props:{title:{},color:{},size:{default:"default"},showColorIndicator:{type:Boolean,default:!0}},setup(U){const k=U,T=C(()=>{const r={color:k.color||"#606266",borderColor:k.color||"#dcdfe6"};switch(k.size){case"small":r.fontSize="12px",r.padding="2px 6px";break;case"large":r.fontSize="16px",r.padding="6px 12px";break;default:r.fontSize="14px",r.padding="4px 8px";break}return r});return(r,h)=>r.title||r.color?(s(),o("div",{key:0,class:"user-title",style:m(T.value)},[a("span",_e,u(r.title||"无称号"),1),r.color?(s(),o("div",{key:0,class:"color-indicator",style:m({backgroundColor:r.color})},null,4)):v("",!0)],4)):(s(),o("span",fe,"-"))}}),me=F(pe,[["__scopeId","data-v-ae0e2a7b"]]),he={key:0,class:"detail-loading"},ye={key:1,class:"user-detail-container"},ge={class:"header-content"},ke={class:"avatar-section"},be={class:"avatar-wrapper"},xe={key:0,class:"avatar-text"},De={key:0,class:"user-badge"},Ie={class:"user-info"},Se={class:"user-name"},Ce={key:0,class:"user-subtitle"},Te={class:"stats-container"},we={class:"stats-grid"},Ne={class:"stat-icon"},$e={class:"stat-content"},ze={class:"stat-value"},Ue={class:"stat-label"},Ve={class:"detail-content"},Be={key:0,class:"detail-section"},Le={class:"section-header"},Me={class:"info-grid"},Ae={class:"info-label"},Ee={class:"info-value"},je={key:1},Pe={key:1,class:"detail-section"},Fe={class:"section-header"},Ge={class:"tags-container"},Oe={class:"tag-content"},Re={class:"tag-name"},Je={key:0,class:"tag-remark"},Qe={key:2,class:"detail-section"},We={class:"section-header"},qe={class:"tags-container"},He={key:3,class:"detail-section"},Ke={class:"section-header"},Xe={class:"image-section"},Ye={class:"image-wrapper"},Ze={key:4,class:"detail-section"},ea={class:"section-header"},aa={class:"remark-section"},sa={class:"remark-content"},ta={key:5,class:"detail-section"},la={class:"section-header"},oa={class:"info-grid"},ia={class:"info-label"},na={class:"info-value"},ca={class:"dialog-footer"},ra=P({name:"UserDetail",__name:"UserDetail",emits:["edit"],setup(U,{expose:k,emit:T}){const r=T,h=N(!1),w=N(!1),e=N({}),G=C(()=>{const i="linear-gradient(135deg, var(--el-color-primary) 0%, var(--el-color-primary-light-3) 100%)";return e.value.color?{background:`linear-gradient(135deg, ${e.value.color} 0%, ${R(e.value.color,-20)} 100%)`}:{background:i}}),O=C(()=>[{label:"AC题数",value:e.value.acNum||0,icon:H},{label:"积分",value:e.value.integral||0,icon:K},{label:"连续签到",value:e.value.continuousSignDay||0,icon:X},{label:"提交数",value:e.value.submitNum||0,icon:Y}]),V=C(()=>{const i=[];return e.value.userId&&i.push({label:"用户ID",value:e.value.userId,icon:L,key:"userId"}),e.value.phone&&i.push({label:"手机号",value:e.value.phone,icon:Z,key:"phone"}),e.value.email&&i.push({label:"邮箱",value:e.value.email,icon:ee,key:"email"}),e.value.sex&&i.push({label:"性别",value:e.value.sex,icon:M,key:"sex"}),e.value.birthday&&i.push({label:"生日",value:e.value.birthday,icon:A,key:"birthday"}),e.value.expirationTime&&i.push({label:"过期时间",value:e.value.expirationTime,icon:$,key:"expirationTime"}),e.value.lastLoginTime&&i.push({label:"最后登录",value:e.value.lastLoginTime,icon:$,key:"lastLoginTime"}),e.value.lastLoginIp&&i.push({label:"最后登录IP",value:e.value.lastLoginIp,icon:E,key:"lastLoginIp"}),i}),B=C(()=>{const i=[];return e.value.createTime&&i.push({label:"创建时间",value:e.value.createTime,icon:A}),e.value.updateTime&&i.push({label:"更新时间",value:e.value.updateTime,icon:$}),e.value.tenantId&&i.push({label:"租户ID",value:e.value.tenantId,icon:L}),i}),R=(i,l)=>{const b=parseInt(i.replace("#",""),16),x=Math.round(2.55*l),d=(b>>16)+x,D=(b>>8&255)+x,y=(b&255)+x;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(D<255?D<1?0:D:255)*256+(y<255?y<1?0:y:255)).toString(16).slice(1)},J=async i=>{h.value=!0,w.value=!0;try{if(!i.id)return;const l=await ve({id:i.id});e.value=(l==null?void 0:l.data)||{}}catch(l){console.error("加载用户详情失败:",l),de.error("加载用户详情失败，请重试")}finally{w.value=!1}},Q=()=>{h.value=!1,r("edit",e.value)};return k({openDetail:J}),(i,l)=>{const b=g("el-loading"),x=g("el-avatar"),d=g("el-icon"),D=g("el-image"),y=g("el-button"),W=g("el-dialog"),q=ae("auth");return s(),p(W,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=t=>h.value=t),title:"用户详情",width:"700px","close-on-click-modal":!1,"close-on-press-escape":!1,class:"apple-dialog user-detail-dialog","align-center":"","destroy-on-close":!0},{footer:c(()=>[a("div",ca,[n(y,{onClick:l[0]||(l[0]=t=>h.value=!1),class:"cancel-btn"},{default:c(()=>[n(d,null,{default:c(()=>[n(f(se))]),_:1}),l[8]||(l[8]=j(" 关闭 "))]),_:1}),te((s(),p(y,{type:"primary",onClick:Q,class:"edit-btn"},{default:c(()=>[n(d,null,{default:c(()=>[n(f(le))]),_:1}),l[9]||(l[9]=j(" 编辑 "))]),_:1})),[[q,"user.info.update"]])])]),default:c(()=>[w.value?(s(),o("div",he,[n(b,{lock:!0,text:"加载中..."})])):(s(),o("div",ye,[a("div",{class:"user-header",style:m(G.value)},[a("div",ge,[a("div",ke,[a("div",be,[n(x,{src:e.value.avatar,size:64,class:"user-avatar"},{default:c(()=>{var t,_;return[e.value.avatar?v("",!0):(s(),o("span",xe,u(((t=e.value.name)==null?void 0:t.charAt(0))||((_=e.value.nickName)==null?void 0:_.charAt(0))||"U"),1))]}),_:1},8,["src"]),e.value.title?(s(),o("div",De,[n(me,{title:e.value.title,color:e.value.color,size:"small"},null,8,["title","color"])])):v("",!0)]),a("div",Ie,[a("h3",Se,u(e.value.name||e.value.nickName||"-"),1),e.value.nickName&&e.value.name!==e.value.nickName?(s(),o("p",Ce," 昵称："+u(e.value.nickName),1)):v("",!0)])]),a("div",Te,[a("div",we,[(s(!0),o(I,null,S(O.value,(t,_)=>(s(),o("div",{class:"stat-card",key:t.label,style:m({animationDelay:`${_*.1}s`})},[a("div",Ne,[n(d,null,{default:c(()=>[(s(),p(z(t.icon)))]),_:2},1024)]),a("div",$e,[a("div",ze,u(t.value),1),a("div",Ue,u(t.label),1)])],4))),128))])])])],4),a("div",Ve,[V.value.length>0?(s(),o("div",Be,[a("div",Le,[n(d,{class:"section-icon"},{default:c(()=>[n(f(M))]),_:1}),l[2]||(l[2]=a("h4",{class:"section-title"},"基本信息",-1))]),a("div",Me,[(s(!0),o(I,null,S(V.value,(t,_)=>(s(),o("div",{class:"info-item",key:t.label,style:m({animationDelay:`${_*.05}s`})},[a("div",Ae,[t.icon?(s(),p(d,{key:0},{default:c(()=>[(s(),p(z(t.icon)))]),_:2},1024)):v("",!0),a("span",null,u(t.label),1)]),a("div",Ee,[t.key==="sex"&&e.value.sex?(s(),p(oe,{key:0,enum:f(ue),code:e.value.sex,"background-color":e.value.sex==="Male"?"#e1f3ff":"#fce8f3",color:e.value.sex==="Male"?"#409eff":"#f56c6c","border-color":e.value.sex==="Male"?"#b3d8ff":"#fdb9cc","font-size":"11px",padding:"2px 6px","border-radius":"4px"},null,8,["enum","code","background-color","color","border-color"])):(s(),o("span",je,u(t.value||"-"),1))])],4))),128))])])):v("",!0),e.value.roles&&e.value.roles.length>0?(s(),o("div",Pe,[a("div",Fe,[n(d,{class:"section-icon"},{default:c(()=>[n(f(ie))]),_:1}),l[3]||(l[3]=a("h4",{class:"section-title"},"角色信息",-1))]),a("div",Ge,[(s(!0),o(I,null,S(e.value.roles,(t,_)=>(s(),o("div",{class:"role-tag",key:t.id,style:m({animationDelay:`${_*.05}s`})},[a("div",Oe,[a("span",Re,u(t.roleName),1),t.remark?(s(),o("span",Je,u(t.remark),1)):v("",!0)])],4))),128))])])):v("",!0),e.value.tags&&e.value.tags.length>0?(s(),o("div",Qe,[a("div",We,[n(d,{class:"section-icon"},{default:c(()=>[n(f(ne))]),_:1}),l[4]||(l[4]=a("h4",{class:"section-title"},"标签信息",-1))]),a("div",qe,[(s(!0),o(I,null,S(e.value.tags,(t,_)=>(s(),o("div",{class:"meta-tag",key:t.id,style:m({backgroundColor:t.backgroundColor||"#f0f0f0",color:t.textColor||"#333",animationDelay:`${_*.05}s`})},u(t.name),5))),128))])])):v("",!0),e.value.image?(s(),o("div",He,[a("div",Ke,[n(d,{class:"section-icon"},{default:c(()=>[n(f(ce))]),_:1}),l[5]||(l[5]=a("h4",{class:"section-title"},"相关图片",-1))]),a("div",Xe,[a("div",Ye,[n(D,{src:e.value.image,fit:"cover","preview-src-list":[e.value.image],"preview-teleported":"",class:"detail-image"},null,8,["src","preview-src-list"])])])])):v("",!0),e.value.remark?(s(),o("div",Ze,[a("div",ea,[n(d,{class:"section-icon"},{default:c(()=>[n(f(re))]),_:1}),l[6]||(l[6]=a("h4",{class:"section-title"},"备注信息",-1))]),a("div",aa,[a("div",sa,u(e.value.remark),1)])])):v("",!0),B.value.length>0?(s(),o("div",ta,[a("div",la,[n(d,{class:"section-icon"},{default:c(()=>[n(f(E))]),_:1}),l[7]||(l[7]=a("h4",{class:"section-title"},"系统信息",-1))]),a("div",oa,[(s(!0),o(I,null,S(B.value,(t,_)=>(s(),o("div",{class:"info-item",key:t.label,style:m({animationDelay:`${_*.05}s`})},[a("div",ia,[t.icon?(s(),p(d,{key:0},{default:c(()=>[(s(),p(z(t.icon)))]),_:2},1024)):v("",!0),a("span",null,u(t.label),1)]),a("div",na,u(t.value||"-"),1)],4))),128))])])):v("",!0)])]))]),_:1},8,["modelValue"])}}}),da=F(ra,[["__scopeId","data-v-43468f48"]]),fa=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"}));export{me as U,da as a,fa as b};
