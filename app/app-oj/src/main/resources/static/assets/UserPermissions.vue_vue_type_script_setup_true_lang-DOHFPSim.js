import{d as I,r,f as d,o as x,x as C,k as n,j as u,y as v,dQ as k,aS as P,W as L}from"./index-DTkCE7MD.js";const S=I({name:"UserPermissions",__name:"UserPermissions",setup(U,{expose:f}){const c={key:"id",label:"roleName"},_=(t,e)=>e.roleName.toLowerCase().includes(t.toLowerCase()),l=r(!1),o=r({title:"",row:{},api:void 0,getTableList:void 0}),g=t=>{o.value=t,l.value=!0,b(t.row.id)},i=r([]),a=r([]),b=t=>{k({userId:t}).then(e=>{i.value=e.data.roleInfoVOS,a.value=e.data.selectIds})},w=async()=>{try{P&&o.value.row.id,await o.value.api({userId:o.value.row.id,roleIds:a.value}).then(()=>o.value.getTableList()),L.success({message:`${o.value.title}成功！`}),l.value=!1}catch(t){console.log(t)}};return f({acceptParams:g}),(t,e)=>{var m;const V=d("el-transfer"),p=d("el-button"),y=d("el-dialog");return x(),C(y,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),title:`${o.value.title}-${(m=o.value.row)==null?void 0:m.username}`,"destroy-on-close":!0,width:"650px",draggable:"","append-to-body":""},{footer:n(()=>[u(p,{onClick:e[1]||(e[1]=s=>l.value=!1)},{default:n(()=>e[3]||(e[3]=[v(" 取消 ")])),_:1}),u(p,{type:"primary",onClick:w},{default:n(()=>e[4]||(e[4]=[v(" 确定 ")])),_:1})]),default:n(()=>[u(V,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),filterable:"","filter-method":_,titles:["未设置角色","已设置角色"],"filter-placeholder":"筛选角色",props:c,data:i.value},null,8,["modelValue","data"])]),_:1},8,["modelValue","title"])}}});export{S as _};
