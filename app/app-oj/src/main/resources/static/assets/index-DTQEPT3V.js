import{d as w,r as f,f as H,g as S,o as r,c as L,j as T,k as o,i as s,x as m,u as c,a_ as M,y as d,a$ as _,D as $,b0 as P,b1 as R}from"./index-DTkCE7MD.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-v8dVln4N.js";import{a as B,b as V,c as J,u as O,r as I,i as h,e as j}from"./topicInfo-BsE0LD6L.js";import{u as D}from"./useHandleData-BdxQ-8Ab.js";import{_ as q}from"./TopicInfoForm.vue_vue_type_script_setup_true_lang-Cjb-PkwG.js";import{I as z,d as G,u as K}from"./common-DxSkM119.js";import"./sortable.esm-Cw1ESr5Y.js";const Q={class:"table-box"},pe=w({name:"TopicInfoView",__name:"index",setup(U){const l=f(),g=[{type:"selection",width:80},{prop:"topicId",label:"主题ID"},{prop:"userId",label:"用户ID"},{prop:"avatar",label:"头像"},{prop:"name",label:"姓名"},{prop:"nickName",label:"昵称"},{prop:"score",label:"总得分"},{prop:"acNum",label:"总AC数量"},{prop:"submitNum",label:"提交次数"},{prop:"useTime",label:"总做题用时(分)"},{prop:"punishmentTime",label:"总罚时(分)"},{prop:"status",label:"开始做题"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"完成时间"},{prop:"autoSubmit",label:"自动提交"},{prop:"operation",label:"操作",width:250,fixed:"right"}],Y=[{prop:"topicId",label:"主题ID",el:"input"},{prop:"userId",label:"用户ID",el:"input"},{prop:"avatar",label:"头像",el:"input"},{prop:"name",label:"姓名",el:"input"},{prop:"nickName",label:"昵称",el:"input"},{prop:"score",label:"总得分",el:"input"},{prop:"acNum",label:"总AC数量",el:"input"},{prop:"submitNum",label:"提交次数",el:"input"},{prop:"useTime",label:"总做题用时(分)",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}},{prop:"punishmentTime",label:"总罚时(分)",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}},{prop:"status",label:"开始做题",el:"select"},{prop:"startTime",label:"开始时间",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}},{prop:"endTime",label:"完成时间",el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}},{prop:"autoSubmit",label:"自动提交",el:"input"}],x=t=>{let e=b(t);return B(e)},b=t=>{let e=JSON.parse(JSON.stringify(t));return e.startTime&&(e.startTimeStart=e.startTime[0]),e.startTime&&(e.startTimeEnd=e.startTime[1]),delete e.startTime,e.endTime&&(e.endTimeStart=e.endTime[0]),e.endTime&&(e.endTimeEnd=e.endTime[1]),delete e.endTime,e.createTime&&(e.createTimeStart=e.createTime[0]),e.createTime&&(e.createTimeEnd=e.createTime[1]),delete e.createTime,e.updateTime&&(e.updateTimeStart=e.updateTime[0]),e.updateTime&&(e.updateTimeEnd=e.updateTime[1]),delete e.updateTime,e},v=f(),y=async(t,e={},a=!0)=>{var p,n;if(!a){const u=await V({id:e==null?void 0:e.id});e=u==null?void 0:u.data}const i={title:t,row:{...e},api:a?J:O,getTableList:(p=l.value)==null?void 0:p.getTableList};(n=v.value)==null||n.acceptParams(i)},C=async t=>{var e;await D(I,{ids:[t.id]},`删除【${t.id}】主题数据`),(e=l.value)==null||e.getTableList()},A=async t=>{var e,a;await D(I,{ids:t},"删除所选主题数据"),(e=l.value)==null||e.clearSelection(),(a=l.value)==null||a.getTableList()},k=f(),E=()=>{var e,a;const t={title:"主题数据",templateName:"主题数据",tempApi:G,importApi:h,getTableList:(e=l.value)==null?void 0:e.getTableList};(a=k.value)==null||a.acceptParams(t)},N=async()=>{var e;let t=b((e=l.value)==null?void 0:e.searchParam);K(j,"主题数据",t)};return(t,e)=>{const a=H("el-button"),i=S("auth");return r(),L("div",Q,[T(F,{ref_key:"proTableRef",ref:l,title:"主题数据",indent:20,columns:g,"search-columns":Y,"request-api":x,"row-key":"id"},{tableHeader:o(p=>[s((r(),m(a,{type:"primary",icon:c(M),onClick:e[0]||(e[0]=n=>y("新增主题数据"))},{default:o(()=>e[1]||(e[1]=[d(" 新增 ")])),_:1},8,["icon"])),[[i,"topic.info.create"]]),s((r(),m(a,{type:"danger",icon:c(_),plain:"",disabled:!p.isSelected,onClick:n=>A(p.selectedListIds)},{default:o(()=>e[2]||(e[2]=[d(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])),[[i,"topic.info.remove"]]),s((r(),m(a,{type:"primary",icon:c($),plain:"",onClick:E},{default:o(()=>e[3]||(e[3]=[d(" 导入 ")])),_:1},8,["icon"])),[[i,"topic.info.import"]]),s((r(),m(a,{type:"primary",icon:c(P),plain:"",onClick:N},{default:o(()=>e[4]||(e[4]=[d(" 导出 ")])),_:1},8,["icon"])),[[i,"topic.info.export"]])]),operation:o(({row:p})=>[s((r(),m(a,{type:"primary",link:"",icon:c(R),onClick:n=>y("编辑主题数据",p,!1)},{default:o(()=>e[5]||(e[5]=[d(" 编辑 ")])),_:2},1032,["icon","onClick"])),[[i,"topic.info.update"]]),s((r(),m(a,{type:"primary",link:"",icon:c(_),onClick:n=>C(p)},{default:o(()=>e[6]||(e[6]=[d(" 删除 ")])),_:2},1032,["icon","onClick"])),[[i,"topic.info.remove"]])]),_:1},512),T(q,{ref_key:"topicInfoRef",ref:v},null,512),T(z,{ref_key:"ImportExcelRef",ref:k},null,512)])}}});export{pe as default};
